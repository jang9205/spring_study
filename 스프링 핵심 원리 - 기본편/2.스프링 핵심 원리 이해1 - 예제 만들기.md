# 📖 스프링 핵심 원리 이해1 - 예제 만들기
<br/><br/>
# 🔎 프로젝트 생성
[스프링 부트 스타터](https://start.spring.io/)에서 스프링 프로젝트를 생성한다.<br/><br/>
![image](https://github.com/jang9205/spring_study/assets/123082616/924c7869-d498-4711-a726-8b5bdfdc0b85)<br/><br/>
# 🔎 비즈니스 요구사항과 설계
![image](https://github.com/jang9205/spring_study/assets/123082616/4f3baa1c-ab53-4d80-8644-d81e7c034b64)<br/><br/>
### 문제점
요구사항을 보면 회원 데이터, 할인 정책 같은 부분은 지금 결정하기 어려운 부분이다. 그렇다고 이런 정책이 결정될 때까지 개발을 무기한 기다릴 수도 없다.
### 해결 방법
인터페이스(역할)를 만들고 구현체를 언제든 갈아끼울 수 있도록 설계하면 된다.
# 🔎 회원 도메인 설계
- 회원 도메인 요구사항
  - 회원을 가입하고 조회할 수 있다.
  - 회원은 일반과 VIP 두 가지 등급이 있다.
  - 회원 데이터는 자체 DB를 구축할 수 있고, 외부 시스템과 연동할 수 있다.(미확정)<br/><br/>
![image](https://github.com/jang9205/spring_study/assets/123082616/76b9ab34-ee84-4cc6-993a-a3f89697fa50)
# 🔎 회원 도메인 설계
`src/main/java/hello.core/member`<br/><br/>
회원 등급, 회원 엔티티, 회원 서비스 interface, 회원 서비스 구현체, 회원 저장소 interface, 회원 저장소 구현체를 만든다.<br/><br/>
![image](https://github.com/jang9205/spring_study/assets/123082616/a711fef3-d44b-47a1-aca4-f766c8f875fa)<br/><br/>
# 🔎 회원 도메인 실행과 테스트
Test 코드를 작성해 실행을 하면 아래 사진처럼 정상적으로 작동하는 것을 알 수 있다.<br/><br/>
![image](https://github.com/jang9205/spring_study/assets/123082616/6f59e3ec-2562-4c8d-8b62-3f7f513de5d6)<br/><br/>
- **회원 도메인 설계의 문제점**
  - Repository(저장소)를 다른 저장소로 변경할 때 OCP 원칙을 준수하지 못한다.
  - 회원 서비스가 저장소의 인터페이스와 구현체를 모두 의존하므로 DIP를 위반한다.<br/><br/>
  ![image](https://github.com/jang9205/spring_study/assets/123082616/e4ca7483-a7fe-4b86-8e8e-cbcc15089f66)<br/><br/>
# 🔎 주문과 할인 도메인 설계
![image](https://github.com/jang9205/spring_study/assets/123082616/c63510d6-a734-47d4-ae28-cd7060513e4b)<br/><br/>
**1. 주문 생성**: 클라이언트는 주문 서비스에 주문 생성을 요청한다.<br/>
**2. 회원 조회**: 할인을 위해서는 회원 등급이 필요하다. 그래서 주문 서비스는 회원 저장소에서 회원을 조회한다.<br/>
**3. 할인 적용**: 주문 서비스는 회원 등급에 따른 할인 여부를 할인 정책에 위임한다.<br/>
**4. 주문 결과 반환**: 주문 서비스는 할인 결과를 포함한 주문 결과를 반환한다.<br/><br/>
#### 역할과 구현을 분리해서 자유롭게 구현 객체를 조립할 수 있게 설계했다. 덕분에 회원 저장소는 물론이고, 할인 정책도 유연하게 변경할 수 있다.<br/><br/>
# 🔎 주문과 할인 도메인 개발
`src/main/java/hello.core/dicount`<br/>
`src/main/java/hello.core/order`<br/><br/>
할인 정책 interface, 정액 할인 정책 구현체, 주문 엔티티, 주문 서비스 interface, 주문 서비스 구현체를 만든다.<br/><br/>
![image](https://github.com/jang9205/spring_study/assets/123082616/0bb7589d-d0e7-4224-86e7-b3ebaec3a529)<br/><br/>
# 🔎 주문과 할인 도메인 실행과 테스트
Test 코드를 작성해 실행을 하면 아래 사진처럼 정상적으로 작동하는 것을 알 수 있다.<br/><br/>
![image](https://github.com/jang9205/spring_study/assets/123082616/55088a7d-c319-4a60-803e-1596074b68cb)