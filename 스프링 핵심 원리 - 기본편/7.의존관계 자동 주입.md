# ğŸ“– ì˜ì¡´ê´€ê³„ ìë™ ì£¼ì…
<br/><br/>
# ğŸ” ë‹¤ì–‘í•œ ì˜ì¡´ê´€ê³„ ì£¼ì… ë°©ë²•
ì˜ì¡´ê´€ê³„ ì£¼ì…ì€ í¬ê²Œ 4ê°€ì§€ ë°©ë²•ì´ ìˆë‹¤.
- ìƒì„±ì ì£¼ì…
- ìˆ˜ì •ì ì£¼ì…(setter ì£¼ì…)
- í•„ë“œ ì£¼ì…
- ì¼ë°˜ ë©”ì„œë“œ ì£¼ì…
<br/><br/>
### ìƒì„±ì ì£¼ì…
- ì§€ê¸ˆê¹Œì§€ ì§„í–‰í–ˆë˜ ë°©ë²•ì´ë‹¤.
- íŠ¹ì§•
  - ìƒì„±ì í˜¸ì¶œ ì‹œì ì— ë”± 1ë²ˆë§Œ í˜¸ì¶œë˜ëŠ” ê²ƒì´ ë³´ì¥ëœë‹¤.
  - **ë¶ˆë³€, í•„ìˆ˜** ì˜ì¡´ê´€ê³„ì— ì‚¬ìš©
- ìƒì„±ìê°€ ë”± 1ê°œë§Œ ìˆìœ¼ë©´ @Autowiredë¥¼ ìƒëµí•´ë„ ìë™ ì£¼ì…ëœë‹¤.
- ìŠ¤í”„ë§ ë¹ˆ ë“±ë¡ì„ í•˜ë©´ì„œ ì˜ì¡´ê´€ê³„ ì£¼ì…ë„ ê°™ì´ í•œë‹¤. 
<br/><br/>
### ìˆ˜ì •ì ì£¼ì…(setter ì£¼ì…)
- setterë¼ ë¶ˆë¦¬ëŠ” í•„ë“œì˜ ê°’ì„ ë³€ê²½í•˜ëŠ” ìˆ˜ì •ì ë©”ì„œë“œë¥¼ í†µí•´ì„œ ì˜ì¡´ê´€ê³„ë¥¼ ì£¼ì…í•˜ëŠ” ë°©ë²•ì´ë‹¤.
- íŠ¹ì§•
  - **ì„ íƒ, ë³€ê²½** ê°€ëŠ¥ì„±ì´ ìˆëŠ” ì˜ì¡´ê´€ê³„ì— ì‚¬ìš©
  - ìë°”ë¹ˆ í”„ë¡œí¼í‹° ê·œì•½ì˜ ìˆ˜ì •ì ë©”ì„œë“œ ë°©ì‹ì„ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì´ë‹¤.
- ìŠ¤í”„ë§ ë¹ˆ ë“±ë¡ì„ í•œ í›„ì— ì˜ì¡´ê´€ê³„ ì£¼ì…ì„ í•œë‹¤.
- ì£¼ì…í•  ëŒ€ìƒì´ ì—†ì–´ë„ ë™ì‘í•˜ê²Œ í•˜ë ¤ë©´ @Autowired(required = false)ë¡œ ì§€ì •í•˜ë©´ ëœë‹¤.
```java
@Component
public class OrderServiceImpl implements OrderService {

    private MemberRepository memberRepository;
    private DiscountPolicy discountPolicy;

    @Autowired
    public void setMemberRepository(MemberRepository memberRepository) {
        this.memberRepository = memberRepository;
    }

    @Autowired
    public void setDiscountPolicy(DiscountPolicy discountPolicy) {
        this.discountPolicy = discountPolicy;
    }
```
<br/><br/>
### í•„ë“œ ì£¼ì…
- ì´ë¦„ ê·¸ëŒ€ë¡œ í•„ë“œì— ë°”ë¡œ ì£¼ì…í•˜ëŠ” ë°©ë²•ì´ë‹¤.
- íŠ¹ì§•
  - ì½”ë“œê°€ ê°„ê²°í•´ì„œ ë§ì€ ê°œë°œìë“¤ì„ ìœ í˜¹í•˜ì§€ë§Œ ì™¸ë¶€ì—ì„œ ë³€ê²½ì´ ë¶ˆê°€ëŠ¥í•´ì„œ í…ŒìŠ¤íŠ¸í•˜ê¸° í˜ë“¤ë‹¤ëŠ” ì¹˜ëª…ì ì¸ ë‹¨ì ì´ ìˆë‹¤.
  - DI í”„ë ˆì„ì›Œí¬ê°€ ì—†ìœ¼ë©´ ì•„ë¬´ê²ƒë„ í•  ìˆ˜ ì—†ë‹¤.
  - ê±°ì˜ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©° ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì‹¤ì œ ì½”ë“œì™€ ê´€ê³„ì—†ëŠ” í…ŒìŠ¤íŠ¸ ì½”ë“œ, ìŠ¤í”„ë§ ì„¤ì •ì„ ëª©ì ìœ¼ë¡œ í•˜ëŠ” @Configuration ê°™ì€ ê³³ì—ì„œë§Œ íŠ¹ë³„í•œ ìš©ë„ë¡œ ì‚¬ìš©
```java
@Component
public class OrderServiceImpl implements OrderService {

    @Autowired private MemberRepository memberRepository;
    @Autowired private DiscountPolicy discountPolicy;
```
<br/><br/>
### ì¼ë°˜ ë©”ì„œë“œ ì£¼ì…
- íŠ¹ì§•
  - í•œë²ˆì— ì—¬ëŸ¬ í•„ë“œë¥¼ ì£¼ì… ë°›ì„ ìˆ˜ ìˆë‹¤.
  - ì¼ë°˜ì ìœ¼ë¡œ ì˜ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤.
```java
@Component
public class OrderServiceImpl implements OrderService {

 private MemberRepository memberRepository;
 private DiscountPolicy discountPolicy;

 @Autowired
 public void init(MemberRepository memberRepository, DiscountPolicy discountPolicy) {
 this.memberRepository = memberRepository;
 this.discountPolicy = discountPolicy;
 }
```
<br/><br/>
# ğŸ” ì˜µì…˜ ì²˜ë¦¬
ì£¼ì…í•  ìŠ¤í”„ë§ ë¹ˆì´ ì—†ì–´ë„ ë™ì‘í•´ì•¼ í•  ë•ŒëŠ”, ìë™ ì£¼ì… ëŒ€ìƒì„ ì˜µì…˜ìœ¼ë¡œ ì²˜ë¦¬í•´ì•¼ ëœë‹¤.<br/><br/>
### ìë™ ì£¼ì… ëŒ€ìƒì„ ì˜µì…˜ìœ¼ë¡œ ì²˜ë¦¬í•˜ëŠ” ë°©ë²•
- @Autowired(required=false) : ìë™ ì£¼ì…í•  ëŒ€ìƒì´ ì—†ìœ¼ë©´ ìˆ˜ì •ì ë©”ì„œë“œ ìì²´ê°€ í˜¸ì¶œ ì•ˆë¨
- org.springframework.lang.@Nullable : ìë™ ì£¼ì…í•  ëŒ€ìƒì´ ì—†ìœ¼ë©´ nullì´ ì…ë ¥ëœë‹¤.
- Optional<> : ìë™ ì£¼ì…í•  ëŒ€ìƒì´ ì—†ìœ¼ë©´ Optional.emptyê°€ ì…ë ¥ëœë‹¤.
<br/><br/>
`src/test/java/hello.core/autowired/AutowiredTest`
```java
public class AutowiredTest {

    @Test
    void AutowiredOption() {
        ApplicationContext ac = new AnnotationConfigApplicationContext(TestBean.class);
    }

    static class TestBean {

        @Autowired(required = false)
        public void setNoBean1(Member noBean1) {
            System.out.println("noBean1 = " + noBean1);
        }

        @Autowired
        public void setNoBean2(@Nullable Member noBean2) {
            System.out.println("noBean2 = " + noBean2);
        }

        @Autowired
        public void setNoBean3(Optional<Member> noBean3) {
            System.out.println("noBean3 = " + noBean3);
        }
    }
}
```
- MemberëŠ” ìŠ¤í”„ë§ ë¹ˆì´ ì•„ë‹ˆë‹¤.
<br/><br/>
# ğŸ” ìƒì„±ì ì£¼ì…ì„ ì„ íƒí•´ë¼!
### ë¶ˆë³€
ìƒì„±ì ì£¼ì…ì€ ê°ì²´ë¥¼ ìƒì„±í•  ë•Œ ë”± 1ë²ˆë§Œ í˜¸ì¶œë˜ê³ , ë¶ˆë³€í•˜ê²Œ ì„¤ê³„í•  ìˆ˜ ìˆë‹¤.<br/>
ìˆ˜ì •ì ì£¼ì…ì€ setXxx ë©”ì„œë“œë¥¼ publicìœ¼ë¡œ ì—´ì–´ë‘¬, ëˆ„êµ°ê°€ ì‹¤ìˆ˜ë¡œ ë³€ê²½í•  ìˆ˜ ìˆì–´ ì¢‹ì€ ì„¤ê³„ ë°©ë²•ì´ ì•„ë‹ˆë‹¤.<br/><br/>
### ëˆ„ë½
**ìˆ˜ì •ì ì£¼ì…**ì„ ì‚¬ìš©í•˜ì—¬ memberRepository, discountPolicy ëª¨ë‘ ì˜ì¡´ê´€ê³„ ì£¼ì…ì´ ëˆ„ë½ëœ ìƒíƒœì—ì„œ Testë¥¼ ëŒë¦¬ë©´<br/><br/>
`src/main/java/hello/core/order/OrderServiceImpl`
```java
@Component
public class OrderServiceImpl implements OrderService {

    private MemberRepository memberRepository;
    private DiscountPolicy discountPolicy;

    @Autowired
    public void setMemberRepository(MemberRepository memberRepository) {
        this.memberRepository = memberRepository;
    }

    @Autowired
    public void setDiscountPolicy(DiscountPolicy discountPolicy) {
        this.discountPolicy = discountPolicy;
    }
```
`src/main/java/hello.core/AppConfig`
```java
    @Bean
    public OrderService orderService() {
        System.out.println("call AppConfig.orderService");
//        return new OrderServiceImpl(memberRepository(), discountPolicy());
        return null;
    }
```
`src/test/java/hello.core/order/OrderServiceImplTest`
```java
class OrderServiceImplTest {

    @Test
    void createOrder() {
        OrderServiceImpl orderService = new OrderServiceImpl();
        orderService.createOrder(1L, "itemA", 10000);
    }
}
```
NullPointerException ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤.<br/><br/><br/><br/>
í•˜ì§€ë§Œ ìˆ˜ì •ì ì£¼ì…ëŒ€ì‹  **ìƒì„±ì ì£¼ì…**ìœ¼ë¡œ ë³€ê²½í•˜ì—¬ Testë¥¼ ëŒë¦¬ë©´<br/><br/>
`src/main/java/hello/core/order/OrderServiceImpl`
```java
    @Autowired
    public OrderServiceImpl(MemberRepository memberRepository, DiscountPolicy discountPolicy) {
        this.memberRepository = memberRepository;
        this.discountPolicy = discountPolicy;
    }
```
ì»´íŒŒì¼ ì˜¤ë¥˜ê°€ ë°œìƒí•  ë•Œ ìˆ˜ì •ì ì£¼ì…ê³¼ ë‹¤ë¥´ê²Œ IDEì— ë°”ë¡œ ì–´ë–¤ ê°’(memberRepository, discountPolicy)ì„ í•„ìˆ˜ë¡œ ì£¼ì…í•´ì•¼ í•˜ëŠ”ì§€ ì•Œë ¤ì¤€ë‹¤.<br/><br/>
![image](https://github.com/jang9205/spring_study/assets/123082616/d0857e1e-1518-45b0-876b-53070d8b138a)<br/><br/>
### final í‚¤ì›Œë“œ
ìƒì„±ì ì£¼ì…ì„ ì‚¬ìš©í•˜ë©´ í•„ë“œì— final í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ê·¸ë˜ì„œ ìƒì„±ìì—ì„œ í˜¹ì‹œë¼ë„ ê°’ì´ ì„¤ì •ë˜ì§€ ì•ŠëŠ” ì˜¤ë¥˜ë¥¼ ì»´íŒŒì¼ ì‹œì ì— ë§‰ì•„ì¤€ë‹¤.<br/><br/>
# ğŸ” ë¡¬ë³µê³¼ ìµœì‹  íŠ¸ëœë“œ
ë¡¬ë³µ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì œê³µí•˜ëŠ” @RequiredArgsConstructor ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë©´ finalì´ ë¶™ì€ í•„ë“œë¥¼ ëª¨ì•„ì„œ ìƒì„±ìë¥¼ ìë™ìœ¼ë¡œ ë§Œë“¤ì–´ì¤€ë‹¤.
```java
@Component
@RequiredArgsConstructor
public class OrderServiceImpl implements OrderService {

    private final MemberRepository memberRepository;
    private final DiscountPolicy discountPolicy;

    // ìƒì„±ì ì½”ë“œê°€ ì—†ì–´ë„ ë¨
```
<br/><br/>
# ğŸ” ì¡°íšŒ ë¹ˆì´ 2ê°œ ì´ìƒ - ë¬¸ì œ
@AutowiredëŠ” íƒ€ì…(Type)ìœ¼ë¡œ ì¡°íšŒí•œë‹¤.<br/>
íƒ€ì…ìœ¼ë¡œ ì¡°íšŒí•˜ê¸° ë•Œë¬¸ì—, ë§ˆì¹˜ ë‹¤ìŒ ì½”ë“œì™€ ìœ ì‚¬í•˜ê²Œ ë™ì‘í•œë‹¤.
```java
ac.getBean(DiscountPolicy.class)
```
ìŠ¤í”„ë§ ë¹ˆ ì¡°íšŒì—ì„œ í•™ìŠµí–ˆë“¯ì´ íƒ€ì…ìœ¼ë¡œ ì¡°íšŒí•˜ë©´ ì„ íƒëœ ë¹ˆì´ 2ê°œ ì´ìƒì¼ ë•Œ ë¬¸ì œê°€ ë°œìƒí•œë‹¤.<br/><br/><br/><br/>
ê·¸ë˜ì„œ DiscountPolicyì˜ í•˜ìœ„ íƒ€ì…ì¸ FixDiscountPolicy, RateDiscountPolicy ë‘˜ ë‹¤ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ê³  ì¡°íšŒë¥¼ í•˜ë©´ ë¬¸ì œê°€ ë°œìƒí•œë‹¤.
```java
@Component
public class FixDiscountPolicy implements DiscountPolicy{
```
```java
@Component
public class RateDiscountPolicy implements DiscountPolicy{
```
ë‘˜ ë‹¤ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ì„ ì–¸í•˜ê³  Testë¥¼ ëŒë¦¬ë©´ NoUniqueBeanDefinitionException ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤.<br/><br/>
# ğŸ” @Autowired í•„ë“œ ëª…, @Qualifier, @Primary
ì¡°íšŒ ëŒ€ìƒ ë¹ˆì´ 2ê°œ ì´ìƒì¼ ë•Œ í•´ê²° ë°©ë²•
- @Autowired í•„ë“œ ëª… ë§¤ì¹­
- @Qualifier ì‚¬ìš©
- @Primary ì‚¬ìš©
<br/><br/>
### @Autowired í•„ë“œ ëª… ë§¤ì¹­
@AutowiredëŠ” íƒ€ì… ë§¤ì¹­ì„ ì‹œë„í•˜ê³ , ì´ë•Œ ì—¬ëŸ¬ ë¹ˆì´ ìˆìœ¼ë©´ í•„ë“œ ì´ë¦„, íŒŒë¼ë¯¸í„° ì´ë¦„ìœ¼ë¡œ ë¹ˆ ì´ë¦„ì„ ì¶”ê°€ ë§¤ì¹­í•œë‹¤.
```java
    @Autowired
    public OrderServiceImpl(MemberRepository memberRepository, DiscountPolicy rateDiscountPolicy) {
        this.memberRepository = memberRepository;
        this.discountPolicy = rateDiscountPolicy;
    }
```
<br/><br/>í•„ë“œ ì£¼ì…ì„ í•  ë•Œì—ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ìˆ˜ì •í•œë‹¤.
```java
@Autowired
private DiscountPolicy rateDiscountPolicy
```
<br/><br/>
### @Qualifier ì‚¬ìš©
@QualifierëŠ” ì¶”ê°€ êµ¬ë¶„ìë¥¼ ë¶™ì—¬ì£¼ëŠ” ë°©ë²•ì´ë‹¤. ì£¼ì…ì‹œ ì¶”ê°€ì ì¸ ë°©ë²•ì„ ì œê³µí•˜ëŠ” ê²ƒì´ì§€ ë¹ˆ ì´ë¦„ì„ ë³€ê²½í•˜ëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤.
```java
@Component
@Qualifier("mainDiscountPolicy")
public class RateDiscountPolicy implements DiscountPolicy{
```
```java
@Component
@Qualifier("fixDiscountPolicy")
public class FixDiscountPolicy implements DiscountPolicy{
```
```java
    @Autowired
    public OrderServiceImpl(MemberRepository memberRepository, @Qualifier("mainDiscountPolicy") DiscountPolicy discountPolicy) {
        this.memberRepository = memberRepository;
        this.discountPolicy = discountPolicy;
    }
```
<br/><br/>ìˆ˜ì •ì ìë™ ì£¼ì…ì¼ ê²½ìš° ë‹¤ìŒê³¼ ê°™ì´ ìˆ˜ì •í•œë‹¤.
```java
    @Autowired
    public void setDiscountPolicy(@Qualifier("mainDiscountPolicy") DiscountPolicy discountPolicy) {
        this.discountPolicy = discountPolicy;
    }
```
<br/><br/>
### @Primary ì‚¬ìš©
@PrimaryëŠ” ìš°ì„ ìˆœìœ„ë¥¼ ì •í•˜ëŠ” ë°©ë²•ì´ë‹¤. @Autowired ì‹œì— ì—¬ëŸ¬ ë¹ˆì´ ë§¤ì¹­ë˜ë©´ @Primaryê°€ ìš°ì„ ê¶Œì„ ê°€ì§„ë‹¤.
```java
@Component
public class FixDiscountPolicy implements DiscountPolicy{
```
```java
@Component
@Primary
public class RateDiscountPolicy implements DiscountPolicy{
```
```java
    @Autowired
    public OrderServiceImpl(MemberRepository memberRepository, DiscountPolicy discountPolicy) {
        this.memberRepository = memberRepository;
        this.discountPolicy = discountPolicy;
    }
```
<br/><br/>
# ğŸ” ì• ë…¸í…Œì´ì…˜ ì§ì ‘ ë§Œë“¤ê¸°
@Qualifier("mainDiscountPolicy") ì´ë ‡ê²Œ ë¬¸ìë¥¼ ì ìœ¼ë©´ ì»´íŒŒì¼ì‹œ íƒ€ì… ì²´í¬ê°€ ì•ˆëœë‹¤. ë‹¤ìŒê³¼ ê°™ì€ ì• ë…¸í…Œì´ì…˜ì„ ë§Œë“¤ì–´ì„œ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆë‹¤.<br/><br/>
`src/main/java/hello.core/annotation/MainDiscountPolicy`
```java
@Target({ElementType.FIELD, ElementType.METHOD, ElementType.PARAMETER, ElementType.TYPE, ElementType.ANNOTATION_TYPE})
@Retention(RetentionPolicy.RUNTIME)
@Inherited
@Documented
@Qualifier("mainDiscountPolicy")
public @interface MainDiscountPolicy {
}
```
```java
@Component
@MainDiscountPolicy
public class RateDiscountPolicy implements DiscountPolicy{
```
```java
    @Autowired
    public OrderServiceImpl(MemberRepository memberRepository, @MainDiscountPolicy DiscountPolicy discountPolicy) {
        this.memberRepository = memberRepository;
        this.discountPolicy = discountPolicy;
    }
```
<br/><br/>
# ğŸ” ì¡°íšŒí•œ ë¹ˆì´ ëª¨ë‘ í•„ìš”í•  ë•Œ, List, Map
ì˜ë„ì ìœ¼ë¡œ í•´ë‹¹ íƒ€ì…ì˜ ìŠ¤í”„ë§ ë¹ˆì´ ë‹¤ í•„ìš”í•œ ê²½ìš°ë„ ìˆë‹¤.<br/><br/>
`src/test/java/hello.core/autowired/AllBeanTest`
```java
public class AllBeanTest {

    @Test
    void findAllBean() {
        ApplicationContext ac = new AnnotationConfigApplicationContext(AutoAppConfig.class, DiscountService.class);
    }

    static class DiscountService {
        private final Map<String, DiscountPolicy> policyMap;
        private final List<DiscountPolicy> policies;

        @Autowired
        public DiscountService(Map<String, DiscountPolicy> policyMap, List<DiscountPolicy> policies) {
            this.policyMap = policyMap;
            this.policies = policies;
            System.out.println("policyMap = " + policyMap);
            System.out.println("policies = " + policies);
        }
    }
}
```
- DiscountServiceëŠ” Mapìœ¼ë¡œ ëª¨ë“  DiscountPolicyë¥¼ ì£¼ì…ë°›ëŠ”ë‹¤. ì´ë•Œ fixDiscountPolicy, rateDiscountPolicyê°€ ì£¼ì…ëœë‹¤.
- Test ì½”ë“œë¥¼ ëŒë¦¬ë©´ DiscountPolicyì˜ ëª¨ë“  ìŠ¤í”„ë§ ë¹ˆì„ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤.
<br/><br/>![image](https://github.com/jang9205/spring_study/assets/123082616/618d9964-bdf7-47a0-b247-b6de52d9216c)<br/><br/>
# ğŸ” ìë™, ìˆ˜ë™ì˜ ì˜¬ë°”ë¥¸ ì‹¤ë¬´ ìš´ì˜ ê¸°ì¤€
ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ê³¼ ì˜ì¡´ê´€ê³„ ìë™ ì£¼ì…ì„ ê¸°ë³¸ìœ¼ë¡œ ì‚¬ìš©í•˜ì.<br/><br/>
í•˜ì§€ë§Œ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ê´‘ë²”ìœ„í•˜ê²Œ ì˜í–¥ì„ ë¯¸ì¹˜ëŠ” ê¸°ìˆ  ì§€ì› ê°ì²´ëŠ” ìˆ˜ë™ ë¹ˆìœ¼ë¡œ ë“±ë¡í•´ì„œ ì„¤ì • ì •ë³´ì— ë°”ë¡œ ë‚˜íƒ€ë‚˜ê²Œ í•˜ëŠ” ê²ƒì´ ìœ ì§€ë³´ìˆ˜ í•˜ê¸° ì¢‹ë‹¤.<br/>
ë˜í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì¤‘ì—ì„œ ë‹¤í˜•ì„±ì„ ì ê·¹ í™œìš©í•  ë•ŒëŠ” ìˆ˜ë™ ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ê±°ë‚˜ ìë™ìœ¼ë¡œí•˜ë©´ íŠ¹ì • íŒ¨í‚¤ì§€ì— ê°™ì´ ë¬¶ì–´ë‘ëŠ”ê²Œ ì¢‹ë‹¤.