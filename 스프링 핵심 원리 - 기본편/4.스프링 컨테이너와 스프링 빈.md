# ğŸ“– ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì™€ ìŠ¤í”„ë§ ë¹ˆ
<br/><br/>
# ğŸ” ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„±
ë‹¤ìŒê³¼ ê°™ì´ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ ìƒì„±í•œë‹¤.<br/>
```java
ApplicationContext applicationContext = new AnnotationConfigApplicationContext(AppConfig.class);
```
- ApplicationContextë¥¼ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¼ í•œë‹¤.
- ApplicationContextëŠ” ì¸í„°í˜ì´ìŠ¤ì´ê³ , AnnotationConfigApplicationContextëŠ” ì¸í„°í˜ì´ìŠ¤ì˜ êµ¬í˜„ì²´ì´ë‹¤.
- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” XMLì„ ê¸°ë°˜ìœ¼ë¡œ ë§Œë“¤ ìˆ˜ ìˆê³ , ì• ë…¸í…Œì´ì…˜ ê¸°ë°˜ì˜ ìë°” ì„¤ì • í´ë˜ìŠ¤ë¡œ ë§Œë“¤ ìˆ˜ ìˆë‹¤. ì§ì „ì— AppConfigë¥¼ ì‚¬ìš©í–ˆë˜ ë°©ì‹ì´ ì• ë…¸í…Œì´ì…˜ ê¸°ë°˜ì˜ ìë°” ì„¤ì • í´ë˜ìŠ¤ë¡œ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ ë§Œë“  ê²ƒì´ë‹¤.
<br/><br/>
### ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì˜ ìƒì„± ê³¼ì •
![image](https://github.com/jang9205/spring_study/assets/123082616/71def849-bb06-4fdc-895c-851d35c962b1)
- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ ìƒì„±í•  ë•ŒëŠ” êµ¬ì„± ì •ë³´ë¥¼ ì§€ì •í•´ì£¼ì–´ì•¼ í•œë‹¤.
- ì—¬ê¸°ì„œëŠ” AppConfig.classë¥¼ êµ¬ì„± ì •ë³´ë¡œ ì§€ì •í–ˆë‹¤.
<br/><br/>
![image](https://github.com/jang9205/spring_study/assets/123082616/04d4e9dc-20ea-4fe8-a634-4669cc473961)
#### ë¹ˆ ì´ë¦„
- ë¹ˆ ì´ë¦„ì€ ë©”ì„œë“œ ì´ë¦„ì„ ì‚¬ìš©í•œë‹¤.
- ë¹ˆ ì´ë¦„ì„ ì§ì ‘ ë¶€ì—¬í•  ìˆ˜ ë„ ìˆë‹¤. 
  - @Bean(name="memberService2")
-  ë¹ˆ ì´ë¦„ì€ **í•­ìƒ ë‹¤ë¥¸ ì´ë¦„ì„ ë¶€ì—¬**í•´ì•¼ í•œë‹¤.
<br/><br/>
![image](https://github.com/jang9205/spring_study/assets/123082616/c5797e9e-5b1e-4f7e-9957-8f7fd36f236c)<br/><br/>
![image](https://github.com/jang9205/spring_study/assets/123082616/047689e3-3209-4110-aef6-5ca65271a6de)
- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” ì„¤ì • ì •ë³´ë¥¼ ì°¸ê³ í•´ì„œ ì˜ì¡´ê´€ê³„ë¥¼ ì£¼ì…(DI)í•œë‹¤.
- ë‹¨ìˆœíˆ ìë°” ì½”ë“œë¥¼ í˜¸ì¶œí•˜ëŠ” ê²ƒ ê°™ì§€ë§Œ, ì°¨ì´ê°€ ìˆë‹¤. ì´ ì°¨ì´ëŠ” ë’¤ì— ì‹±ê¸€í†¤ ì»¨í…Œì´ë„ˆì—ì„œ ì„¤ëª…í•œë‹¤.
<br/><br/>
# ğŸ” ì»¨í…Œì´ë„ˆì— ë“±ë¡ëœ ëª¨ë“  ë¹ˆ ì¡°íšŒ
ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ì‹¤ì œ ìŠ¤í”„ë§ ë¹ˆë“¤ì´ ì˜ ë“±ë¡ ë˜ì—ˆëŠ”ì§€ í™•ì¸í•œë‹¤.<br/><br/>
`src/test/java/hello.core/beanfind/ApplicationContextInfoTest`
```java
    @Test
    @DisplayName("ëª¨ë“  ë¹ˆ ì¶œë ¥í•˜ê¸°")
    void findAllBean() {
        String[] beanDefinitionNames = ac.getBeanDefinitionNames();
        for (String beanDefinitionName : beanDefinitionNames) {
            Object bean = ac.getBean(beanDefinitionName);
            System.out.println("name = " + beanDefinitionName + " object = " + bean);
        }
    }
```
- ëª¨ë“  ë¹ˆ ì¶œë ¥í•˜ê¸°
  - ì‹¤í–‰í•˜ë©´ ìŠ¤í”„ë§ì— ë“±ë¡ëœ ëª¨ë“  ë¹ˆ ì •ë³´ë¥¼ ì¶œë ¥í•  ìˆ˜ ìˆë‹¤.
  - ac.getBeanDefinitionNames() : ìŠ¤í”„ë§ì— ë“±ë¡ëœ ëª¨ë“  ë¹ˆ ì´ë¦„ì„ ì¡°íšŒí•œë‹¤.
  - ac.getBean() : ë¹ˆ ì´ë¦„ìœ¼ë¡œ ë¹ˆ ê°ì²´(ì¸ìŠ¤í„´ìŠ¤)ë¥¼ ì¡°íšŒí•œë‹¤.
<br/><br/>
```java
    @Test
    @DisplayName("ì• í”Œë¦¬ì¼€ì´ì…˜ ë¹ˆ ì¶œë ¥í•˜ê¸°")
    void findApplicationBean() {
        String[] beanDefinitionNames = ac.getBeanDefinitionNames();
        for (String beanDefinitionName : beanDefinitionNames) {
            BeanDefinition beanDefinition = ac.getBeanDefinition(beanDefinitionName);

            //Role ROLE_APPLICATION: ì§ì ‘ ë“±ë¡í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ ë¹ˆ
            //Role ROLE_INFRASTRUCTURE: ìŠ¤í”„ë§ì´ ë‚´ë¶€ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë¹ˆ
            if (beanDefinition.getRole() == BeanDefinition.ROLE_APPLICATION) {
                Object bean = ac.getBean(beanDefinitionName);
                System.out.println("name = " + beanDefinitionName + " object = " + bean);
            }
        }
    }
```
- ì• í”Œë¦¬ì¼€ì´ì…˜ ë¹ˆ ì¶œë ¥í•˜ê¸°
  - ìŠ¤í”„ë§ì´ ë‚´ë¶€ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë¹ˆì€ ì œì™¸í•˜ê³ , ë‚´ê°€ ë“±ë¡í•œ ë¹ˆë§Œ ì¶œë ¥í•œë‹¤.
  - ìŠ¤í”„ë§ì´ ë‚´ë¶€ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë¹ˆì€ getRole() ë¡œ êµ¬ë¶„í•  ìˆ˜ ìˆë‹¤.
    - ROLE_APPLICATION : ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©ìê°€ ì •ì˜í•œ ë¹ˆ
    - ROLE_INFRASTRUCTURE : ìŠ¤í”„ë§ì´ ë‚´ë¶€ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë¹ˆ
<br/><br/>
# ğŸ” ìŠ¤í”„ë§ ë¹ˆ ì¡°íšŒ - ê¸°ë³¸
ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì—ì„œ ìŠ¤í”„ë§ ë¹ˆì„ ì°¾ëŠ” ê°€ì¥ ê¸°ë³¸ì ì¸ ì¡°íšŒ ë°©ë²•<br/><br/>
`src/test/java/hello.core/beanfind/ApplicationContextBasicFindTest`
### 
```java
    @Test
    @DisplayName("ë¹ˆ ì´ë¦„ìœ¼ë¡œ ì¡°íšŒ")
    void findBeanByName() {
        MemberService memberService = ac.getBean("memberService", MemberService.class);
        assertThat(memberService).isInstanceOf(MemberServiceImpl.class);
    }
```
- ac.getBean(ë¹ˆì´ë¦„, íƒ€ì…)
<br/><br/>
```java
    @Test
    @DisplayName("ì´ë¦„ ì—†ì´ íƒ€ì…ìœ¼ë¡œë§Œ ì¡°íšŒ")
    void findBeanByType() {
        MemberService memberService = ac.getBean(MemberService.class);
        assertThat(memberService).isInstanceOf(MemberServiceImpl.class);
    }
```
- ac.getBean(íƒ€ì…)
<br/><br/>
```java
    @Test
    @DisplayName("êµ¬ì²´ íƒ€ì…ìœ¼ë¡œ ì¡°íšŒ")
    void findBeanByName2() {
        MemberServiceImpl memberService = ac.getBean("memberService", MemberServiceImpl.class);
        assertThat(memberService).isInstanceOf(MemberServiceImpl.class);
    }
```
- êµ¬ì²´ íƒ€ì…ìœ¼ë¡œ ì¡°íšŒí•˜ë©´ ë³€ê²½ì‹œ ìœ ì—°ì„±ì´ ë–¨ì–´ì§„ë‹¤.
<br/><br/>
```java
    @Test
    @DisplayName("ë¹ˆ ì´ë¦„ìœ¼ë¡œ ì¡°íšŒX")
    void findBeanByNameX() {
//        ac.getBean("xxxxx", MemberService.class);
        assertThrows(NoSuchBeanDefinitionException.class,
                () -> ac.getBean("xxxxx", MemberService.class));
    }
```
- ì¡°íšŒ ëŒ€ìƒ ìŠ¤í”„ë§ ë¹ˆì´ ì—†ìœ¼ë©´ ì˜ˆì™¸ ë°œìƒ
  - NoSuchBeanDefinitionException: No bean named 'xxxxx' available
<br/><br/>
# ğŸ” ìŠ¤í”„ë§ ë¹ˆ ì¡°íšŒ - ë™ì¼í•œ íƒ€ì…ì´ ë‘˜ ì´ìƒ
`src/test/java/hello.core/beanfind/ApplicationContextSameBeanFindTest`
```java
    @Test
    @DisplayName("íƒ€ì…ìœ¼ë¡œ ì¡°íšŒì‹œ ê°™ì€ íƒ€ì…ì´ ë‘˜ ì´ìƒ ìˆìœ¼ë©´, ì¤‘ë³µ ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤")
    void findBeanByTypeDuplicate() {
        assertThrows(NoUniqueBeanDefinitionException.class,
                () -> ac.getBean(MemberRepository.class));
    }
```
- íƒ€ì…ìœ¼ë¡œ ì¡°íšŒì‹œ ê°™ì€ íƒ€ì…ì˜ ìŠ¤í”„ë§ ë¹ˆì´ ë‘˜ ì´ìƒì´ë©´ ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤.
  - ë¹ˆ ì´ë¦„ì„ ì§€ì •í•˜ë©´ ëœë‹¤.
<br/><br/>
```java
    @Test
    @DisplayName("íŠ¹ì • íƒ€ì…ì„ ëª¨ë‘ ì¡°íšŒí•˜ê¸°")
    void findAllBeanByType() {
        Map<String, MemberRepository> beansOfType = ac.getBeansOfType(MemberRepository.class);
        for (String key : beansOfType.keySet()) {
            System.out.println("key = " + key + " value = " + beansOfType.get(key));
        }
        assertThat(beansOfType.size()).isEqualTo(2);
    }
```
- ac.getBeansOfType()ì„ ì‚¬ìš©í•˜ë©´ í•´ë‹¹ íƒ€ì…ì˜ ëª¨ë“  ë¹ˆì„ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤.
<br/><br/>
# ğŸ” ìŠ¤í”„ë§ ë¹ˆ ì¡°íšŒ - ìƒì† ê´€ê³„
- ë¶€ëª¨ íƒ€ì…ìœ¼ë¡œ ì¡°íšŒí•˜ë©´, ìì‹ íƒ€ì…ë„ í•¨ê»˜ ì¡°íšŒí•œë‹¤.
- ê·¸ë˜ì„œ ëª¨ë“  ìë°” ê°ì²´ì˜ ìµœê³  ë¶€ëª¨ì¸ Object íƒ€ì…ìœ¼ë¡œ ì¡°íšŒí•˜ë©´, ëª¨ë“  ìŠ¤í”„ë§ ë¹ˆì„ ì¡°íšŒí•œë‹¤.
<br/><br/>![image](https://github.com/jang9205/spring_study/assets/123082616/3f053d64-1993-4e60-9d0c-dfb7a5b05e67)<br/><br/>
`src/test/java/hello.core/beanfind/ApplicationContextExtendsFindTest`
```java
    @Test
    @DisplayName("ë¶€ëª¨ íƒ€ì…ìœ¼ë¡œ ëª¨ë‘ ì¡°íšŒí•˜ê¸° - Object")
    void findAllBeanByObjectType() {
        Map<String, Object> beansOfType = ac.getBeansOfType(Object.class);
        for (String key : beansOfType.keySet()) {
            System.out.println("key = " + key + " value = " + beansOfType.get(key));
        }
    }
```
<br/><br/>
# ğŸ” BeanFactoryì™€ ApplicationContext
![image](https://github.com/jang9205/spring_study/assets/123082616/35e4288f-a4c9-4f79-94f0-50741d4157a8)
#### BeanFactory
- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì˜ ìµœìƒìœ„ ì¸í„°í˜ì´ìŠ¤ë‹¤.
- ìŠ¤í”„ë§ ë¹ˆì„ ê´€ë¦¬í•˜ê³  ì¡°íšŒí•˜ëŠ” ì—­í• ì„ ë‹´ë‹¹í•œë‹¤.
- BeanFactoryë¥¼ ì§ì ‘ ì‚¬ìš©í•  ì¼ì€ ê±°ì˜ ì—†ë‹¤. ë¶€ê°€ê¸°ëŠ¥ì´ í¬í•¨ëœ ApplicationContextë¥¼ ì‚¬ìš©í•œë‹¤.
<br/><br/>
#### ApplicationContext
- BeanFactory ê¸°ëŠ¥ì„ ëª¨ë‘ ìƒì†ë°›ì•„ì„œ ì œê³µí•œë‹¤.
- ë¹ˆ ê´€ë¦¬ê¸°ëŠ¥ + í¸ë¦¬í•œ ë¶€ê°€ ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤.
<br/><br/>
![image](https://github.com/jang9205/spring_study/assets/123082616/31533fb3-8ded-4fba-82ea-e446eed5d0ad)
- ë©”ì‹œì§€ì†ŒìŠ¤ë¥¼ í™œìš©í•œ êµ­ì œí™” ê¸°ëŠ¥
  - ì˜ˆë¥¼ ë“¤ì–´ì„œ í•œêµ­ì—ì„œ ë“¤ì–´ì˜¤ë©´ í•œêµ­ì–´ë¡œ, ì˜ì–´ê¶Œì—ì„œ ë“¤ì–´ì˜¤ë©´ ì˜ì–´ë¡œ ì¶œë ¥
- í™˜ê²½ë³€ìˆ˜
  - ë¡œì»¬, ê°œë°œ, ìš´ì˜ë“±ì„ êµ¬ë¶„í•´ì„œ ì²˜ë¦¬
- ì• í”Œë¦¬ì¼€ì´ì…˜ ì´ë²¤íŠ¸
  - ì´ë²¤íŠ¸ë¥¼ ë°œí–‰í•˜ê³  êµ¬ë…í•˜ëŠ” ëª¨ë¸ì„ í¸ë¦¬í•˜ê²Œ ì§€ì›
- í¸ë¦¬í•œ ë¦¬ì†ŒìŠ¤ ì¡°íšŒ
  - íŒŒì¼, í´ë˜ìŠ¤íŒ¨ìŠ¤, ì™¸ë¶€ ë“±ì—ì„œ ë¦¬ì†ŒìŠ¤ë¥¼ í¸ë¦¬í•˜ê²Œ ì¡°íšŒ
<br/><br/>
# ğŸ” ë‹¤ì–‘í•œ ì„¤ì • í˜•ì‹ ì§€ì› - ìë°” ì½”ë“œ, XML
ì£¼ë¡œ ìë°” ì½”ë“œë¥¼ ì‚¬ìš©í•˜ì§€ë§Œ, ë‹¤ì–‘í•œ í˜•ì‹ì˜ ì„¤ì • ì •ë³´ë¥¼ ë°›ì•„ë“¤ì¼ ìˆ˜ ìˆê²Œ ìœ ì—°í•˜ê²Œ ì„¤ê³„ë˜ì–´ ìˆë‹¤.
#### XML ì„¤ì • ì‚¬ìš©
```java
ApplicationContext ac = new GenericXmlApplicationContext("appConfig.xml");
```
<br/><br/>
# ğŸ” ìŠ¤í”„ë§ ë¹ˆ ì„¤ì • ë©”íƒ€ ì •ë³´ - BeanDefinition
![image](https://github.com/jang9205/spring_study/assets/123082616/7f6a2808-fdd0-481e-9b29-b56efe1c2074)
- ìŠ¤í”„ë§ì€ ë‹¤ì–‘í•œ í˜•íƒœì˜ ì„¤ì • ì •ë³´ë¥¼ BeanDefinitionìœ¼ë¡œ ì¶”ìƒí™”í•´ì„œ ì‚¬ìš©í•œë‹¤.
  - ìë°” ì½”ë“œë‚˜ XMLì„ ì½ê³  BeanDefinitionì„ ìƒì„±í•œë‹¤.
  - ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” ìë°” ì½”ë“œì¸ì§€, XMLì¸ì§€ ëª°ë¼ë„ ëœë‹¤. ì˜¤ì§ BeanDefinitionë§Œ ì•Œë©´ ëœë‹¤.
- BeanDefinitionì„ ë¹ˆ ì„¤ì • ë©”íƒ€ì •ë³´ë¼ í•˜ë©° @Bean ë‹¹ ê°ê° í•˜ë‚˜ì”© ë©”íƒ€ ì •ë³´ê°€ ìƒì„±ëœë‹¤.
<br/><br/>![image](https://github.com/jang9205/spring_study/assets/123082616/e1e417a7-256b-43a6-9ecd-7244b527a191)<br/><br/>
#### BeanDefinition ì •ë³´
- BeanClassName: ìƒì„±í•  ë¹ˆì˜ í´ë˜ìŠ¤ ëª…(ìë°” ì„¤ì •ì²˜ëŸ¼ íŒ©í† ë¦¬ ì—­í• ì˜ ë¹ˆì„ ì‚¬ìš©í•˜ë©´ ì—†ìŒ)
- factoryBeanName: íŒ©í† ë¦¬ ì—­í• ì˜ ë¹ˆì„ ì‚¬ìš©í•  ê²½ìš° ì´ë¦„, ì˜ˆ) appConfig
- factoryMethodName: ë¹ˆì„ ìƒì„±í•  íŒ©í† ë¦¬ ë©”ì„œë“œ ì§€ì •, ì˜ˆ) memberService
- Scope: ì‹±ê¸€í†¤(ê¸°ë³¸ê°’)
- lazyInit: ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ ìƒì„±í•  ë•Œ ë¹ˆì„ ìƒì„±í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, ì‹¤ì œ ë¹ˆì„ ì‚¬ìš©í•  ë•Œê¹Œì§€ ìµœëŒ€í•œ ìƒì„±ì„ ì§€ì—°ì²˜ë¦¬ í•˜ëŠ”ì§€ ì—¬ë¶€
- InitMethodName: ë¹ˆì„ ìƒì„±í•˜ê³ , ì˜ì¡´ê´€ê³„ë¥¼ ì ìš©í•œ ë’¤ì— í˜¸ì¶œë˜ëŠ” ì´ˆê¸°í™” ë©”ì„œë“œ ëª…
- DestroyMethodName: ë¹ˆì˜ ìƒëª…ì£¼ê¸°ê°€ ëë‚˜ì„œ ì œê±°í•˜ê¸° ì§ì „ì— í˜¸ì¶œë˜ëŠ” ë©”ì„œë“œ ëª…
- Constructor arguments, Properties: ì˜ì¡´ê´€ê³„ ì£¼ì…ì—ì„œ ì‚¬ìš©í•œë‹¤. (ìë°” ì„¤ì •ì²˜ëŸ¼ íŒ©í† ë¦¬ ì—­í• ì˜ ë¹ˆì„ ì‚¬ìš©í•˜ë©´ ì—†ìŒ)