# ğŸ“– ë¡œê·¸ì¸ ì²˜ë¦¬1 - ì¿ í‚¤, ì„¸ì…˜
<br/><br/>
# ğŸ” ë¡œê·¸ì¸ ìš”êµ¬ì‚¬í•­
- í™ˆ í™”ë©´ - ë¡œê·¸ì¸ ì „
  - íšŒì› ê°€ì…
  - ë¡œê·¸ì¸
- í™ˆ í™”ë©´ - ë¡œê·¸ì¸ í›„
  - ë³¸ì¸ ì´ë¦„(ëˆ„êµ¬ë‹˜ í™˜ì˜í•©ë‹ˆë‹¤.)
  - ìƒí’ˆ ê´€ë¦¬
  - ë¡œê·¸ ì•„ì›ƒ
- ë³´ì•ˆ ìš”êµ¬ì‚¬í•­
  - ë¡œê·¸ì¸ ì‚¬ìš©ìë§Œ ìƒí’ˆì— ì ‘ê·¼í•˜ê³ , ê´€ë¦¬í•  ìˆ˜ ìˆìŒ
  - ë¡œê·¸ì¸ í•˜ì§€ ì•Šì€ ì‚¬ìš©ìê°€ ìƒí’ˆ ê´€ë¦¬ì— ì ‘ê·¼í•˜ë©´ ë¡œê·¸ì¸ í™”ë©´ìœ¼ë¡œ ì´ë™
- íšŒì› ê°€ì…, ìƒí’ˆ ê´€ë¦¬
<br/><br/>
# ğŸ” íšŒì› ê°€ì…
`main/java/hello/login/domain/member/Member`
```java
@Data
public class Member {

    private Long id;

    @NotEmpty
    private String loginId; //ë¡œê·¸ì¸ ID
    @NotEmpty
    private String name;    //ì‚¬ìš©ì ì´ë¦„
    @NotEmpty
    private String password;
}
```
<br/><br/>`main/java/hello/login/domain/member/MemberRepository`
```java
@Slf4j
@Repository
public class MemberRepository {

    private static Map<Long, Member> store = new HashMap<>();   //static ì‚¬ìš©
    private static long sequence = 0L;  //static ì‚¬ìš©

    public Member save(Member member) {
        member.setId(++sequence);
        log.info("save: member={}", member);
        store.put(member.getId(), member);
        return member;
    }

    public Member findById(Long id) {
        return store.get(id);
    }

    public Optional<Member> findByLoginId(String loginId) {
        return findAll().stream()
                .filter(m -> m.getLoginId().equals(loginId))
                .findFirst();
    }

    public List<Member> findAll() {
        return new ArrayList<>(store.values());
    }

    public void clearStore() {
        store.clear();
    }
}
```
<br/><br/>`main/java/hello/login/web/member/MemberController`
```java
@Controller
@RequiredArgsConstructor
@RequestMapping("/members")
public class MemberController {

    private final MemberRepository memberRepository;

    @GetMapping("/add")
    public String addForm(@ModelAttribute("member") Member member) {
        return "members/addMemberForm";
    }

    @PostMapping("/add")
    public String save(@Validated @ModelAttribute Member member, BindingResult bindingResult) {
        if (bindingResult.hasErrors()) {
            return "members/addMemberForm";
        }

        memberRepository.save(member);
        return "redirect:/";
    }
}
```
<br/><br/>**íšŒì›ìš© í…ŒìŠ¤íŠ¸ ë°ì´í„° ì¶”ê°€**
<br/><br/>`main/java/hello/login/TestDataInit`
```java
@Component
@RequiredArgsConstructor
public class TestDataInit {

    private final ItemRepository itemRepository;
    private final MemberRepository memberRepository;

    /**
     * í…ŒìŠ¤íŠ¸ìš© ë°ì´í„° ì¶”ê°€
     */
    @PostConstruct
    public void init() {
        itemRepository.save(new Item("itemA", 10000, 10));
        itemRepository.save(new Item("itemB", 20000, 20));

        Member member = new Member();
        member.setLoginId("test");
        member.setPassword("test!");
        member.setName("í…ŒìŠ¤í„°");
        memberRepository.save(member);
    }
}
```
<br/><br/>![image](https://github.com/jang9205/spring_study/assets/123082616/2dea5edd-f1e1-4917-9d35-c4bdaaf9ba5f)<br/><br/>
# ğŸ” ë¡œê·¸ì¸ ê¸°ëŠ¥
`main/java/hello/login/domain/login/LoginService`
```java
@Service
@RequiredArgsConstructor
public class LoginService {

    private final MemberRepository memberRepository;

    /**
     * @return nullì´ë©´ ë¡œê·¸ì¸ ì‹¤íŒ¨
     */
    public Member login(String loginId, String password) {
        return memberRepository.findByLoginId(loginId).
                filter(m -> m.getPassword().equals(password))
                .orElse(null);
    }
}
```
ë¡œê·¸ì¸ì˜ í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì€ íšŒì›ì„ ì¡°íšŒí•œ ë‹¤ìŒì— íŒŒë¼ë¯¸í„°ë¡œ ë„˜ì–´ì˜¨ `password`ì™€ ë¹„êµí•´ì„œ ê°™ìœ¼ë©´ íšŒì›ì„ ë°˜í™˜í•˜ê³ , ë§Œì•½ `password`ê°€ ë‹¤ë¥´ë©´ `null`ì„ ë°˜í™˜í•œë‹¤.<br/><br/>
`main/java/hello/login/web/login/LoginForm`
```java
@Data
public class LoginForm {

    @NotEmpty
    private String loginId;
    @NotEmpty
    private String password;
}
```
<br/><br/>`main/java/hello/login/web/login/LoginController`
```java
@Slf4j
@Controller
@RequiredArgsConstructor
public class LoginController {

    private final LoginService loginService;

    @GetMapping("/login")
    public String loginForm(@ModelAttribute("loginForm") LoginForm form) {
        return "login/loginForm";
    }

    @PostMapping("/login")
    public String login(@Validated @ModelAttribute LoginForm form, BindingResult bindingResult) {
        if (bindingResult.hasErrors()) {
            return "login/loginForm";
        }

        Member loginMember = loginService.login(form.getLoginId(), form.getPassword());

        if (loginMember == null) {
            bindingResult.reject("loginFail", "ì•„ì´ë”” ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ë§ì§€ ì•ŠìŠµë‹ˆë‹¤.");
            return "login/loginForm";
        }

        //ë¡œê·¸ì¸ ì„±ê³µ ì²˜ë¦¬ TODO

        return "redirect:/";
    }
}
```
ë¡œê·¸ì¸ ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” ë¡œê·¸ì¸ ì„œë¹„ìŠ¤ë¥¼ í˜¸ì¶œí•´ì„œ ë¡œê·¸ì¸ì— ì„±ê³µí•˜ë©´ í™ˆ í™”ë©´ìœ¼ë¡œ ì´ë™í•˜ê³ , ë¡œê·¸ì¸ì— ì‹¤íŒ¨í•˜ë©´ `bindingResult.reject()`ë¥¼ ì‚¬ìš©í•´ì„œ ê¸€ë¡œë²Œ ì˜¤ë¥˜(`ObjectError`)ë¥¼ ìƒì„±í•œë‹¤.
ê·¸ë¦¬ê³  ì •ë³´ë¥¼ ë‹¤ì‹œ ì…ë ¥í•˜ë„ë¡ ë¡œê·¸ì¸ í¼ì„ ë·° í…œí”Œë¦¿ìœ¼ë¡œ ì‚¬ìš©í•œë‹¤.<br/><br/>
ì‹¤í–‰í•´ë³´ë©´ ë¡œê·¸ì¸ì´ ì„±ê³µí•˜ë©´ í™ˆìœ¼ë¡œ ì´ë™í•˜ê³ , ë¡œê·¸ì¸ì— ì‹¤íŒ¨í•˜ë©´ "ì•„ì´ë”” ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ë§ì§€ ì•ŠìŠµë‹ˆë‹¤."ë¼ëŠ” ê²½ê³ ì™€ í•¨ê»˜ ë¡œê·¸ì¸ í¼ì´ ë‚˜íƒ€ë‚œë‹¤.<br/><br/>
ê·¸ëŸ°ë° ì•„ì§ ë¡œê·¸ì¸ì´ ë˜ë©´ í™ˆ í™”ë©´ì— ê³ ê° ì´ë¦„ì´ ë³´ì—¬ì•¼ í•œë‹¤ëŠ” ìš”êµ¬ì‚¬í•­ì„ ë§Œì¡±í•˜ì§€ ëª»í•œë‹¤.<br/><br/>
# ğŸ” ë¡œê·¸ì¸ ì²˜ë¦¬í•˜ê¸° - ì¿ í‚¤ ì‚¬ìš©
### ë¡œê·¸ì¸ ìƒíƒœ ìœ ì§€í•˜ê¸°
ì„œë²„ì—ì„œ ë¡œê·¸ì¸ì— ì„±ê³µí•˜ë©´ HTTP ì‘ë‹µì— ì¿ í‚¤ë¥¼ ë‹´ì•„ì„œ ë¸Œë¼ìš°ì €ì— ì „ë‹¬í•œë‹¤. ê·¸ëŸ¬ë©´ ë¸Œë¼ìš°ì €ëŠ” ì•ìœ¼ë¡œ í•´ë‹¹ ì¿ í‚¤ë¥¼ ì§€ì†í•´ì„œ ë³´ë‚´ì¤€ë‹¤.<br/><br/>
![image](https://github.com/jang9205/spring_study/assets/123082616/7370af9e-a524-4af5-bcb5-0f4d69611caf)<br/><br/>
ì›¹ ë¸Œë¼ìš°ì €ê°€ id, passwordë¥¼ ë‹´ì•„ POSTë¡œ /loginì„ ì„œë²„ì— ìš”ì²­í•´ì„œ ë¡œê·¸ì¸ì— ì„±ê³µí•˜ë©´, ì„œë²„ëŠ” Set-Cookieì— ìœ ì € ì •ë³´ë¥¼ ë‹´ì•„ í´ë¼ì´ì–¸íŠ¸ì— ì‘ë‹µí•œë‹¤.<br/>
-> í´ë¼ì´ì–¸íŠ¸ ì›¹ ë¸Œë¼ìš°ì €ì˜ ì¿ í‚¤ ì €ì¥ì†Œì— ì¿ í‚¤ë¥¼ ì €ì¥í•œë‹¤.<br/><br/>
![image](https://github.com/jang9205/spring_study/assets/123082616/394a1641-7e8f-4bdc-a7e4-7554c608cff4)<br/><br/>
ë¡œê·¸ì¸ ì´í›„, ì›¹ ë¸Œë¼ìš°ì €ëŠ” ìë™ìœ¼ë¡œ ì¿ í‚¤ë¥¼ ë‹´ì•„ /welcomeì„ ì„œë²„ì— ìš”ì²­í•œë‹¤.<br/>
ì„œë²„ëŠ” ì¿ í‚¤ë¥¼ ì—´ì–´ë³´ê³  ë¡œê·¸ì¸í•œ ìœ ì €ì„ì„ í™•ì¸í•œ ë‹¤ìŒ ì‘ë‹µì„ í•œë‹¤.<br/><br/>
![image](https://github.com/jang9205/spring_study/assets/123082616/fef303d1-04e6-49b4-a972-1cf57924e0a2)<br/><br/>
ë¡œê·¸ì¸ ì´í›„, ì›¹ ë¸Œë¼ìš°ì €ê°€ ìš”ì²­ì„ ë³´ë‚¼ ë•Œë§ˆë‹¤ ìë™ìœ¼ë¡œ ì¿ í‚¤ ì €ì¥ì†Œì—ì„œ êº¼ë‚¸ ì¿ í‚¤ë¥¼ HTTP í—¤ë”ì— ë‹´ì•„ ìš”ì²­ì„ ë³´ë‚¸ë‹¤.<br/><br/>
**ì˜ì† ì¿ í‚¤**: ë§Œë£Œ ë‚ ì§œë¥¼ ì…ë ¥í•˜ë©´ í•´ë‹¹ ë‚ ì§œê¹Œì§€ ìœ ì§€<br/>
**ì„¸ì…˜ ì¿ í‚¤**: ë§Œë£Œ ë‚ ì§œë¥¼ ìƒëµí•˜ë©´ ë¸Œë¼ìš°ì € ì¢…ë£Œ ì‹œê¹Œì§€ë§Œ ìœ ì§€<br/><br/>
ë¸Œë¼ìš°ì € ì¢…ë£Œ ì‹œ ë¡œê·¸ì•„ì›ƒì´ ë˜ê¸¸ ê¸°ëŒ€í•˜ë¯€ë¡œ, ì„¸ì…˜ ì¿ í‚¤ë¥¼ ì‚¬ìš©í•œë‹¤.<br/><br/>
### ë¡œê·¸ì¸ ì„±ê³µ ì‹œ ì„¸ì…˜ ì¿ í‚¤ ìƒì„±
`main/java/hello/login/web/login/LoginController`
```java
    ...

    @PostMapping("/login")
    public String login(@Validated @ModelAttribute LoginForm form, BindingResult bindingResult, HttpServletResponse response) {
        if (bindingResult.hasErrors()) {
            return "login/loginForm";
        }

        Member loginMember = loginService.login(form.getLoginId(), form.getPassword());

        if (loginMember == null) {
            bindingResult.reject("loginFail", "ì•„ì´ë”” ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ë§ì§€ ì•ŠìŠµë‹ˆë‹¤.");
            return "login/loginForm";
        }

        //ë¡œê·¸ì¸ ì„±ê³µ ì²˜ë¦¬

        //ì¿ í‚¤ì— ì‹œê°„ ì •ë³´ë¥¼ ì£¼ì§€ ì•Šìœ¼ë©´ ì„¸ì…˜ ì¿ í‚¤(ë¸Œë¼ìš°ì € ì¢…ë£Œ ì‹œ ëª¨ë‘ ì¢…ë£Œ)
        Cookie idCookie = new Cookie("memberId", String.valueOf(loginMember.getId()));
        response.addCookie(idCookie);

        return "redirect:/";
    }
}
```
ë¡œê·¸ì¸ì— ì„±ê³µí•˜ë©´ ì¿ í‚¤ë¥¼ ìƒì„±í•˜ê³  `HttpServletResponse`ì— ë‹´ëŠ”ë‹¤. ì¿ í‚¤ ì´ë¦„ì€ `memberId`ì´ê³ , ê°’ì€ íšŒì›ì˜ `id`ë¥¼ ë‹´ì•„ë‘”ë‹¤.<br/>
ì›¹ ë¸Œë¼ìš°ì €ëŠ” ì¢…ë£Œ ì „ê¹Œì§€ íšŒì›ì˜ `id`ë¥¼ ì„œë²„ì— ê³„ì† ë³´ë‚´ì¤„ ê²ƒì´ë‹¤.<br/><br/>
![image](https://github.com/jang9205/spring_study/assets/123082616/ca8f98b5-2ddf-46e5-a9d9-9d2e2627eb34)<br/><br/>
### í™ˆ - ë¡œê·¸ì¸ ì²˜ë¦¬
`main/java/hello/login/web/HomeController`
```java
@Slf4j
@Controller
@RequiredArgsConstructor
public class HomeController {

    private final MemberRepository memberRepository;

    @GetMapping("/")
    public String homeLogin(@CookieValue(name = "memberId", required = false) Long memberId, Model model) {

        if (memberId == null) {
            return "home";
        }

        //ë¡œê·¸ì¸
        Member loginMember = memberRepository.findById(memberId);
        if (loginMember == null) {
            return "home";
        }

        model.addAttribute("member", loginMember);
        return "loginHome";
    }
}
```
- `@CookieValue`ë¥¼ ì‚¬ìš©í•˜ë©´ í¸ë¦¬í•˜ê²Œ ì¿ í‚¤ë¥¼ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤.
- ë¡œê·¸ì¸ í•˜ì§€ ì•Šì€ ì‚¬ìš©ìë„ í™ˆì— ì ‘ê·¼í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— `required = false`ë¥¼ ì‚¬ìš©í•œë‹¤.
- ë¡œê·¸ì¸ ì¿ í‚¤(`memberId`)ê°€ ì—†ëŠ” ì‚¬ìš©ìëŠ” ê¸°ì¡´ `home`ìœ¼ë¡œ ë³´ë‚¸ë‹¤. ì¶”ê°€ë¡œ ë¡œê·¸ì¸ ì¿ í‚¤ê°€ ìˆì–´ë„ íšŒì›ì´ ì—†ìœ¼ë©´ `home`ìœ¼ë¡œ ë³´ë‚¸ë‹¤.
- ë¡œê·¸ì¸ ì¿ í‚¤(`memberId`)ê°€ ìˆëŠ” ì‚¬ìš©ìëŠ” ë¡œê·¸ì¸ ì‚¬ìš©ì ì „ìš© í™ˆ í™”ë©´ì¸ `loginHome`ìœ¼ë¡œ ë³´ë‚¸ë‹¤. ì¶”ê°€ë¡œ í™ˆ í™”ë©´ì— í™”ì› ê´€ë ¨ ì •ë³´ë„ ì¶œë ¥í•´ì•¼ í•´ì„œ `member` ë°ì´í„°ë„ ëª¨ë¸ì— ë‹´ì•„ì„œ ì „ë‹¬í•œë‹¤.
<br/><br/>![image](https://github.com/jang9205/spring_study/assets/123082616/069a25bb-1041-483f-9dfd-b89c94710ee6)<br/><br/>
### ë¡œê·¸ì•„ì›ƒ ê¸°ëŠ¥
`main/java/hello/login/web/HomeController`
```java
    ...

    @PostMapping("/logout")
    public String logout(HttpServletResponse response) {
        expireCookie(response, "memberId");
        return "redirect:/";
    }

    private static void expireCookie(HttpServletResponse response, String cookieName) {
        Cookie cookie = new Cookie(cookieName, null);
        cookie.setMaxAge(0);
        response.addCookie(cookie);
    }
}
```
í•´ë‹¹ ì¿ í‚¤ì˜ ì¢…ë£Œ ë‚ ì§œë¥¼ 0ìœ¼ë¡œ ì§€ì •í•´ì„œ ì¿ í‚¤ê°€ ì¦‰ì‹œ ì¢…ë£Œë˜ê²Œ í•œë‹¤.<br/><br/>
![image](https://github.com/jang9205/spring_study/assets/123082616/7e709f5f-bf8f-40b0-837c-8c843b695497)<br/><br/>
# ğŸ” ì¿ í‚¤ì™€ ë³´ì•ˆ ë¬¸ì œ
ì¿ í‚¤ë¥¼ ì‚¬ìš©í•´ì„œ ë¡œê·¸ì¸Idë¥¼ ì „ë‹¬í•´ ë¡œê·¸ì¸ì„ ìœ ì§€í•  ìˆ˜ ìˆì—ˆë‹¤. ê·¸ëŸ°ë° ì—¬ê¸°ì—ëŠ” ì‹¬ê°í•œ ë³´ì•ˆ ë¬¸ì œê°€ ìˆë‹¤.<br/><br/>
### ë³´ì•ˆ ë¬¸ì œ
- ì¿ í‚¤ ê°’ì€ ì„ì˜ë¡œ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.
  - í´ë¼ì´ì–¸íŠ¸ê°€ ì¿ í‚¤ë¥¼ ê°•ì œë¡œ ë³€ê²½í•˜ë©´ ë‹¤ë¥¸ ì‚¬ìš©ìê°€ ëœë‹¤.
  - ì›¹ë¸Œë¼ìš°ì € ê°œë°œìëª¨ë“œ -> Application -> Cookie ë³€ê²½ ê°€ëŠ¥
- ì¿ í‚¤ì— ë³´ê´€ëœ ì •ë³´ëŠ” í›”ì³ê°ˆ ìˆ˜ ìˆë‹¤.
  - ì¿ í‚¤ì— ê°œì¸ì •ë³´ë‚˜, ì‹ ìš©ì¹´ë“œ ì •ë³´ê°€ ìˆë‹¤ë©´
  - ì´ ì •ë³´ê°€ ì›¹ ë¸Œë¼ìš°ì €ì—ë„ ë³´ê´€ë˜ê³ , ë„¤íŠ¸ì›Œí¬ ìš”ì²­ë§ˆë‹¤ ê³„ì† í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì„œë²„ë¡œ ì „ë‹¬ëœë‹¤.
- í•´ì»¤ê°€ ì¿ í‚¤ë¥¼ í•œë²ˆ í›”ì³ê°€ë©´ í‰ìƒ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
  - í•´ì»¤ê°€ ì¿ í‚¤ë¥¼ í›”ì³ê°€ì„œ ê·¸ ì¿ í‚¤ë¡œ ì•…ì˜ì ì¸ ìš”ì²­ì„ ê³„ì† ì‹œë„í•  ìˆ˜ ìˆë‹¤.
<br/><br/>
### ëŒ€ì•ˆ
- ì¿ í‚¤ì— ì¤‘ìš”í•œ ê°’ì„ ë…¸ì¶œí•˜ì§€ ì•Šê³ , ì‚¬ìš©ì ë³„ë¡œ ì˜ˆì¸¡ ë¶ˆê°€ëŠ¥í•œ ì„ì˜ì˜ í† í°(ëœë¤ ê°’)ì„ ë…¸ì¶œí•˜ê³ , ì„œë²„ì—ì„œ í† í°ê³¼ ì‚¬ìš©ì idë¥¼ ë§¤í•‘í•´ì„œ ì¸ì‹í•œë‹¤. ê·¸ë¦¬ê³  ì„œë²„ì—ì„œ í† í°ì„ ê´€ë¦¬í•œë‹¤.
- í† í°ì€ í•´ì»¤ê°€ ì„ì˜ì˜ ê°’ì„ ë„£ì–´ë„ ì°¾ì„ ìˆ˜ ì—†ë„ë¡ ì˜ˆìƒ ë¶ˆê°€ëŠ¥ í•´ì•¼ í•œë‹¤.
- í•´ì»¤ê°€ í† í°ì„ í„¸ì–´ê°€ë„ ì‹œê°„ì´ ì§€ë‚˜ë©´ ì‚¬ìš©í•  ìˆ˜ ì—†ë„ë¡ ì„œë²„ì—ì„œ í•´ë‹¹ í† í°ì˜ ë§Œë£Œì‹œê°„ì„ ì§§ê²Œ(ì˜ˆ: 30ë¶„) ìœ ì§€í•œë‹¤. ë˜ëŠ” í•´í‚¹ì´ ì˜ì‹¬ë˜ëŠ” ê²½ìš° ì„œë²„ì—ì„œ í•´ë‹¹ í† í°ì„ ê°•ì œë¡œ ì œê±°í•˜ë©´ ëœë‹¤.
<br/><br/>
# ğŸ” ë¡œê·¸ì¸ ì²˜ë¦¬í•˜ê¸° - ì„¸ì…˜ ë™ì‘ ë°©ì‹
ë³´ì•ˆ ë¬¸ì œë¥¼ í•´ê²°í•˜ë ¤ë©´ ê²°êµ­ ì¤‘ìš”í•œ ì •ë³´ë¥¼ ëª¨ë‘ ì„œë²„ì— ì €ì¥í•´ì•¼ í•œë‹¤.<br/>
ê·¸ë¦¬ê³  í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ëŠ” ì¶”ì • ë¶ˆê°€ëŠ¥í•œ ì„ì˜ì˜ ì‹ë³„ì ê°’ìœ¼ë¡œ ì—°ê²°í•´ì•¼ í•œë‹¤.<br/>
ì´ë ‡ê²Œ ì„œë²„ì— ì¤‘ìš”í•œ ì •ë³´ë¥¼ ë³´ê´€í•˜ê³  ì—°ê²°ì„ ìœ ì§€í•˜ëŠ” ë°©ë²•ì„ **ì„¸ì…˜**ì´ë¼ê³  í•œë‹¤.<br/><br/>
### ì„¸ì…˜ ë™ì‘ ë°©ì‹
![image](https://github.com/jang9205/spring_study/assets/123082616/573d170d-5ef2-4d0d-b4c6-ba62973e171d)<br/><br/>
ì‚¬ìš©ìê°€ `loginId`, `password` ì •ë³´ë¥¼ ì „ë‹¬í•˜ë©´ ì„œë²„ì—ì„œ í•´ë‹¹ ì‚¬ìš©ìê°€ ë§ëŠ”ì§€ í™•ì¸í•œë‹¤.<br/><br/>
![image](https://github.com/jang9205/spring_study/assets/123082616/a08e7607-9166-4e66-b011-50f6acb27f00)<br/><br/>
ì„¸ì…˜ IDë¥¼ ìƒì„±í•˜ëŠ”ë°, ì¶”ì • ë¶ˆê°€ëŠ¥í•´ì•¼ í•œë‹¤.(UUIDëŠ” ì¶”ì •ì´ ë¶ˆê°€ëŠ¥)<br/>
ìƒì„±ëœ ì„¸ì…˜ IDì™€ ì„¸ì…˜ì— ë³´ê´€í•  ê°’(`memberA`)ì„ ì„œë²„ì˜ ì„¸ì…˜ ì €ì¥ì†Œì— ë³´ê´€í•œë‹¤.<br/><br/>
![image](https://github.com/jang9205/spring_study/assets/123082616/8ce9f33d-b2ed-4867-a1d9-d7acae158f75)<br/><br/>
ì„œë²„ëŠ” í´ë¼ì´ì–¸íŠ¸ì— `mySessionId`ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ì„¸ì…˜ IDë§Œ ì¿ í‚¤ì— ë‹´ì•„ì„œ ì „ë‹¬í•œë‹¤.<br/>
í´ë¼ì´ì–¸íŠ¸ëŠ” ì¿ í‚¤ ì €ì¥ì†Œì— `mySessionId` ì¿ í‚¤ë¥¼ ë³´ê´€í•œë‹¤.<br/><br/>
ì—¬ê¸°ì„œ ì¤‘ìš”í•œ í¬ì¸íŠ¸ëŠ” íšŒì›ê³¼ ê´€ë ¨ëœ ì •ë³´ëŠ” ì „í˜€ í´ë¼ì´ì–¸íŠ¸ì— ì „ë‹¬í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ê²ƒì´ë‹¤.<br/>
ì˜¤ì§ ì¶”ì • ë¶ˆê°€ëŠ¥í•œ ì„¸ì…˜ IDë§Œ ì¿ í‚¤ë¥¼ í†µí•´ í´ë¼ì´ì–¸íŠ¸ì— ì „ë‹¬í•œë‹¤.<br/><br/>
![image](https://github.com/jang9205/spring_study/assets/123082616/2cb91142-0be0-4605-b65d-7dc3318bbf15)<br/><br/>
í´ë¼ì´ì–¸íŠ¸ëŠ” ìš”ì²­ ì‹œ í•­ìƒ `mySessionId` ì¿ í‚¤ë¥¼ ì „ë‹¬í•œë‹¤.<br/>
ì„œë²„ì—ì„œëŠ” í´ë¼ì´ì–¸íŠ¸ê°€ ì „ë‹¬í•œ `mySessionId` ì¿ í‚¤ ì •ë³´ë¡œ ì„¸ì…˜ ì €ì¥ì†Œë¥¼ ì¡°íšŒí•´ì„œ ë¡œê·¸ì¸ ì‹œ ë³´ê´€í•œ ì„¸ì…˜ ì •ë³´ë¥¼ ì‚¬ìš©í•œë‹¤.<br/><br/>
**ë³´ì•ˆ ë¬¸ì œ í•´ê²°**
- ì¿ í‚¤ ê°’ì„ ë³€ì¡° ê°€ëŠ¥ -> ì˜ˆìƒ ë¶ˆê°€ëŠ¥í•œ ë³µì¡í•œ ì„¸ì…˜Idë¥¼ ì‚¬ìš©í•œë‹¤.
- ì¿ í‚¤ì— ë³´ê´€í•˜ëŠ” ì •ë³´ëŠ” í´ë¼ì´ì–¸íŠ¸ í•´í‚¹ì‹œ í„¸ë¦´ ê°€ëŠ¥ì„±ì´ ìˆë‹¤. -> ì„¸ì…˜Idê°€ í„¸ë ¤ë„ ì—¬ê¸°ì—ëŠ” ì¤‘ìš”í•œ ì •ë³´ê°€ ì—†ë‹¤.
- ì¿ í‚¤ íƒˆì·¨ í›„ ì‚¬ìš© -> í•´ì»¤ê°€ í† í°ì„ í„¸ì–´ê°€ë„ ì‹œê°„ì´ ì§€ë‚˜ë©´ ì‚¬ìš©í•  ìˆ˜ ì—†ë„ë¡ ì„œë²„ì—ì„œ ì„¸ì…˜ì˜ ë§Œë£Œì‹œê°„ì„ ì§§ê²Œ(ì˜ˆ: 30ë¶„) ìœ ì§€í•œë‹¤. ë˜ëŠ” í•´í‚¹ì´ ì˜ì‹¬ë˜ëŠ” ê²½ìš° ì„œë²„ì—ì„œ í•´ë‹¹ ì„¸ì…˜ì„ ê°•ì œë¡œ ì œê±°í•˜ë©´ ëœë‹¤.
<br/><br/>
# ğŸ” ë¡œê·¸ì¸ ì²˜ë¦¬í•˜ê¸° - ì„¸ì…˜ ì§ì ‘ ë§Œë“¤ê¸°
ì„¸ì…˜ ê´€ë¦¬ëŠ” í¬ê²Œ ë‹¤ìŒ 3ê°€ì§€ ê¸°ëŠ¥ì„ ì œê³µí•˜ë©´ ëœë‹¤.<br/><br/>
- ì„¸ì…˜ ìƒì„±  
  - sessionId ìƒì„± (ì„ì˜ì˜ ì¶”ì • ë¶ˆê°€ëŠ¥í•œ ëœë¤ ê°’)
  - ì„¸ì…˜ ì €ì¥ì†Œì— sessionIdì™€ ë³´ê´€í•  ê°’ ì €ì¥
  - sessionIdë¡œ ì‘ë‹µ ì¿ í‚¤ë¥¼ ìƒì„±í•´ì„œ í´ë¼ì´ì–¸íŠ¸ì— ì „ë‹¬
- ì„¸ì…˜ ì¡°íšŒ
  - í´ë¼ì´ì–¸íŠ¸ê°€ ìš”ì²­í•œ sessionId ì¿ í‚¤ì˜ ê°’ìœ¼ë¡œ, ì„¸ì…˜ ì €ì¥ì†Œì— ë³´ê´€í•œ ê°’ ì¡°íšŒ
- ì„¸ì…˜ ë§Œë£Œ
  - í´ë¼ì´ì–¸íŠ¸ê°€ ìš”ì²­í•œ sessionId ì¿ í‚¤ì˜ ê°’ìœ¼ë¡œ, ì„¸ì…˜ ì €ì¥ì†Œì— ë³´ê´€í•œ sessionIdì™€ ê°’ ì œê±°
<br/><br/>
### ì„¸ì…˜ ê´€ë¦¬
`main/java/hello/login/web/session/SessionManager`
```java
@Component
public class SessionManager {

    public static final String SESSION_COOKIE_NAME = "mySessionId";
    private Map<String, Object> sessionStore = new ConcurrentHashMap<>();

    /**
     * ì„¸ì…˜ ì„¤ì •
     */
    public void createSession(Object value, HttpServletResponse response) {

        //ì„¸ì…˜ idë¥¼ ìƒì„±í•˜ê³ , ê°’ì„ ì„¸ì…˜ì— ì €ì¥
        String sessionId = UUID.randomUUID().toString();
        sessionStore.put(sessionId, value);

        //ì¿ í‚¤ ìƒì„±
        Cookie mySessionCookie = new Cookie(SESSION_COOKIE_NAME, sessionId);
        response.addCookie(mySessionCookie);
    }

    /**
     * ì„¸ì…˜ ì¡°íšŒ
     */
    public Object getSession(HttpServletRequest request) {
        Cookie sessionCookie = findCookie(request, SESSION_COOKIE_NAME);
        if (sessionCookie == null) {
            return null;
        }
        return sessionStore.get(sessionCookie.getValue());
    }

    /**
     * ì„¸ì…˜ ë§Œë£Œ
     */
    public void expire(HttpServletRequest request) {
        Cookie sessionCookie = findCookie(request, SESSION_COOKIE_NAME);
        if (sessionCookie != null) {
            sessionStore.remove(sessionCookie.getValue());
        }
    }

    public Cookie findCookie(HttpServletRequest request, String cookieName) {
        if (request.getCookies() == null) {
            return null;
        }
        return Arrays.stream(request.getCookies())
                .filter(cookie -> cookie.getName().equals(cookieName))
                .findAny()
                .orElse(null);
    }
}
```
`@Component`: ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ìë™ ë“±ë¡í•œë‹¤.<br/>
`ConcurrentHashMap`: `HashMap` ëŒ€ì‹  ë™ì‹œ ìš”ì²­ì— ì•ˆì „í•œ `ConcurrentHashMap`ë¥¼ ì‚¬ìš©í–ˆë‹¤.<br/><br/>
# ğŸ” ë¡œê·¸ì¸ ì²˜ë¦¬í•˜ê¸° - ì§ì ‘ ë§Œë“  ì„¸ì…˜ ì ìš©
ì§€ê¸ˆê¹Œì§€ ê°œë°œí•œ ì„¸ì…˜ ê´€ë¦¬ ê¸°ëŠ¥ì„ ì‹¤ì œ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì ìš©í•œë‹¤.<br/><br/>
`main/java/hello/login/web/login/LoginController`
```java
@Slf4j
@Controller
@RequiredArgsConstructor
public class LoginController {

    private final LoginService loginService;
    private final SessionManager sessionManager;

    ...

    @PostMapping("/login")
    public String loginV2(@Validated @ModelAttribute LoginForm form, BindingResult bindingResult, HttpServletResponse response) {
        if (bindingResult.hasErrors()) {
            return "login/loginForm";
        }

        Member loginMember = loginService.login(form.getLoginId(), form.getPassword());

        if (loginMember == null) {
            bindingResult.reject("loginFail", "ì•„ì´ë”” ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ë§ì§€ ì•ŠìŠµë‹ˆë‹¤.");
            return "login/loginForm";
        }

        //ë¡œê·¸ì¸ ì„±ê³µ ì²˜ë¦¬

        //ì„¸ì…˜ ê´€ë¦¬ìë¥¼ í†µí•´ ì„¸ì…˜ì„ ìƒì„±í•˜ê³ , íšŒì› ë°ì´í„° ë³´ê´€
        sessionManager.createSession(loginMember, response);

        return "redirect:/";
    }

    @PostMapping("/logout")
    public String logoutV2(HttpServletRequest request) {
        sessionManager.expire(request);
        return "redirect:/";
    }
}
```
ë¡œê·¸ì¸ ì„±ê³µ ì‹œ ì„¸ì…˜ì„ ë“±ë¡í•œë‹¤. ì„¸ì…˜ì— `loginMember`ë¥¼ ì €ì¥í•´ë‘ê³ , ì¿ í‚¤ë„ í•¨ê»˜ ë°œí–‰í•œë‹¤.<br/>
ë¡œê·¸ ì•„ì›ƒ ì‹œ í•´ë‹¹ ì„¸ì…˜ì˜ ì •ë³´ë¥¼ ì œê±°í•œë‹¤.<br/><br/>
`main/java/hello/login/web/HomeController`
```java
@Slf4j
@Controller
@RequiredArgsConstructor
public class HomeController {

    private final MemberRepository memberRepository;
    private final SessionManager sessionManager;

    ...

    @GetMapping("/")
    public String homeLoginV2(HttpServletRequest request, Model model) {

        //ì„¸ì…˜ ê´€ë¦¬ìì˜ ì €ì¥ëœ íšŒì› ì •ë³´ ì¡°íšŒ
        Member member = (Member)sessionManager.getSession(request);

        //ë¡œê·¸ì¸
        if (member == null) {
            return "home";
        }

        model.addAttribute("member", member);
        return "loginHome";
    }
}
```
ì„¸ì…˜ ê´€ë¦¬ìì—ì„œ ì €ì¥ëœ íšŒì› ì •ë³´ë¥¼ ì¡°íšŒí•œë‹¤. ë§Œì•½ íšŒì› ì •ë³´ê°€ ì—†ìœ¼ë©´, ì¿ í‚¤ë‚˜ ì„¸ì…˜ì´ ì—†ëŠ” ê²ƒì´ë¯€ë¡œ ë¡œê·¸ì¸ ë˜ì§€ ì•Šì€ ê²ƒìœ¼ë¡œ ì²˜ë¦¬í•œë‹¤.<br/><br/>
# ğŸ” ë¡œê·¸ì¸ ì²˜ë¦¬í•˜ê¸° - ì„œë¸”ë¦¿ HTTP ì„¸ì…˜1
`main/java/hello/login/web/login/LoginController`
```java
    ...

    @PostMapping("/login")
    public String loginV3(@Validated @ModelAttribute LoginForm form, BindingResult bindingResult, HttpServletRequest request) {
        if (bindingResult.hasErrors()) {
            return "login/loginForm";
        }

        Member loginMember = loginService.login(form.getLoginId(), form.getPassword());

        if (loginMember == null) {
            bindingResult.reject("loginFail", "ì•„ì´ë”” ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ë§ì§€ ì•ŠìŠµë‹ˆë‹¤.");
            return "login/loginForm";
        }

        //ë¡œê·¸ì¸ ì„±ê³µ ì²˜ë¦¬
        //ì„¸ì…˜ì´ ìˆìœ¼ë©´ ìˆëŠ” ì„¸ì…˜ ë°˜í™˜, ì—†ìœ¼ë©´ ì‹ ê·œ ì„¸ì…˜ ìƒì„±
        HttpSession session = request.getSession();
        //ì„¸ì…˜ì— ë¡œê·¸ì¸ íšŒì› ì •ë³´ ë³´ê´€
        session.setAttribute(SessionConst.LOGIN_MEMBER, loginMember);
        return "redirect:/";
    }

    @PostMapping("/logout")
    public String logoutV3(HttpServletRequest request) {
        HttpSession session = request.getSession(false);
        if (session != null) {
            session.invalidate();
        }
        return "redirect:/";
    }
```
#### ì„¸ì…˜ ìƒì„±ê³¼ ì¡°íšŒ
ì„¸ì…˜ì„ ìƒì„±í•˜ë ¤ë©´ `request.getSession(true)`ë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤.
- `request.getSession(true)`
  - ì„¸ì…˜ì´ ìˆìœ¼ë©´ ê¸°ì¡´ ì„¸ì…˜ì„ ë°˜í™˜í•œë‹¤.
  - ì„¸ì…˜ì´ ì—†ìœ¼ë©´ ìƒˆë¡œìš´ ì„¸ì…˜ì„ ìƒì„±í•´ì„œ ë°˜í™˜í•œë‹¤.
  - ê¸°ë³¸ê°’ì€ `true`ì´ë‹¤.
- `request.getSession(false)`
  - ì„¸ì…˜ì´ ìˆìœ¼ë©´ ê¸°ì¡´ ì„¸ì…˜ì„ ë°˜í™˜í•œë‹¤.
  - ì„¸ì…˜ì´ ì—†ìœ¼ë©´ ìƒˆë¡œìš´ ì„¸ì…˜ì„ ìƒì„±í•˜ì§€ ì•ŠëŠ”ë‹¤. `null`ì„ ë°˜í™˜í•œë‹¤.
<br/><br/>
#### ì„¸ì…˜ì— ë¡œê·¸ì¸ íšŒì› ì •ë³´ ë³´ê´€
`session.setAttribute(SessionConst.LOGIN_MEMBER, loginMember);`<br/>
ì„¸ì…˜ì— ë°ì´í„°ë¥¼ ë³´ê´€í•˜ëŠ” ë°©ë²•ì€ `request.setAttribute(..)`ì™€ ë¹„ìŠ·í•˜ë‹¤. í•˜ë‚˜ì˜ ì„¸ì…˜ì— ì—¬ëŸ¬ ê°’ì„ ì €ì¥í•  ìˆ˜ ìˆë‹¤.<br/><br/>
#### ì„¸ì…˜ ì œê±°
`session.invalidate()`: ì„¸ì…˜ì„ ì œê±°í•œë‹¤.<br/><br/>
`main/java/hello/login/web/HomeController`
```java
    ...

    @GetMapping("/")
    public String homeLoginV3(HttpServletRequest request, Model model) {

        //ì„¸ì…˜ì´ ì—†ìœ¼ë©´ home
        HttpSession session = request.getSession(false);
        if (session == null) {
            return "home";
        }

        Member loginMember = (Member)session.getAttribute(SessionConst.LOGIN_MEMBER);

        //ì„¸ì…˜ì— íšŒì› ë°ì´í„°ê°€ ì—†ìœ¼ë©´ home
        if (loginMember == null) {
            return "home";
        }

        //ì„¸ì…˜ì´ ìœ ì§€ë˜ë©´ ë¡œê·¸ì¸ìœ¼ë¡œ ì´ë™
        model.addAttribute("member", loginMember);
        return "loginHome";
    }
}
```
`request.getSession(false)`: ì„¸ì…˜ì„ ì°¾ì•„ì„œ ì‚¬ìš©í•˜ëŠ” ì‹œì ì—ëŠ” `create: false` ì˜µì…˜ì„ ì‚¬ìš©í•´ì„œ ì„¸ì…˜ì„ ìƒì„±í•˜ì§€ ì•Šì•„ì•¼ í•œë‹¤.<br/>
`session.getAttribute(SessionConst.LOGIN_MEMBER)`: ë¡œê·¸ì¸ ì‹œì ì— ì„¸ì…˜ì— ë³´ê´€í•œ íšŒì› ê°ì²´ë¥¼ ì°¾ëŠ”ë‹¤.<br/><br/>
**ì‹¤í–‰**<br/>
![image](https://github.com/jang9205/spring_study/assets/123082616/a0ab2185-6ca7-4f8f-90cb-1030907b7b18)<br/><br/>
# ğŸ” ë¡œê·¸ì¸ ì²˜ë¦¬í•˜ê¸° - ì„œë¸”ë¦¿ HTTP ì„¸ì…˜2
`main/java/hello/login/web/HomeController`
```java
    ...

    @GetMapping("/")
    public String homeLoginV3Spring(@SessionAttribute(name = SessionConst.LOGIN_MEMBER, required = false) Member loginMember, Model model) {

        //ì„¸ì…˜ì— íšŒì› ë°ì´í„°ê°€ ì—†ìœ¼ë©´ home
        if (loginMember == null) {
            return "home";
        }

        //ì„¸ì…˜ì´ ìœ ì§€ë˜ë©´ ë¡œê·¸ì¸ìœ¼ë¡œ ì´ë™
        model.addAttribute("member", loginMember);
        return "loginHome";
    }
}
```
#### @SessionAttribute
ì´ë¯¸ ë¡œê·¸ì¸ ëœ ì‚¬ìš©ìë¥¼ ì°¾ì„ ë•ŒëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì‚¬ìš©í•˜ë©´ ëœë‹¤. ì´ ê¸°ëŠ¥ì€ ì„¸ì…˜ì„ ìƒì„±í•˜ì§€ ì•ŠëŠ”ë‹¤.<br/>
`@SessionAttribute(name = "loginMember", required = false) Member loginMember`<br/><br/>
#### TrackingModes
ë¡œê·¸ì¸ì„ ì²˜ìŒ ì‹œë„í•˜ë©´ URLì´ ë‹¤ìŒê³¼ ê°™ì´ `jsessionid`ë¥¼ í¬í•¨í•˜ê³  ìˆëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.<br/><br/>
![image](https://github.com/jang9205/spring_study/assets/123082616/3ccdcc48-8a32-494c-b49c-1264dabedabb)<br/><br/>
ì´ê²ƒì€ ì›¹ ë¸Œë¼ìš°ì €ê°€ ì¿ í‚¤ë¥¼ ì§€ì›í•˜ì§€ ì•Šì„ ë•Œ ì¿ í‚¤ ëŒ€ì‹  URLì„ í†µí•´ì„œ ì„¸ì…˜ì„ ìœ ì§€í•˜ëŠ” ë°©ë²•ì´ë‹¤. ì´ ë°©ë²•ì„ ì‚¬ìš©í•˜ë ¤ë©´ URLì— ì´ ê°’ì„ ê³„ì† í¬í•¨í•´ì„œ ì „ë‹¬í•´ì•¼ í•œë‹¤. íƒ€ì„ë¦¬í”„ ê°™ì€ í…œí”Œë¦¿ì€ ì—”ì§„ì„ í†µí•´ì„œ ë§í¬ë¥¼ ê±¸ë©´ `jsessionid`ë¥¼ URLì— ìë™ìœ¼ë¡œ í¬í•¨í•´ì¤€ë‹¤. ì„œë²„ ì…ì¥ì—ì„œ ì›¹ ë¸Œë¼ìš°ì €ê°€ ì¿ í‚¤ë¥¼ ì§€ì›í•˜ëŠ”ì§€ í•˜ì§€ ì•ŠëŠ”ì§€ ìµœì´ˆì—ëŠ” íŒë‹¨í•˜ì§€ ëª»í•˜ë¯€ë¡œ, ì¿ í‚¤ ê°’ë„ ì „ë‹¬í•˜ê³ , URLì— `jsessionid`ë„ í•¨ê»˜ ì „ë‹¬í•œë‹¤.<br/><br/>
URL ì „ë‹¬ ë°©ì‹ì„ ë„ê³  í•­ìƒ ì¿ í‚¤ë¥¼ í†µí•´ì„œë§Œ ì„¸ì…˜ì„ ìœ ì§€í•˜ê³  ì‹¶ìœ¼ë©´ ë‹¤ìŒ ì˜µì…˜ì„ ë„£ì–´ì£¼ë©´ ëœë‹¤. ì´ë ‡ê²Œ í•˜ë©´ URLì— `jsessionid`ê°€ ë…¸ì¶œë˜ì§€ ì•ŠëŠ”ë‹¤.<br/><br/>
`resources/application.properties`
```properties
server.servlet.session.tracking-modes=cookie
```
<br/><br/>
# ğŸ” ì„¸ì…˜ ì •ë³´ì™€ íƒ€ì„ì•„ì›ƒ ì„¤ì •
### ì„¸ì…˜ ì •ë³´ í™•ì¸
`main/java/hello/login/web/session/SessionInfoController`
```java
@Slf4j
@RestController
public class SessionInfoController {

    @GetMapping("/session-info")
    public String sessionInfo(HttpServletRequest request) {
        HttpSession session = request.getSession(false);
        if (session == null) {
            return "ì„¸ì…˜ì´ ì—†ìŠµë‹ˆë‹¤.";
        }

        //ì„¸ì…˜ ë°ì´í„° ì¶œë ¥
        session.getAttributeNames().asIterator()
                .forEachRemaining(name -> log.info("session name={}, value={}", name, session.getAttribute(name)));

        log.info("sessionId={}", session.getId());
        log.info("getMaxInactiveInterval={}", session.getMaxInactiveInterval());
        log.info("creationTime={}", new Date(session.getCreationTime()));
        log.info("lastAccessedTime={}", new Date(session.getLastAccessedTime()));
        log.info("isNew={}", session.isNew());

        return "ì„¸ì…˜ ì¶œë ¥";
    }
}
```
![image](https://github.com/jang9205/spring_study/assets/123082616/4c98fc20-0edc-4d5e-b156-965621e76856)<br/><br/>
- `sessionId`: ì„¸ì…˜Id, `JSESSIONID`ì˜ ê°’ì´ë‹¤. ì˜ˆ) `34B14F008AA3527C9F8ED620EFD7A4E1`
- `maxInactiveInterval`: ì„¸ì…˜ì˜ ìœ íš¨ ì‹œê°„, ì˜ˆ) 1800ì´ˆ (30ë¶„)
- `creationTime`: ì„¸ì…˜ ìƒì„±ì¼ì‹œ
- `lastAccessedTime`: ì„¸ì…˜ê³¼ ì—°ê²°ëœ ì‚¬ìš©ìê°€ ìµœê·¼ì— ì„œë²„ì— ì ‘ê·¼í•œ ì‹œê°„, í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì„œë²„ë¡œ `sessionId`(`JSESSIONID`)ë¥¼ ìš”ì²­í•œ ê²½ìš°ì— ê°±ì‹ ëœë‹¤.
- `isNew`: ìƒˆë¡œ ìƒì„±ëœ ì„¸ì…˜ì¸ì§€, ì•„ë‹ˆë©´ ì´ë¯¸ ê³¼ê±°ì— ë§Œë“¤ì–´ì¡Œê³ , í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì„œë²„ë¡œ `sessionId`(`JSESSIONID`)ë¥¼ ìš”ì²­í•´ì„œ ì¡°íšŒëœ ì„¸ì…˜ì¸ì§€ ì—¬ë¶€
<br/><br/>
### ì„¸ì…˜ íƒ€ì„ì•„ì›ƒ ì„¤ì •
ì„¸ì…˜ì€ ì‚¬ìš©ìê°€ ë¡œê·¸ì•„ì›ƒì„ ì§ì ‘ í˜¸ì¶œí•´ì„œ `session.invalidate()`ê°€ í˜¸ì¶œ ë˜ëŠ” ê²½ìš°ì— ì‚­ì œëœë‹¤. ê·¸ëŸ°ë° ëŒ€ë¶€ë¶„ì˜ ì‚¬ìš©ìëŠ” ë¡œê·¸ì•„ì›ƒì„ ì„ íƒí•˜ì§€ ì•Šê³ , ê·¸ëƒ¥ ì›¹ ë¸Œë¼ìš°ì €ë¥¼ ì¢…ë£Œí•œë‹¤. ë¬¸ì œëŠ” HTTPê°€ ë¹„ ì—°ê²°ì„±(ConnectionLess)ì´ë¯€ë¡œ ì„œë²„ ì…ì¥ì—ì„œëŠ” í•´ë‹¹ ì‚¬ìš©ìê°€ ì›¹ ë¸Œë¼ìš°ì €ë¥¼ ì¢…ë£Œí•œ ê²ƒì¸ì§€ ì•„ë‹Œì§€ë¥¼ ì¸ì‹í•  ìˆ˜ ì—†ë‹¤. ë”°ë¼ì„œ ì„œë²„ì—ì„œ ì„¸ì…˜ ë°ì´í„°ë¥¼ ì–¸ì œ ì‚­ì œí•´ì•¼ í•˜ëŠ”ì§€ íŒë‹¨í•˜ê¸°ê°€ ì–´ë µë‹¤.<br/><br/>
ë‚¨ì•„ìˆëŠ” ì„¸ì…˜ì„ ë¬´í•œì • ë³´ê´€í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤.
- ì„¸ì…˜ê³¼ ê´€ë ¨ëœ ì¿ í‚¤(`JSESSIONID`)ë¥¼ íƒˆì·¨ ë‹¹í–ˆì„ ê²½ìš° ì˜¤ëœ ì‹œê°„ì´ ì§€ë‚˜ë„ í•´ë‹¹ ì¿ í‚¤ë¡œ ì•…ì˜ì ì¸ ìš”ì²­ì„ í•  ìˆ˜ ìˆë‹¤.
- ì„¸ì…˜ì€ ê¸°ë³¸ì ìœ¼ë¡œ ë©”ëª¨ë¦¬ì— ìƒì„±ëœë‹¤. ë©”ëª¨ë¦¬ì˜ í¬ê¸°ê°€ ë¬´í•œí•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ê¼­ í•„ìš”í•œ ê²½ìš°ë§Œ ìƒì„±í•´ì„œ ì‚¬ìš©í•´ì•¼ í•œë‹¤.
<br/><br/>
#### ì„¸ì…˜ì˜ ì¢…ë£Œ ì‹œì 
ì‚¬ìš©ìê°€ ì„œë²„ì— ìµœê·¼ì— ìš”ì²­í•œ ì‹œê°„ì„ ê¸°ì¤€ìœ¼ë¡œ 30ë¶„ ì •ë„ë¥¼ ìœ ì§€í•´ ì¤€ë‹¤. ì´ë ‡ê²Œ í•˜ë©´ ì‚¬ìš©ìê°€ ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•˜ê³  ìˆìœ¼ë©´, ì„¸ì…˜ì˜ ìƒì¡´ ì‹œê°„ì´ 30ë¶„ìœ¼ë¡œ ê³„ì† ëŠ˜ì–´ë‚˜ê²Œ ëœë‹¤. ë”°ë¼ì„œ 30ë¶„ë§ˆë‹¤ ë¡œê·¸ì¸í•´ì•¼ í•˜ëŠ” ë²ˆê±°ë¡œì›€ì´ ì‚¬ë¼ì§„ë‹¤. `HttpSession`ì€ ì´ ë°©ì‹ì„ ì‚¬ìš©í•œë‹¤.<br/><br/>
#### ì„¸ì…˜ íƒ€ì„ì•„ì›ƒ ì„¤ì •
**ìŠ¤í”„ë§ ë¶€íŠ¸ë¡œ ê¸€ë¡œë²Œ ì„¤ì •**<br/>
`resources/application.properties`
```properties
server.servlet.session.timeout=60  //60ì´ˆ, ê¸°ë³¸ì€ 1800(30ë¶„)
```
<br/><br/>**íŠ¹ì • ì„¸ì…˜ ë‹¨ìœ„ë¡œ ì‹œê°„ ì„¤ì •**
```java
session.setMaxInactiveInterval(1800); //1800ì´ˆ
```
<br/><br/>
#### ì„¸ì…˜ íƒ€ì„ì•„ì›ƒ ë°œìƒ
ì„¸ì…˜ì˜ íƒ€ì„ì•„ì›ƒ ì‹œê°„ì€ í•´ë‹¹ ì„¸ì…˜ê³¼ ê´€ë ¨ëœ `JSESSIONID`ë¥¼ ì „ë‹¬í•˜ëŠ” HTTP ìš”ì²­ì´ ìˆìœ¼ë©´ í˜„ì¬ ì‹œê°„ìœ¼ë¡œ ë‹¤ì‹œ ì´ˆê¸°í™” ëœë‹¤. ì´ë ‡ê²Œ ì´ˆê¸°í™” ë˜ë©´ ì„¸ì…˜ íƒ€ì„ì•„ì›ƒìœ¼ë¡œ ì„¤ì •í•œ ì‹œê°„ë™ì•ˆ ì„¸ì…˜ì„ ì¶”ê°€ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.<br/><br/>
- `session.getLastAccessedTime()`: ìµœê·¼ ì„¸ì…˜ ì ‘ê·¼ ì‹œê°„
- `LastAccessedTime` ì´í›„ë¡œ timeout ì‹œê°„ì´ ì§€ë‚˜ë©´, WASê°€ ë‚´ë¶€ì—ì„œ í•´ë‹¹ ì„¸ì…˜ì„ ì œê±°í•œë‹¤.