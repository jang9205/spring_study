# ğŸ“– ë©”ì‹œì§€, êµ­ì œí™”
<br/><br/>
# ğŸ” í”„ë¡œì íŠ¸ ì„¤ì •
ì´ì „ í”„ë¡œì íŠ¸ë¥¼ ì´ì–´ì„œ ì‚¬ìš©í•˜ì§€ë§Œ **ë©”ì‹œì§€**, **êµ­ì œí™”** ì˜ˆì œì— ì§‘ì¤‘í•˜ê¸° ìœ„í•´ì„œ ë³µì¡í•œ ì²´í¬, ì…€ë ‰íŠ¸ ë°•ìŠ¤ ê´€ë¦¬ ê¸°ëŠ¥ì€ ì œê±°í–ˆë‹¤.<br/><br/>
# ğŸ” ë©”ì‹œì§€, êµ­ì œí™” ì†Œê°œ
### ë©”ì‹œì§€
`ìƒí’ˆëª…`ì´ë¼ëŠ” ë‹¨ì–´ë¥¼ ëª¨ë‘ `ìƒí’ˆì´ë¦„`ìœ¼ë¡œ ê³ ì³ë‹¬ë¼ëŠ” ìš”êµ¬ì‚¬í•­ì´ ìƒê²¼ë‹¤.<br/><br/>
`label`ì— ìˆëŠ” ë‹¨ì–´ë¥¼ ë³€ê²½í•˜ë ¤ë©´ ì—¬ëŸ¬ í™”ë©´ë“¤ì„ ë‹¤ ì°¾ì•„ê°€ë©´ì„œ ëª¨ë‘ ë³€ê²½í•´ì•¼ í•œë‹¤.<br/>
ì§€ê¸ˆì²˜ëŸ¼ í™”ë©´ ìˆ˜ê°€ ì ìœ¼ë©´ ë¬¸ì œê°€ ë˜ì§€ ì•Šì§€ë§Œ í™”ë©´ì´ ìˆ˜ì‹­ê°œ ì´ìƒì´ë¼ë©´ ìˆ˜ì‹­ê°œì˜ íŒŒì¼ì„ ëª¨ë‘ ê³ ì³ì•¼ í•œë‹¤.<br/><br/>
ì™œëƒí•˜ë©´ í•´ë‹¹ HTML íŒŒì¼ì— ë©”ì‹œì§€ê°€ í•˜ë“œì½”ë”© ë˜ì–´ ìˆê¸° ë•Œë¬¸ì´ë‹¤.<br/>
ì´ëŸ° ë‹¤ì–‘í•œ ë©”ì‹œì§€ë¥¼ í•œ ê³³ì—ì„œ ê´€ë¦¬í•˜ë„ë¡ í•˜ëŠ” ê¸°ëŠ¥ì„ **ë©”ì‹œì§€** ê¸°ëŠ¥ì´ë¼ í•œë‹¤.<br/><br/>
ì˜ˆë¥¼ ë“¤ì–´ì„œ `messages.properties`ë¼ëŠ” **ë©”ì‹œì§€ ê´€ë¦¬ìš© íŒŒì¼**ì„ ë§Œë“¤ê³ 
```properties
item=ìƒí’ˆ
item.id=ìƒí’ˆ ID
item.itemName=ìƒí’ˆëª…
item.price=ê°€ê²©
item.quantity=ìˆ˜ëŸ‰
```
ê° HTMLë“¤ì€ ë‹¤ìŒê³¼ ê°™ì´ í•´ë‹¹ ë°ì´í„°ë¥¼ key ê°’ìœ¼ë¡œ ë¶ˆëŸ¬ì„œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ë‹¤.<br/><br/>
**addForm.html**<br/>
`<label for="itemName" th:text="#{item.itemName}"></label>`<br/><br/>
### êµ­ì œí™”
ë©”ì‹œì§€ì—ì„œ ì„¤ëª…í•œ ë©”ì‹œì§€ íŒŒì¼(`messages.properties`)ì„ ê° ë‚˜ë¼ë³„ë¡œ ë³„ë„ë¡œ ê´€ë¦¬í•˜ë©´ ì„œë¹„ìŠ¤ë¥¼ **êµ­ì œí™”**í•  ìˆ˜ ìˆë‹¤.<br/><br/>
ì˜ˆë¥¼ ë“¤ì–´ì„œ ë‹¤ìŒê³¼ ê°™ì´ 2ê°œì˜ íŒŒì¼ì„ ë§Œë“¤ì–´ì„œ ë¶„ë¥˜í•œë‹¤.<br/><br/>
`messages_en.properties`
```properties
item=Item
item.id=Item ID
item.itemName=Item Name
item.price=price
item.quantity=quantity
```
`messages_ko.properties`
```properties
item=ìƒí’ˆ
item.id=ìƒí’ˆ ID
item.itemName=ìƒí’ˆëª…
item.price=ê°€ê²©
item.quantity=ìˆ˜ëŸ‰
```
ì˜ì–´ë¥¼ ì‚¬ìš©í•˜ëŠ” ì‚¬ëŒì´ë©´ `messages_en.properties`ë¥¼ ì‚¬ìš©í•˜ê³ ,<br/>
í•œêµ­ì–´ë¥¼ ì‚¬ìš©í•˜ëŠ” ì‚¬ëŒì´ë©´ `messages_ko.properties`ë¥¼ ì‚¬ìš©í•˜ê²Œ ê°œë°œí•˜ë©´ ëœë‹¤.<br/><br/>
í•œêµ­ì—ì„œ ì ‘ê·¼í•œ ê²ƒì¸ì§€ ì˜ì–´ì—ì„œ ì ‘ê·¼í•œ ê²ƒì¸ì§€ëŠ” ì¸ì‹í•˜ëŠ” ë°©ë²•ì€ HTTP `accept-language` í•´ë” ê°’ì„ ì‚¬ìš©í•˜ê±°ë‚˜<br/>
ì‚¬ìš©ìê°€ ì§ì ‘ ì–¸ì–´ë¥¼ ì„ íƒí•˜ë„ë¡ í•˜ê³ , ì¿ í‚¤ ë“±ì„ ì‚¬ìš©í•´ì„œ ì²˜ë¦¬í•˜ë©´ ëœë‹¤.<br/><br/>
ë©”ì‹œì§€ì™€ êµ­ì œí™” ê¸°ëŠ¥ì„ ì§ì ‘ êµ¬í˜„í•  ìˆ˜ë„ ìˆê² ì§€ë§Œ, ìŠ¤í”„ë§ì€ ê¸°ë³¸ì ì¸ ë©”ì‹œì§€ì™€ êµ­ì œí™” ê¸°ëŠ¥ì„ ëª¨ë‘ ì œê³µí•œë‹¤.<br/>
ê·¸ë¦¬ê³  íƒ€ì„ë¦¬í”„ë„ ìŠ¤í”„ë§ì´ ì œê³µí•˜ëŠ” ë©”ì‹œì§€ì™€ êµ­ì œí™” ê¸°ëŠ¥ì„ í¸ë¦¬í•˜ê²Œ í†µí•©í•´ì„œ ì œê³µí•œë‹¤.<br/><br/>
# ğŸ” ìŠ¤í”„ë§ ë©”ì‹œì§€ ì†ŒìŠ¤ ì„¤ì •
### ì§ì ‘ ë“±ë¡
ë©”ì‹œì§€ ê´€ë¦¬ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë ¤ë©´ ìŠ¤í”„ë§ì´ ì œê³µí•˜ëŠ” `MessageSource`ë¥¼ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ë©´ ë˜ëŠ”ë°, `MessageSource`ëŠ” ì¸í„°í˜ì´ìŠ¤ì´ë‹¤.<br/>
ë”°ë¼ì„œ êµ¬í˜„ì²´ì¸ `ResourceBundleMessageSource`ë¥¼ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ë©´ ëœë‹¤.<br/><br/>
`main/java/hello/itemservice/ItemServiceApplication`
```java
@Bean
public MessageSource messageSource() {
  ResourceBundleMessageSource messageSource = new ResourceBundleMessageSource();
  messageSource.setBasenames("messages", "errors");
  messageSource.setDefaultEncoding("utf-8");
  return messageSource;
}
```
- `basenames`: ì„¤ì • íŒŒì¼ì˜ ì´ë¦„ì„ ì§€ì •í•œë‹¤.
  - `messages`ë¡œ ì§€ì •í•˜ë©´ `messages.properties` íŒŒì¼ì„ ì½ì–´ì„œ ì‚¬ìš©í•œë‹¤.
  - ì¶”ê°€ë¡œ êµ­ì œí™” ê¸°ëŠ¥ì„ ì ìš©í•˜ë ¤ë©´ `messages_en.properties`, `messages_ko.properties`ì™€ ê°™ì´ íŒŒì¼ëª… ë§ˆì§€ë§‰ì— ì–¸ì–´ ì •ë³´ë¥¼ ì£¼ë©´ëœë‹¤.
  - ì°¾ì„ ìˆ˜ ìˆëŠ” êµ­ì œí™” íŒŒì¼ì´ ì—†ìœ¼ë©´ `messages.properties`(ì–¸ì–´ì •ë³´ê°€ ì—†ëŠ” íŒŒì¼ëª…)ë¥¼ ê¸°ë³¸ìœ¼ë¡œ ì‚¬ìš©í•œë‹¤.
  - íŒŒì¼ì˜ ìœ„ì¹˜ëŠ” `/resources/messages.properties`ì— ë‘ë©´ ëœë‹¤.
  - ì—¬ëŸ¬ íŒŒì¼ì„ í•œë²ˆì— ì§€ì •í•  ìˆ˜ ìˆë‹¤. ì—¬ê¸°ì„œëŠ” `messages`, `errors` ë‘˜ì„ ì§€ì •í–ˆë‹¤.
- `defaultEncoding`: ì¸ì½”ë”© ì •ë³´ë¥¼ ì§€ì •í•œë‹¤. `utf-8`ì„ ì‚¬ìš©í•˜ë©´ ëœë‹¤.
<br/><br/>
### ìŠ¤í”„ë§ ë¶€íŠ¸
ìŠ¤í”„ë§ ë¶€íŠ¸ë¥¼ ì‚¬ìš©í•˜ë©´ ìŠ¤í”„ë§ ë¶€íŠ¸ê°€ `MessageSource`ë¥¼ ìë™ìœ¼ë¡œ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡í•œë‹¤.<br/><br/>
**ìŠ¤í”„ë§ ë¶€íŠ¸ ë©”ì‹œì§€ ì†ŒìŠ¤ ì„¤ì •**<br/>
ìŠ¤í”„ë§ ë¶€íŠ¸ë¥¼ ì‚¬ìš©í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ ë©”ì‹œì§€ ì†ŒìŠ¤ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.<br/><br/>
`resources/application.properties`
```properties
spring.messages.basename=messages,config.i18n.messages
```
<br/><br/>**ìŠ¤í”„ë§ ë¶€íŠ¸ ë©”ì‹œì§€ ì†ŒìŠ¤ ê¸°ë³¸ ê°’**
```properties
spring.messages.basename=messages
```
`MessageSource`ë¥¼ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ì§€ ì•Šê³ , ìŠ¤í”„ë§ ë¶€íŠ¸ì™€ ê´€ë ¨ëœ ë³„ë„ì˜ ì„¤ì •ì„ í•˜ì§€ ì•Šìœ¼ë©´ `messages`ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ê¸°ë³¸ ë“±ë¡ëœë‹¤.<br/>
ë”°ë¼ì„œ `messages_en.properties`, `messages_ko.properties`, `messages.properties` íŒŒì¼ë§Œ ë“±ë¡í•˜ë©´ ìë™ìœ¼ë¡œ ì¸ì‹ëœë‹¤.<br/><br/>
### ë©”ì‹œì§€ íŒŒì¼ ë§Œë“¤ê¸°
`messages.properties`: ê¸°ë³¸ ê°’ìœ¼ë¡œ ì‚¬ìš©(í•œê¸€)<br/>
`messages_en.properties`: ì˜ì–´ êµ­ì œí™” ì‚¬ìš©<br/><br/>
`resources/messages.properties`
```properties
hello=ì•ˆë…•
hello.name=ì•ˆë…• {0}
```
`resources/messages_en.properties`
```properties
hello=hello
hello.name=hello {0}
```
<br/><br/>
# ğŸ” ìŠ¤í”„ë§ ë©”ì‹œì§€ ì†ŒìŠ¤ ì‚¬ìš©
ìŠ¤í”„ë§ì´ ì œê³µí•˜ëŠ” ë©”ì‹œì§€ ì†ŒìŠ¤ë¥¼ ì–´ë–»ê²Œ ì‚¬ìš©í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ í†µí•´ì„œ ì•Œì•„ë³¸ë‹¤.<br/><br/>
`test/java/hello/itemservice/message/MessageSourceTest`
```java
@SpringBootTest
public class MessageSourceTest {

    @Autowired
    MessageSource ms;

    @Test
    void helloMessage() {
        String result = ms.getMessage("hello", null, null);
        assertThat(result).isEqualTo("ì•ˆë…•");
    }
```
ms.getMessage("hello", null, null)
- code: hello
- args: null
- locale: null
#### 
Locale ì •ë³´ê°€ ì—†ëŠ” ê²½ìš° `Locale.getDefault()`ì„ í˜¸ì¶œí•´ì„œ ì‹œìŠ¤í…œì˜ ê¸°ë³¸ ë¡œì¼€ì¼ì„ ì‚¬ìš©í•œë‹¤.<br/>
ì˜ˆ) `locale = null`ì¸ ê²½ìš° ì‹œìŠ¤í…œ ê¸°ë³¸ localeì´ `ko_KR`ì´ë¯€ë¡œ `messages_ko.properties` ì¡°íšŒ ì‹œë„ -> ì¡°íšŒ ì‹¤íŒ¨ -> `messages.properties` ì¡°íšŒ<br/><br/>
**ë©”ì‹œì§€ê°€ ì—†ëŠ” ê²½ìš°, ê¸°ë³¸ ë©”ì‹œì§€**
```java
    @Test
    void notFoundMessageCode() {
        assertThatThrownBy(() -> ms.getMessage("no_code", null, null))
                .isInstanceOf(NoSuchMessageException.class);
    }

    @Test
    void notFoundMessageCodeDefaultMessage() {
        String result = ms.getMessage("no_code", null, "ê¸°ë³¸ ë©”ì‹œì§€", null);
        assertThat(result).isEqualTo("ê¸°ë³¸ ë©”ì‹œì§€");
    }
```
ë©”ì‹œì§€ê°€ ì—†ëŠ” ê²½ìš°ì—ëŠ” `NoSuchMessageException`ì´ ë°œìƒí•œë‹¤.<br/>
ë©”ì‹œì§€ê°€ ì—†ì–´ë„ ê¸°ë³¸ ë©”ì‹œì§€(`defaultMessage`)ë¥¼ ì‚¬ìš©í•˜ë©´ ê¸°ë³¸ ë©”ì‹œì§€ê°€ ë°˜í™˜ëœë‹¤.<br/><br/>
**ë§¤ê°œë³€ìˆ˜ ì‚¬ìš©**
```java
    @Test
    void argumentMessage() {
        String message = ms.getMessage("hello.name", new Object[]{"Spring"}, null);
        assertThat(message).isEqualTo("ì•ˆë…• Spring");
    }
```
ë©”ì‹œì§€ì˜ {0} ë¶€ë¶„ì€ ë§¤ê°œë³€ìˆ˜ë¥¼ ì „ë‹¬í•´ì„œ ì¹˜í™˜í•  ìˆ˜ ìˆë‹¤.<br/>
`hello.name=ì•ˆë…• {0}` -> Spring ë‹¨ì–´ë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ì „ë‹¬ -> `ì•ˆë…• Spring`<br/><br/>
**êµ­ì œí™” íŒŒì¼ ì„ íƒ**
```java
    @Test
    void defaultLang() {
        assertThat(ms.getMessage("hello", null, null)).isEqualTo("ì•ˆë…•");
        assertThat(ms.getMessage("hello", null, Locale.KOREA)).isEqualTo("ì•ˆë…•");
    }

    @Test
    void enLang() {
        assertThat(ms.getMessage("hello", null, Locale.ENGLISH)).isEqualTo("hello");
    }
```
`ms.getMessage("hello", null, null)`: ì‹œìŠ¤í…œ ê¸°ë³¸ localeì´ `ko_KR`ì´ë¯€ë¡œ `messages_ko.properties` ì¡°íšŒ ì‹œë„<br/> -> ì¡°íšŒ ì‹¤íŒ¨ -> `messages.properties` ì¡°íšŒ<br/>
`ms.getMessage("hello", null, Locale.KOREA)`: locale ì •ë³´ê°€ ìˆì§€ë§Œ, `message_ko`ê°€ ì—†ìœ¼ë¯€ë¡œ `messages`ë¥¼ ì‚¬ìš©<br/>
`ms.getMessage("hello", null, Locale.ENGLISH)`: locale ì •ë³´ê°€ `Locale.ENGLISH` ì´ë¯€ë¡œ `messages_en`ì„ ì°¾ì•„ì„œ ì‚¬ìš©<br/><br/>
# ğŸ” ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ë©”ì‹œì§€ ì ìš©í•˜ê¸°
ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ë„£ì„ ë©”ì‹œì§€ë¥¼ ì¶”ê°€í•œë‹¤.<br/><br/>
`resources/messages.properties`
```properties
label.item=ìƒí’ˆ
label.item.id=ìƒí’ˆ ID
label.item.itemName=ìƒí’ˆëª…
label.item.price=ê°€ê²©
label.item.quantity=ìˆ˜ëŸ‰

page.items=ìƒí’ˆ ëª©ë¡
page.item=ìƒí’ˆ ìƒì„¸
page.addItem=ìƒí’ˆ ë“±ë¡
page.updateItem=ìƒí’ˆ ìˆ˜ì •

button.save=ì €ì¥
button.cancel=ì·¨ì†Œ
```
### íƒ€ì„ë¦¬í”„ ë©”ì‹œì§€ ì ìš©
íƒ€ì„ë¦¬í”„ì˜ ë©”ì‹œì§€ í‘œí˜„ì‹ `#{...}`ë¥¼ ì‚¬ìš©í•˜ë©´ ìŠ¤í”„ë§ì˜ ë©”ì‹œì§€ë¥¼ í¸ë¦¬í•˜ê²Œ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤.<br/>
ì˜ˆë¥¼ ë“¤ì–´ì„œ ë°©ê¸ˆ ë“±ë¡í•œ ìƒí’ˆì´ë¼ëŠ” ì´ë¦„ì„ ì¡°íšŒí•˜ë ¤ë©´ `#{label.item}`ì´ë¼ê³  í•˜ë©´ ëœë‹¤.<br/><br/>
**ë Œë”ë§ ì „**
```html
<div th:text="#{label.item}"></h2>
```
**ë Œë”ë§ í›„**
```html
<div>ìƒí’ˆ</h2>
```
<br/><br/>
ì•„ë˜ì²˜ëŸ¼ íƒ€ì„ë¦¬í”„ í…œí”Œë¦¿ íŒŒì¼ì— ë©”ì‹œì§€ë¥¼ ì ìš©í•´ë³´ì.<br/><br/>
**í˜ì´ì§€ ì´ë¦„ì— ì ìš©**<br/>
`<h2 th:text="#{page.addItem}">ìƒí’ˆ ë“±ë¡</h2>`<br/><br/>
**ë ˆì´ë¸”ì— ì ìš©**<br/>
`<label for="itemName" th:text="#{label.item.itemName}">ìƒí’ˆëª…</label>`<br/>
`<label for="price" th:text="#{label.item.price}">ê°€ê²©</label>`<br/><br/>
**ë²„íŠ¼ì— ì ìš©**<br/>
`<button type="submit" th:text="#{button.save}">ì €ì¥</button>`<br/>
`<button type="button" th:text="#{button.cancel}">ì·¨ì†Œ</button>`<br/><br/>
# ğŸ” ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì— êµ­ì œí™” ì ìš©í•˜ê¸°
ì˜ì–´ ë©”ì‹œì§€ë¥¼ ì¶”ê°€í•œë‹¤.<br/><br/>
`resources/messages_en.properties`
```properties
label.item=Item
label.item.id=Item ID
label.item.itemName=Item Name
label.item.price=price
label.item.quantity=quantity

page.items=Item List
page.item=Item Detail
page.addItem=Item Add
page.updateItem=Item Update

button.save=Save
button.cancel=Cancel
```
<br/><br/>ì›¹ ë¸Œë¼ìš°ì €ì˜ ì–¸ì–´ ì„¤ì •ê°’ì„ ë³€ê²½í•˜ë©´ êµ­ì œí™” ì ìš©ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.<br/>
ì›¹ ë¸Œë¼ìš°ì €ì˜ ì–¸ì–´ ì„¤ì •ê°’ì„ ë³€ê²½í•˜ë©´ ìš”ì²­ ì‹œ `Accept-Language`ì˜ ê°’ì´ ë³€ê²½ëœë‹¤.<br/><br/>
![image](https://github.com/jang9205/spring_study/assets/123082616/a31175a4-26a1-4ec6-afcd-4d3911b3c29e)<br/><br/>
![image](https://github.com/jang9205/spring_study/assets/123082616/4d01b758-f4a4-4178-9283-d2f6aa0d9193)<br/><br/>
### ìŠ¤í”„ë§ì˜ êµ­ì œí™” ë©”ì‹œì§€ ì„ íƒ
ìŠ¤í”„ë§ì€ ì–¸ì–´ ì„ íƒ ì‹œ ê¸°ë³¸ìœ¼ë¡œ `Accept-Language` í—¤ë”ì˜ ê°’ì„ ì‚¬ìš©í•œë‹¤.<br/><br/>
**LocaleResolver**<br/>
ìŠ¤í”„ë§ì€ `Locale` ì„ íƒ ë°©ì‹ì„ ë³€ê²½í•  ìˆ˜ ìˆë„ë¡ `LocaleResolver`ë¼ëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ ì œê³µí•˜ëŠ”ë°,<br/>
ìŠ¤í”„ë§ ë¶€íŠ¸ëŠ” ê¸°ë³¸ìœ¼ë¡œ `Accept-Language`ë¥¼ í™œìš©í•˜ëŠ” `AcceptHeaderLocaleResolver`ë¥¼ ì‚¬ìš©í•œë‹¤.<br/><br/>
**LocaleResolver ë³€ê²½**<br/>
ë§Œì•½ `Locale` ì„ íƒ ë°©ì‹ì„ ë³€ê²½í•˜ë ¤ë©´ `LocaleResolver`ì˜ êµ¬í˜„ì²´ë¥¼ ë³€ê²½í•´ì„œ ì¿ í‚¤ë‚˜ ì„¸ì…˜ ê¸°ë°˜ì˜ `Locale` ì„ íƒ ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.<br/>
ì˜ˆë¥¼ ë“¤ì–´ì„œ ê³ ê°ì´ ì§ì ‘ `Locale`ì„ ì„ íƒí•˜ë„ë¡ í•˜ëŠ” ê²ƒì´ë‹¤.