# ğŸ“– ìŠ¤í”„ë§ MVC - ê¸°ë³¸ ê¸°ëŠ¥
<br/><br/>
# ğŸ” í”„ë¡œì íŠ¸ ìƒì„±
[ìŠ¤í”„ë§ ë¶€íŠ¸ ìŠ¤íƒ€í„°](https://start.spring.io/)ì—ì„œ ìŠ¤í”„ë§ í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•œë‹¤.<br/><br/>
![image](https://github.com/jang9205/spring_study/assets/123082616/fee30ee0-0242-4377-a003-9825def95845)<br/><br/>
JarëŠ” í•­ìƒ ë‚´ì¥ì„œë²„(í†°ìº£)ë¥¼ ì‚¬ìš©í•˜ê³  webapp ê²½ë¡œë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤. ë‚´ì¥ ì„œë²„ ì‚¬ìš©ì— ìµœì í™” ë˜ì–´ ìˆë‹¤.<br/><br/>
ìŠ¤í”„ë§ ë¶€íŠ¸ì— Jarë¥¼ ì‚¬ìš©í•˜ë©´ /resources/static/ì— index.htmlì„ ë‘ë©´ Welcome í˜ì´ì§€ë¡œ ì²˜ë¦¬í•´ì¤€ë‹¤.<br/><br/>
# ğŸ” ë¡œê¹… ê°„ë‹¨íˆ ì•Œì•„ë³´ê¸°
ìŠ¤í”„ë§ ë¶€íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ë©´ ìŠ¤í”„ë§ ë¶€íŠ¸ ë¡œê¹… ë¼ì´ë¸ŒëŸ¬ë¦¬(spring-boot-starter-logging)ê°€ í•¨ê»˜ í¬í•¨ëœë‹¤.<br/>
ìŠ¤í”„ë§ ë¶€íŠ¸ ë¡œê¹… ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ SLF4J ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ Logbackì„ ì‚¬ìš©í•œë‹¤.<br/><br/>
`src/main/java/hello/springmvc/basic/LogTestController`
```java
//@Slf4j
@RestController
public class LogTestController {
    private final Logger log = LoggerFactory.getLogger(getClass()); //ë¡œê·¸ ì„ ì–¸

    @RequestMapping("/log-test")
    public String logTest() {
        String name = "Spring";

        System.out.println("name = " + name);

        log.trace("info log={}", name); //ë¡œê·¸ í˜¸ì¶œ
        log.debug("debug log={}", name);
        log.info(" info log={}", name);
        log.warn(" warn log={}", name);
        log.error("error log={}", name);

        //ë¡œê·¸ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì•„ë„ a+b ê³„ì‚° ë¡œì§ì´ ë¨¼ì € ì‹¤í–‰ë¨, ì´ëŸ° ë°©ì‹ìœ¼ë¡œ ì‚¬ìš©í•˜ë©´ X
//        log.debug("String concat log=" + name);
        
        return "ok";
    }
}
```
ì‹¤í–‰: http://localhost:8080/log-test<br/><br/>
- ë§¤í•‘ ì •ë³´
  - **@Controller**ëŠ” ë°˜í™˜ ê°’ì´ Stringì´ë©´ ë·° ì´ë¦„ìœ¼ë¡œ ì¸ì‹ëœë‹¤. ê·¸ë˜ì„œ ë·°ë¥¼ ì°¾ê³  ë·°ê°€ ëœë”ë§ ëœë‹¤.
  - **@RestController**ëŠ” ë°˜í™˜ ê°’ìœ¼ë¡œ ë·°ë¥¼ ì°¾ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, HTTP ë©”ì‹œì§€ ë°”ë””ì— ë°”ë¡œ ì…ë ¥í•œë‹¤.
- ë¡œê·¸
  - ë¡œê·¸ ì¶œë ¥ í¬ë©§
    - ì‹œê°„, ë¡œê·¸ ë ˆë²¨, í”„ë¡œì„¸ìŠ¤ ID, ì“°ë ˆë“œ ëª…, í´ë˜ìŠ¤ëª…, ë¡œê·¸ ë©”ì‹œì§€
  - ë¡œê·¸ ë ˆë²¨
    - **TRACE** > **DEBUG** > **INFO** > **WARN** > **ERROR**
    - ë³´í†µ ê°œë°œ ì„œë²„ëŠ” debug ì¶œë ¥, ìš´ì˜ ì„œë²„ëŠ” info ì¶œë ¥
<br/><br/>
### ë¡œê·¸ ë ˆë²¨ ì„¤ì •
`src/main/resources/application.properties`
```properties
#ì „ì²´ ë¡œê·¸ ë ˆë²¨ ì„¤ì •(ê¸°ë³¸ info)
logging.level.root=info
#hello.springmvc íŒ¨í‚¤ì§€ì™€ ê·¸ í•˜ìœ„ ë¡œê·¸ ë ˆë²¨ ì„¤ì •
logging.level.hello.springmvc=debug
```
<br/><br/>
### ì˜¬ë°”ë¥¸ ë¡œê·¸ ì‚¬ìš©ë²•
- log.debug("data=" + data)
  - ë¡œê·¸ ì¶œë ¥ ë ˆë²¨ ë•Œë¬¸ì— ë¡œê·¸ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì•„ë„ í•´ë‹¹ ì½”ë“œì— ìˆëŠ” ë¬¸ì ë”í•˜ê¸° ì—°ì‚°ì´ ì‹¤ì œ ì‹¤í–‰ë˜ì–´ ë²„ë¦°ë‹¤.
- log.debug("data={}", data)
  - ë¡œê·¸ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©´ ì•„ë¬´ì¼ë„ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤. ë”°ë¼ì„œ ì˜ë¯¸ì—†ëŠ” ì—°ì‚°ì´ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤.
<br/><br/>
### ë¡œê·¸ ì‚¬ìš©ì‹œ ì¥ì 
- ë¡œê·¸ ë ˆë²¨ì— ë”°ë¼ ê°œë°œ ì„œë²„ì—ì„œëŠ” ëª¨ë“  ë¡œê·¸ë¥¼ ì¶œë ¥í•˜ê³ , ìš´ì˜ì„œë²„ì—ì„œëŠ” ì¶œë ¥í•˜ì§€ ì•ŠëŠ” ë“± ë¡œê·¸ë¥¼ ìƒí™©ì— ë§ê²Œ ì¡°ì ˆí•  ìˆ˜ ìˆë‹¤.
- ì‹œìŠ¤í…œ ì•„ì›ƒ ì½˜ì†”ì—ë§Œ ì¶œë ¥í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, íŒŒì¼ì´ë‚˜ ë„¤íŠ¸ì›Œí¬ ë“±, ë¡œê·¸ë¥¼ ë³„ë„ì˜ ìœ„ì¹˜ì— ë‚¨ê¸¸ ìˆ˜ ìˆë‹¤.
<br/><br/>
# ğŸ” ìš”ì²­ ë§¤í•‘
ìŠ¤í”„ë§ ë¶€íŠ¸ 3.0 ë¶€í„°ëŠ” `/hello-basic`, `/hello-basic/`ëŠ” ì„œë¡œ ë‹¤ë¥¸ URL ìš”ì²­ì„ ì‚¬ìš©í•´ì•¼ í•œë‹¤.<br/>
ê¸°ì¡´ì—ëŠ” ë§ˆì§€ë§‰ì— ìˆëŠ” /(slash)ë¥¼ ì œê±°í–ˆì§€ë§Œ, ìŠ¤í”„ë§ ë¶€íŠ¸ 3.0 ë¶€í„°ëŠ” ë§ˆì§€ë§‰ì˜ /(slash)ë¥¼ ìœ ì§€í•œë‹¤.<br/>
ë”°ë¼ì„œ ë‹¤ìŒê³¼ ê°™ì´ ë‹¤ë¥´ê²Œ ë§¤í•‘í•´ì„œ ì‚¬ìš©í•´ì•¼ í•œë‹¤.
- ë§¤í•‘: /hello-basic -> URL ìš”ì²­: /hello-basic
- ë§¤í•‘: /hello-basic/ -> URL ìš”ì²­: /hello-basic/
<br/><br/>
### HTTP ë©”ì„œë“œ ë§¤í•‘
@RequestMappingì— method ì†ì„±ìœ¼ë¡œ HTTP ë©”ì„œë“œë¥¼ ì§€ì •í•  ìˆ˜ ìˆë‹¤.
```java
@RequestMapping(value = "/hello-basic", method = RequestMethod.GET)
```
<br/><br/>HTTP ë©”ì„œë“œë¥¼ ì¶•ì•½í•œ ì• ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•  ìˆ˜ë„ ìˆë‹¤.
```java
@GetMapping(value = "/hello-basic")
```
<br/><br/>
### PathVariable(ê²½ë¡œ ë³€ìˆ˜) ì‚¬ìš©
```java
    @GetMapping("/mapping/{userId}")
    public String mappingPath(@PathVariable("userId") String data) {
        log.info("mappingPath userId={}", data);
        return "ok";
    }
```
`@RequestMapping`ì€ URL ê²½ë¡œë¥¼ í…œí”Œë¦¿í™” í•  ìˆ˜ ìˆëŠ”ë°, `@PathVariable`ì„ ì‚¬ìš©í•˜ë©´ ë§¤ì¹­ë˜ëŠ” ë¶€ë¶„ì„ í¸ë¦¬í•˜ê²Œ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤.<br/>
`@PathVariable`ì˜ ì´ë¦„ê³¼ íŒŒë¼ë¯¸í„° ì´ë¦„ì´ ê°™ìœ¼ë©´ ìƒëµí•  ìˆ˜ ìˆë‹¤.<br/><br/>
ì‹¤í–‰: http://localhost:8080/mapping/userA<br/><br/>
![image](https://github.com/jang9205/spring_study/assets/123082616/97001b0f-f093-44ab-9f57-01da7a56a792)<br/><br/>
### PathVariable ì‚¬ìš© - ë‹¤ì¤‘
```java
    @GetMapping("/mapping/users/{userId}/orders/{orderId}")
    public String mappingPath(@PathVariable String userId, @PathVariable Long orderId) {
        log.info("mappingPath userId={}, orderId={}", userId, orderId);
        return "ok";
    }
```
ì‹¤í–‰: http://localhost:8080/mapping/users/userA/orders/100<br/><br/>
![image](https://github.com/jang9205/spring_study/assets/123082616/4472a0a4-7e35-4258-86f0-dbe4f8643c3a)<br/><br/>
### íŠ¹ì • íŒŒë¼ë¯¸í„° ì¡°ê±´ ë§¤í•‘
```java
    @GetMapping(value = "/mapping-param", params = "mode=debug")
    public String mappingParam() {
        log.info("mappingParam");
        return "ok";
    }
```
íŠ¹ì • íŒŒë¼ë¯¸í„°ê°€ ìˆê±°ë‚˜ ì—†ì–´ì•¼ ë§¤í•‘ì´ ë˜ëŠ” ì¡°ê±´ì„ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤.<br/>
`params`ì˜ ê°’ì´ ì„¤ì •ê³¼ ë‹¤ë¥´ê²Œ ì˜¤ë©´ **400 bad_request**ë¥¼ ë°˜í™˜í•œë‹¤.<br/><br/>
ì‹¤í–‰: http://localhost:8080/mapping-param?mode=debug<br/><br/>
### íŠ¹ì • í—¤ë” ì¡°ê±´ ë§¤í•‘
```java
    @GetMapping(value = "/mapping-header", headers = "mode=debug")
    public String mappingHeader() {
        log.info("mappingHeader");
        return "ok";
    }
```
HTTP ìš”ì²­ í—¤ë”ì— íŠ¹ì • í—¤ë”ê°€ ìˆê±°ë‚˜ ì—†ì–´ì•¼ ë§¤í•‘ì´ ë˜ëŠ” ì¡°ê±´ì„ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤.<br/><br/>
![image](https://github.com/jang9205/spring_study/assets/123082616/8c2d5e37-bc9f-49bd-a5ec-e948619b9324)<br/><br/>
í—¤ë”ì— ì¡°ê±´ê°’ì„ ì¶”ê°€í•˜ë©´ ì •ìƒì ìœ¼ë¡œ ë§¤í•‘ì´ ëœë‹¤.<br/><br/>
### ë¯¸ë””ì–´ íƒ€ì… ì¡°ê±´ ë§¤í•‘ - HTTP ìš”ì²­ Content-Type, consume
```java
    @PostMapping(value = "/mapping-consume", consumes = "application/json")
    public String mappingConsumes() {
        log.info("mappingConsumes");
        return "ok";
    }
```
`consume`ì€ HTTP ìš”ì²­ì˜ Content-Type í—¤ë”ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë¯¸ë””ì–´ íƒ€ì…ìœ¼ë¡œ ë§¤í•‘í•œë‹¤.<br/>
ì¡°ê±´ê³¼ ë§ì§€ ì•Šìœ¼ë©´ HTTP 415 ìƒíƒœì½”ë“œ(Unsupported Media Type)ì„ ë°˜í™˜í•œë‹¤.<br/><br/>
![image](https://github.com/jang9205/spring_study/assets/123082616/e0bb0232-52a2-41f6-8371-f9e7d08d730c)<br/><br/>
### ë¯¸ë””ì–´ íƒ€ì… ì¡°ê±´ ë§¤í•‘ - HTTP ìš”ì²­ Accept, produce
```java
    @PostMapping(value = "/mapping-produce", produces = "text/html")
    public String mappingProduces() {
        log.info("mappingProduces");
        return "ok";
    }
```
`produces`ëŠ” HTTP ìš”ì²­ì˜ Accept í—¤ë”ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë¯¸ë””ì–´ íƒ€ì…ìœ¼ë¡œ ë§¤í•‘í•œë‹¤.<br/>
ì¡°ê±´ê³¼ ë§ì§€ ì•Šìœ¼ë©´ HTTP 406 ìƒíƒœì½”ë“œ(Not Acceptable)ì„ ë°˜í™˜í•œë‹¤.<br/><br/>
![image](https://github.com/jang9205/spring_study/assets/123082616/088e7429-3487-4ba1-98de-c33e59334312)<br/><br/>
# ğŸ” ìš”ì²­ ë§¤í•‘ - API ì˜ˆì‹œ
íšŒì› ê´€ë¦¬ë¥¼ **HTTP API**ë¡œ ë§Œë“ ë‹¤ ìƒê°í•˜ê³  ë§¤í•‘ì„ ì•Œì•„ë³¸ë‹¤.<br/><br/>
### íšŒì› ê´€ë¦¬ API
- íšŒì› ëª©ë¡ ì¡°íšŒ: GET /users
- íšŒì› ë“±ë¡: POST /users
- íšŒì› ì¡°íšŒ: GET /users/{userId}
- íšŒì› ìˆ˜ì •: PATCH /users/{userId}
- íšŒì› ì‚­ì œ: DELETE /users/{userId}
#### 
`src/main/java/hello/springmvc/basic/requestmapping/MappingClassController`
```java
@RestController
@RequestMapping("/mapping/users")
public class MappingClassController {

    @GetMapping
    public String user() {
        return "get users";
    }

    @PostMapping
    public String addUser() {
        return "post user";
    }

    @GetMapping("/{userId}")
    public String findUser(@PathVariable String userId) {
        return "get userId=" + userId;
    }

    @PatchMapping("/{userId}")
    public String updateUser(@PathVariable String userId) {
        return "update userId=" + userId;
    }

    @DeleteMapping("/{userId}")
    public String deleteUser(@PathVariable String userId) {
        return "delete userId=" + userId;
    }
}
```
í´ë˜ìŠ¤ ë ˆë²¨ì— `@RequestMapping("/mapping/users")` ë§¤í•‘ ì •ë³´ë¥¼ ë‘ë©´ ë©”ì„œë“œ ë ˆë²¨ì—ì„œ í•´ë‹¹ ì •ë³´ë¥¼ ì¡°í•©í•´ì„œ ì‚¬ìš©í•œë‹¤.<br/><br/>
**Postmanìœ¼ë¡œ í…ŒìŠ¤íŠ¸**
- íšŒì› ëª©ë¡ ì¡°íšŒ: GET /mapping/users
- íšŒì› ë“±ë¡: POST /mapping/users
- íšŒì› ì¡°íšŒ: GET /mapping/users/id1
- íšŒì› ìˆ˜ì •: PATCH /mapping/users/id1
- íšŒì› ì‚­ì œ: DELETE /mapping/users/id1
<br/><br/>
# ğŸ” HTTP ìš”ì²­ - ê¸°ë³¸, í—¤ë” ì¡°íšŒ
ì• ë…¸í…Œì´ì…˜ ê¸°ë°˜ì˜ ìŠ¤í”„ë§ ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” ë‹¤ì–‘í•œ íŒŒë¼ë¯¸í„°ë¥¼ ì§€ì›í•œë‹¤.<br/>
HTTP í—¤ë” ì •ë³´ë¥¼ ì¡°íšŒí•˜ëŠ” ë°©ë²•ì„ ì•Œì•„ë³´ì.<br/><br/>
`src/main/java/hello/springmvc/basic/request/RequestHeaderController`
```java
    @RequestMapping("/headers")
    public String headers(HttpServletRequest request,
                          HttpServletResponse response,
                          HttpMethod httpMethod,
                          Locale locale,
                          @RequestHeader MultiValueMap<String, String> headerMap,
                          @RequestHeader("host") String host,
                          @CookieValue(value = "myCookie", required = false) String cookie
                          ) {
```
ëª¨ë“  í—¤ë” ì •ë³´ë¥¼ **MultiValueMap**(í•˜ë‚˜ì˜ í‚¤ì— ì—¬ëŸ¬ ê°’ ë°›ìŒ) í˜•ì‹ìœ¼ë¡œ ì¡°íšŒí•˜ê³ ,<br/>
íŠ¹ì • í—¤ë” ì •ë³´ë¥¼ ì¡°íšŒí•  ë•Œì—” @RequestHeaderì˜ value ê°’ìœ¼ë¡œ íŠ¹ì • ì •ë³´ë¥¼ ë„£ëŠ”ë‹¤.<br/><br/>
@RequestHeaderì™€ @CookieValueì— **required** ì†ì„±ìœ¼ë¡œ í•„ìˆ˜ ê°’ ì—¬ë¶€, **defaultValue** ì†ì„±ìœ¼ë¡œ ê¸°ë³¸ ê°’ì„ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.<br/><br/>
í•´ë‹¹ ì •ë³´ì— ëŒ€í•œ logë¥¼ ì°ì–´ë³´ë©´ ì•„ë˜ì™€ ê°™ì€ ê²°ê³¼ê°€ ë‚˜ì˜¨ë‹¤.
```
2023-09-16T00:54:06.068+09:00  INFO 35888 --- [nio-8080-exec-2] h.s.b.request.RequestHeaderController    : request=org.apache.catalina.connector.RequestFacade@667e2828
2023-09-16T00:54:06.071+09:00  INFO 35888 --- [nio-8080-exec-2] h.s.b.request.RequestHeaderController    : response=org.apache.catalina.connector.ResponseFacade@7e640b8c
2023-09-16T00:54:06.072+09:00  INFO 35888 --- [nio-8080-exec-2] h.s.b.request.RequestHeaderController    : httpMethod=GET
2023-09-16T00:54:06.072+09:00  INFO 35888 --- [nio-8080-exec-2] h.s.b.request.RequestHeaderController    : locale=ko_KR
2023-09-16T00:54:06.072+09:00  INFO 35888 --- [nio-8080-exec-2] h.s.b.request.RequestHeaderController    : headerMap={mode=[debug], user-agent=[PostmanRuntime/7.33.0], accept=[*/*], postman-token=[8c97f8b4-afdd-496e-ac77-fa1a1acefff5], host=[localhost:8080], accept-encoding=[gzip, deflate, br], connection=[keep-alive]}
2023-09-16T00:54:06.072+09:00  INFO 35888 --- [nio-8080-exec-2] h.s.b.request.RequestHeaderController    : header host=localhost:8080
2023-09-16T00:54:06.072+09:00  INFO 35888 --- [nio-8080-exec-2] h.s.b.request.RequestHeaderController    : myCookie=null
```
@Controllerì˜ ì‚¬ìš© ê°€ëŠ¥í•œ íŒŒë¼ë¯¸í„° ëª©ë¡ì€ ê³µì‹ ë©”ë‰´ì–¼ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆë‹¤.<br/><br/>
[Spring ê³µì‹ ë©”ë‰´ì–¼](https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-ann-arguments)<br/><br/>
# ğŸ” HTTP ìš”ì²­ íŒŒë¼ë¯¸í„° - ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°, HTML Form
í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì„œë²„ë¡œ ìš”ì²­ ë°ì´í„°ë¥¼ ì „ë‹¬í•  ë•ŒëŠ” ì£¼ë¡œ ë‹¤ìŒ 3ê°€ì§€ ë°©ë²•ì„ ì‚¬ìš©í•œë‹¤.<br/><br/>
- **GET - ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°**
  - /url?username=hello&age=20
  - ë©”ì‹œì§€ ë°”ë”” ì—†ì´, URLì˜ ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ì— ë°ì´í„°ë¥¼ í¬í•¨í•´ì„œ ì „ë‹¬
  - ì˜ˆ) ê²€ìƒ‰, í•„í„°, í˜ì´ì§•ë“±ì—ì„œ ë§ì´ ì‚¬ìš©í•˜ëŠ” ë°©ì‹
- **POST - HTML Form**
  - content-type: application/x-www-form-urlencoded
  - ë©”ì‹œì§€ ë°”ë””ì— ì¿¼ë¦¬ íŒŒë¦¬ë¯¸í„° í˜•ì‹ìœ¼ë¡œ ì „ë‹¬ username=hello&age=20
  - ì˜ˆ) íšŒì› ê°€ì…, ìƒí’ˆ ì£¼ë¬¸, HTML Form ì‚¬ìš©
- **HTTP message bodyì— ë°ì´í„°ë¥¼ ì§ì ‘ ë‹´ì•„ì„œ ìš”ì²­**
  - HTTP APIì—ì„œ ì£¼ë¡œ ì‚¬ìš©, JSON, XML, TEXT
  - ë°ì´í„° í˜•ì‹ì€ ì£¼ë¡œ JSON ì‚¬ìš©
  - POST, PUT, PATCH
#### 
GET ì¿¼ë¦¬ íŒŒë¦¬ë¯¸í„° ì „ì†¡ ë°©ì‹ê³¼ POST HTML Form ì „ì†¡ ë°©ì‹ì€ ë‘˜ë‹¤ í˜•ì‹ì´ ê°™ìœ¼ë¯€ë¡œ êµ¬ë¶„ì—†ì´ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤.<br/>
ì´ê²ƒì„ ê°„ë‹¨íˆ **ìš”ì²­ íŒŒë¼ë¯¸í„°(request parameter) ì¡°íšŒ**ë¼ê³  í•œë‹¤.<br/><br/>
### GET ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°
`src/main/java/hello/springmvc/basic/request/RequestParamController`
```java
@Slf4j
@Controller
public class RequestParamController {

    @RequestMapping("/request-param-v1")
    public void requestParamV1(HttpServletRequest request, HttpServletResponse response) throws IOException {
        String username = request.getParameter("username");
        int age = Integer.parseInt(request.getParameter("age"));

        log.info("username={}, age={}", username, age);

        response.getWriter().write("ok");
    }
}
```
íŒŒë¼ë¯¸í„°ì˜ ê°’ì„ ê°€ì ¸ì™€ logë¥¼ ì¶œë ¥í•˜ëŠ” ì½”ë“œë¥¼ ì‘ì„±í•œë‹¤.<br/><br/>
**request.getParameter()**: ì—¬ê¸°ì„œëŠ” HttpServletRequestê°€ ì œê³µí•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ìš”ì²­ íŒŒë¼ë¯¸í„°ë¥¼ ì¡°íšŒí–ˆë‹¤.<br/><br/>
ì‹¤í–‰: http://localhost:8080/request-param-v1?username=hello&age=20<br/><br/>
### POST - HTML Form
`src/main/resources/static/basic/hello-form.html`
```html
...
<form action="/request-param-v1" method="post">
    username: <input type="text" name="username" />
    age: <input type="text" name="age" />
    <button type="submit">ì „ì†¡</button>
</form>
...
```
ë¦¬ì†ŒìŠ¤ëŠ” `/resources/static` ì•„ë˜ì— ë‘ë©´ ìŠ¤í”„ë§ ë¶€íŠ¸ê°€ ìë™ìœ¼ë¡œ ì¸ì‹í•œë‹¤.<br/><br/>
ì‹¤í–‰: http://localhost:8080/basic/hello-form.html<br/><br/>
# ğŸ” HTTP ìš”ì²­ íŒŒë¼ë¯¸í„° - @RequestParam
ìŠ¤í”„ë§ì´ ì œê³µí•˜ëŠ” `@RequestParam`ì„ ì‚¬ìš©í•˜ë©´ ìš”ì²­ íŒŒë¼ë¯¸í„°ë¥¼ ë§¤ìš° í¸ë¦¬í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.<br/><br/>
### requestParamV2
```java
@Slf4j
@Controller
public class RequestParamController {

    @ResponseBody
    @RequestMapping("/request-param-v2")
    public String requestParamV2(
            @RequestParam("username") String memberName,
            @RequestParam("age") int memberAge) {

        log.info("username={}, age={}", memberName, memberAge);
        return "ok";
    }
}
```
**@RequestParam**: íŒŒë¼ë¯¸í„° ì´ë¦„ìœ¼ë¡œ ë°”ì¸ë”©<br/>
**@ResponseBody**: ë°˜í™˜ ê°’ìœ¼ë¡œ ë·°ë¥¼ ì°¾ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, HTTP ë©”ì‹œì§€ ë°”ë””ì— ë°”ë¡œ ì…ë ¥<br/><br/>
ì‹¤í–‰: http://localhost:8080/request-param-v2?username=hello&age=20<br/><br/>
### requestParamV3
```java
    @ResponseBody
    @RequestMapping("/request-param-v3")
    public String requestParamV3(
            @RequestParam String username,
            @RequestParam int age) {

        log.info("username={}, age={}", username, age);
        return "ok";
    }
```
HTTP íŒŒë¼ë¯¸í„° ì´ë¦„ì´ ë³€ìˆ˜ ì´ë¦„ê³¼ ê°™ìœ¼ë©´ `@RequestParam(name="xx")` ìƒëµ ê°€ëŠ¥<br/><br/>
ì‹¤í–‰: http://localhost:8080/request-param-v3?username=hello&age=20<br/><br/>
### requestParamV4
```java
    @ResponseBody
    @RequestMapping("/request-param-v4")
    public String requestParamV4(String username, int age) {

        log.info("username={}, age={}", username, age);
        return "ok";
    }
```
**String**, **int**, **Integer** ë“±ì˜ ë‹¨ìˆœ íƒ€ì…ì´ë©´ `@RequestParam`ë„ ìƒëµ ê°€ëŠ¥<br/><br/>
ì‹¤í–‰: http://localhost:8080/request-param-v4?username=hello&age=20<br/><br/>
### íŒŒë¼ë¯¸í„° í•„ìˆ˜ ì—¬ë¶€
```java
    @ResponseBody
    @RequestMapping("/request-param-required")
    public String requestParamRequired(
            @RequestParam(required = true) String username,
            @RequestParam(required = false) Integer age) {

        log.info("username={}, age={}", username, age);
        return "ok";
    }
```
`required`ë¥¼ í†µí•´ íŒŒë¼ë¯¸í„° í•„ìˆ˜ ì—¬ë¶€ë¥¼ ì•Œ ìˆ˜ ìˆë‹¤.<br/>
requiredì˜ ê¸°ë³¸ ê°’ì€ trueì´ë©°, í•´ë‹¹ íŒŒë¼ë¯¸í„°ë¥¼ í•„ìˆ˜ë¡œ ë°›ì•„ì•¼ í•œë‹¤.<br/><br/>
- http://localhost:8080/request-param-required?age=20
  - í•„ìˆ˜ë¡œ ì„¤ì •í•œ íŒŒë¼ë¯¸í„°ë¥¼ ë°›ì§€ ëª»í•˜ë©´ 400 ì˜ˆì™¸ê°€ ë°œìƒí•œë‹¤.<br/><br/>
- http://localhost:8080/request-param-required?username=
  - íŒŒë¼ë¯¸í„° ì´ë¦„ë§Œ ìˆê³  ê°’ì´ ì—†ëŠ” ê²½ìš° ì˜ˆì™¸ê°€ ë°œìƒí•˜ì§€ ì•Šê³  ë¹ˆë¬¸ì("")ë¡œ í†µê³¼ëœë‹¤.
<br/><br/>![image](https://github.com/jang9205/spring_study/assets/123082616/a9d2620c-f506-437c-b42c-2d86febc84bd)<br/><br/>
- **ageì˜ ë³€ìˆ˜í˜•ì´ Integerì¸ ì´ìœ **
  - nullì„ intì— ì…ë ¥í•˜ëŠ” ê²ƒì€ ë¶ˆê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì´ë‹¤.(500 ì˜ˆì™¸ ë°œìƒ)
  - ë”°ë¼ì„œ nullì„ ë°›ì„ ìˆ˜ ìˆëŠ” Integerë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜ `defaultValue`ë¥¼ ì‚¬ìš©í•œë‹¤.
<br/><br/>
### ê¸°ë³¸ ê°’ ì ìš©
```java
    @ResponseBody
    @RequestMapping("/request-param-default")
    public String requestParamDefault(
            @RequestParam(required = true, defaultValue = "guest") String username,
            @RequestParam(required = false, defaultValue = "-1") int age) {

        log.info("username={}, age={}", username, age);
        return "ok";
    }
```
`defaultValue`ë¥¼ ì‚¬ìš©í•˜ë©´ íŒŒë¼ë¯¸í„°ì— ê¸°ë³¸ ê°’ì„ ì ìš©í•  ìˆ˜ ìˆë‹¤.<br/>
ê¸°ë³¸ ê°’ì„ ì ìš©í•˜ë©´ requiredëŠ” ì˜ë¯¸ê°€ ì—†ë‹¤.<br/><br/>
ë˜í•œ defaultValueëŠ” ë¹ˆ ë¬¸ì("")ì˜ ê²½ìš°ì—ë„ ì„¤ì •í•œ ê¸°ë³¸ ê°’ì´ ì ìš©ëœë‹¤.<br/><br/>
ì‹¤í–‰: http://localhost:8080/request-param-default<br/><br/>
![image](https://github.com/jang9205/spring_study/assets/123082616/eeabfeac-9332-4476-a237-c183b5fdac66)<br/><br/>
### íŒŒë¼ë¯¸í„°ë¥¼ Mapìœ¼ë¡œ ì¡°íšŒ
```java
    @ResponseBody
    @RequestMapping("/request-param-map")
    public String requestParamMap(@RequestParam Map<String, Object> paramMap) {
        log.info("username={}, age={}", paramMap.get("username"), paramMap.get("age"));
        return "ok";
    }
```
íŒŒë¼ë¯¸í„°ë¥¼ í•œ ë²ˆì— ì¡°íšŒí•˜ê¸° ìœ„í•´ Mapì„ ì‚¬ìš©í•œë‹¤.<br/><br/>
ì‹¤í–‰: http://localhost:8080/request-param-map?username=hello&age=20<br/><br/>
![image](https://github.com/jang9205/spring_study/assets/123082616/16636855-2071-487e-bcf1-fdf0f864e4e9)<br/><br/>
# ğŸ” HTTP ìš”ì²­ íŒŒë¼ë¯¸í„° - @ModelAttribute
ìš”ì²­ íŒŒë¼ë¯¸í„°ë¥¼ ë°›ì•„ì„œ í•„ìš”í•œ ê°ì²´ë¥¼ ë§Œë“¤ê³  ê·¸ ê°ì²´ì— ê°’ì„ ë„£ì–´ì£¼ì–´ì•¼ í•˜ëŠ”ë°,<br/>
ìŠ¤í”„ë§ì€ ì´ ê³¼ì •ì„ ì™„ì „íˆ ìë™í™”í•´ì£¼ëŠ” **@ModelAttribute** ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤.<br/><br/>
ë¨¼ì € ìš”ì²­ íŒŒë¼ë¯¸í„°ë¥¼ ë°”ì¸ë”© ë°›ì„ ê°ì²´ë¥¼ ë§Œë“ ë‹¤.<br/><br/>
`src/main/java/hello/springmvc/basic/HelloData`
```java
@Data
public class HelloData {
    private String username;
    private int age;
}
```
@Data ì• ë…¸í…Œì´ì…˜ì€ @Getter, @Setter, @ToString, @EqualsAndHashCode, @RequiredArgsConstructorë¥¼ ìë™ìœ¼ë¡œ ì ìš©í•´ ì¤€ë‹¤.<br/><br/>
`src/main/java/hello/springmvc/basic/request/RequestParamController`
```java
    @ResponseBody
    @RequestMapping("/model-attribute-v1")
    public String modelAttributeV1(@ModelAttribute HelloData helloData) {
        log.info("username={}, age={}", helloData.getUsername(), helloData.getAge());
        return "ok";
    }
```
@ModelAttributeë¥¼ ì‚¬ìš©í•˜ë©´ HelloData ê°ì²´ë¥¼ ìƒì„±í•˜ê³ , ìš”ì²­ íŒŒë¼ë¯¸í„°ì˜ ì´ë¦„ìœ¼ë¡œ HelloData ê°ì²´ì˜ í”„ë¡œí¼í‹°ë¥¼ ì°¾ëŠ”ë‹¤.<br/>
ê·¸ë¦¬ê³  í•´ë‹¹ í”„ë¡œí¼í‹°ì˜ setterë¥¼ í˜¸ì¶œí•´ì„œ íŒŒë¼ë¯¸í„°ì˜ ê°’ì„ ì…ë ¥(ë°”ì¸ë”©)í•œë‹¤.<br/><br/>
ì˜ˆ) íŒŒë¼ë¯¸í„° ì´ë¦„ì´ username ì´ë©´ setUsername() ë©”ì„œë“œë¥¼ ì°¾ì•„ì„œ í˜¸ì¶œí•˜ë©´ì„œ ê°’ì„ ì…ë ¥í•œë‹¤.<br/><br/>
ë˜í•œ, @ModelAttributeë„ ë‹¤ìŒì²˜ëŸ¼ ìƒëµí•  ìˆ˜ ìˆë‹¤.
```java
    public String modelAttributeV2(HelloData helloData) {
```
<br/><br/>
# ğŸ” HTTP ìš”ì²­ ë©”ì‹œì§€ - ë‹¨ìˆœ í…ìŠ¤íŠ¸
ìš”ì²­ íŒŒë¼ë¯¸í„°ì™€ ë‹¤ë¥´ê²Œ, HTTP ë©”ì‹œì§€ ë°”ë””ë¥¼ í†µí•´ ë°ì´í„°ê°€ ì§ì ‘ ë„˜ì–´ì˜¤ëŠ” ê²½ìš°ëŠ” @RequestParam, @ModelAttributeë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.<br/><br/>
### HttpEntity
`src/main/java/hello/springmvc/basic/request/RequestBodyStringController`
```java
    @PostMapping("/request-body-string-v3")
    public HttpEntity<String> requestBodyStringV3(HttpEntity<String> httpEntity) throws IOException {

        String messageBody = httpEntity.getBody();
        log.info("messageBody={}", messageBody);

        return new HttpEntity<>("ok");
    }
```
- **HttpEntity**: HTTP header, body ì •ë³´ë¥¼ í¸ë¦¬í•˜ê²Œ ì¡°íšŒ
  - ë©”ì‹œì§€ ë°”ë”” ì •ë³´ë¥¼ ì§ì ‘ ì¡°íšŒ
  - ìš”ì²­ íŒŒë¼ë¯¸í„°ë¥¼ ì¡°íšŒí•˜ëŠ” ê¸°ëŠ¥ê³¼ ê´€ê³„ ì—†ìŒ
- HttpEntityëŠ” ì‘ë‹µì—ë„ ì‚¬ìš© ê°€ëŠ¥
  - ë©”ì‹œì§€ ë°”ë”” ì •ë³´ ì§ì ‘ ë°˜í™˜
  - í—¤ë” ì •ë³´ í¬í•¨ ê°€ëŠ¥
  - view ì¡°íšŒX
#### 
HttpEntityë¥¼ ìƒì†ë°›ì€ ë‹¤ìŒ ê°ì²´ë“¤ë„ ê°™ì€ ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤.
- **RequestEntity**
  - HttpMethod, url ì •ë³´ê°€ ì¶”ê°€, ìš”ì²­ì—ì„œ ì‚¬ìš©
- **ResponseEntity**
  - HTTP ìƒíƒœ ì½”ë“œ ì„¤ì • ê°€ëŠ¥, ì‘ë‹µì—ì„œ ì‚¬ìš©
  - `return new ResponseEntity<String>("Hello World", responseHeaders, HttpStatus.CREATED)`
