# ğŸ“– JDBC ì´í•´
<br/><br/>
# ğŸ” í”„ë¡œì íŠ¸ ìƒì„±
[ìŠ¤í”„ë§ ë¶€íŠ¸ ìŠ¤íƒ€í„°](https://start.spring.io/)ì—ì„œ ìŠ¤í”„ë§ í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•œë‹¤.<br/><br/>
![image](https://github.com/jang9205/spring_study/assets/123082616/fde12282-e9a6-49b6-ba94-4f1ba6c12027)<br/><br/>
# ğŸ” H2 ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •
H2 ë°ì´í„°ë² ì´ìŠ¤ëŠ” ê°œë°œì´ë‚˜ í…ŒìŠ¤íŠ¸ ìš©ë„ë¡œ ì‚¬ìš©í•˜ê¸° ì¢‹ì€ ê°€ë³ê³  í¸ë¦¬í•œ DBì´ë‹¤.<br/>
ê·¸ë¦¬ê³  SQLì„ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” ì›¹ í™”ë©´ì„ ì œê³µí•œë‹¤.<br/><br/>
### ë‹¤ìš´ë¡œë“œ ë° ì„¤ì¹˜
https://www.h2database.com/html/download-archive.html<br/><br/>
h2 ë°ì´í„°ë² ì´ìŠ¤ ë²„ì „ì€ ìŠ¤í”„ë§ ë¶€íŠ¸ ë²„ì „ì— ë§ì¶˜ë‹¤.
- ìŠ¤í”„ë§ ë¶€íŠ¸ 2.xë¥¼ ì‚¬ìš©í•˜ë©´ 1.4.200 ë²„ì „ì„ ë‹¤ìš´ë¡œë“œ ë°›ìœ¼ë©´ ëœë‹¤.
- ìŠ¤í”„ë§ ë¶€íŠ¸ 3.xë¥¼ ì‚¬ìš©í•˜ë©´ 2.1.214 ë²„ì „ ì´ìƒ ì‚¬ìš©í•´ì•¼ í•œë‹¤.
<br/><br/>
### ë°ì´í„°ë² ì´ìŠ¤ íŒŒì¼ ìƒì„± ë°©ë²•
![image](https://github.com/jang9205/spring_study/assets/123082616/8b6ace58-e45a-46c6-a09d-68c4e857b169)
- ì‚¬ìš©ìëª…ì€ `sa` ì…ë ¥
- JDBC URLì— `jdbc:h2:~/test` ì…ë ¥
- `~/test.mv.db` íŒŒì¼ ìƒì„± í™•ì¸
- ì ‘ì†í•  ë•ŒëŠ” JDBC URLì— `jdbc:h2:tcp://localhost/~/test` ì…ë ¥
<br/><br/>
### í…Œì´ë¸” ìƒì„±í•˜ê¸°
í…Œì´ë¸” ê´€ë¦¬ë¥¼ ìœ„í•´ í”„ë¡œì íŠ¸ ë£¨íŠ¸ì— `sql/schema.sql` íŒŒì¼ì„ ìƒì„±í•œë‹¤.
```sql
drop table member if exists cascade;
create table member (
   member_id varchar(10),
   money integer not null default 0,
   primary key (member_id)
);
insert into member(member_id, money) values ('hi1',10000);
insert into member(member_id, money) values ('hi2',20000);
```
![image](https://github.com/jang9205/spring_study/assets/123082616/72c441d1-8280-4715-9e99-eca467ca3e81)<br/><br/>
ë‹¤ìŒ ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•´ì„œ ì €ì¥í•œ ë°ì´í„°ê°€ ì˜ ë‚˜ì˜¤ëŠ”ì§€ ê²°ê³¼ë¥¼ í™•ì¸í•œë‹¤.
```sql
select * from member;
```
![image](https://github.com/jang9205/spring_study/assets/123082616/e3bd787c-a0b0-4af7-8f4c-2781001be177)<br/><br/>
# ğŸ” JDBC ì´í•´
### JDBC ë“±ì¥ ì´ìœ 
ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ê°œë°œí•  ë•Œ ì¤‘ìš”í•œ ë°ì´í„°ëŠ” ëŒ€ë¶€ë¶„ ë°ì´í„°ë² ì´ìŠ¤ì— ë³´ê´€í•œë‹¤.<br/><br/>
#### í´ë¼ì´ì–¸íŠ¸, ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„, DB
![image](https://github.com/jang9205/spring_study/assets/123082616/142fbbac-539d-4485-8947-0bc4776eeaa6)<br/><br/>
í´ë¼ì´ì–¸íŠ¸ê°€ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ë¥¼ í†µí•´ ë°ì´í„°ë¥¼ ì €ì¥í•˜ê±°ë‚˜ ì¡°íšŒí•˜ë©´, ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ëŠ” ë‹¤ìŒ ê³¼ì •ì„ í†µí•´ì„œ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì‚¬ìš©í•œë‹¤.<br/><br/>
#### ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ì™€ DB - ì¼ë°˜ì ì¸ ì‚¬ìš©ë²•
![image](https://github.com/jang9205/spring_study/assets/123082616/654c6398-7b00-438d-8899-bd85533a0f7d)<br/><br/>
1. ì»¤ë„¥ì…˜ ì—°ê²°: ì£¼ë¡œ TCP/IPë¥¼ ì‚¬ìš©í•´ì„œ ì»¤ë„¥ì…˜ì„ ì—°ê²°í•œë‹¤.
2. SQL ì „ë‹¬: ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ëŠ” DBê°€ ì´í•´í•  ìˆ˜ ìˆëŠ” SQLì„ ì—°ê²°ëœ ì»¤ë„¥ì…˜ì„ í†µí•´ DBì— ì „ë‹¬í•œë‹¤.
3. ê²°ê³¼ ì‘ë‹µ: DBëŠ” ì „ë‹¬ëœ SQLì„ ìˆ˜í–‰í•˜ê³  ê·¸ ê²°ê³¼ë¥¼ ì‘ë‹µí•œë‹¤. ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ëŠ” ì‘ë‹µ ê²°ê³¼ë¥¼ í™œìš©í•œë‹¤.
<br/><br/>
#### ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ì™€ DB - DB ë³€ê²½
![image](https://github.com/jang9205/spring_study/assets/123082616/f9df2650-450a-4ed2-8645-b0735042058d)<br/><br/>
ë¬¸ì œëŠ” ê°ê°ì˜ ë°ì´í„°ë² ì´ìŠ¤ë§ˆë‹¤ ì»¤ë„¥ì…˜ì„ ì—°ê²°í•˜ëŠ” ë°©ë²•, SQLì„ ì „ë‹¬í•˜ëŠ” ë°©ë²•, ê·¸ë¦¬ê³  ê²°ê³¼ë¥¼ ì‘ë‹µ ë°›ëŠ” ë°©ë²•ì´ ëª¨ë‘ ë‹¤ë¥´ë‹¤ëŠ” ì ì´ë‹¤. ì°¸ê³ ë¡œ ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ëŠ” ìˆ˜ì‹­ê°œê°€ ìˆë‹¤.<br/><br/>
ì—¬ê¸°ì—ëŠ” 2ê°€ì§€ í° ë¬¸ì œê°€ ìˆë‹¤.
1. ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ë‹¤ë¥¸ ì¢…ë¥˜ì˜ ë°ì´í„°ë² ì´ìŠ¤ë¡œ ë³€ê²½í•˜ë©´ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ì— ê°œë°œëœ ë°ì´í„°ë² ì´ìŠ¤ ì‚¬ìš© ì½”ë“œë„ í•¨ê»˜ ë³€ê²½í•´ì•¼ í•œë‹¤.
2. ê°œë°œìê°€ ê°ê°ì˜ ë°ì´í„°ë² ì´ìŠ¤ë§ˆë‹¤ ì»¤ë„¥ì…˜ ì—°ê²°, SQL ì „ë‹¬, ê·¸ë¦¬ê³  ê·¸ ê²°ê³¼ë¥¼ ì‘ë‹µ ë°›ëŠ” ë°©ë²•ì„ ìƒˆë¡œ í•™ìŠµí•´ì•¼ í•œë‹¤.
#### 
ì´ëŸ° ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ JDBCë¼ëŠ” ìë°” í‘œì¤€ì´ ë“±ì¥í•œë‹¤.
### JDBC í‘œì¤€ ì¸í„°í˜ì´ìŠ¤
JDBC(Java Database Connectivity)ëŠ” ìë°”ì—ì„œ ë°ì´í„°ë² ì´ìŠ¤ì— ì ‘ì†í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ìë°” APIë‹¤. JDBCëŠ” ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ìë£Œë¥¼ ì¿¼ë¦¬í•˜ê±°ë‚˜ ì—…ë°ì´íŠ¸í•˜ëŠ” ë°©ë²•ì„ ì œê³µí•œë‹¤.<br/><br/>
![image](https://github.com/jang9205/spring_study/assets/123082616/e6d4230e-4c65-45a6-ac62-c0890394e5dc)<br/><br/>
ëŒ€í‘œì ìœ¼ë¡œ ë‹¤ìŒ 3ê°€ì§€ ê¸°ëŠ¥ì„ í‘œì¤€ ì¸í„°í˜ì´ìŠ¤ë¡œ ì •ì˜í•´ì„œ ì œê³µí•œë‹¤.
- `java.sql.Connection` - ì—°ê²°
- `java.sql.Statement` - SQLì„ ë‹´ì€ ë‚´ìš©
- `java.sql.ResultSet` - SQL ìš”ì²­ ì‘ë‹µ
#### 
ìë°”ëŠ” ì´ë ‡ê²Œ í‘œì¤€ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì •ì˜í•´ë‘ì—ˆë‹¤. ì´ì œë¶€í„° ê°œë°œìëŠ” ì´ í‘œì¤€ ì¸í„°í˜ì´ìŠ¤ë§Œ ì‚¬ìš©í•´ì„œ ê°œë°œí•˜ë©´ ëœë‹¤. ê·¸ëŸ°ë° ì¸í„°í˜ì´ìŠ¤ë§Œ ìˆë‹¤ê³ í•´ì„œ ê¸°ëŠ¥ì´ ë™ì‘í•˜ì§€ëŠ” ì•ŠëŠ”ë‹¤. ì´ JDBC ì¸í„°í˜ì´ìŠ¤ë¥¼ ê°ê°ì˜ DB ë²¤ë”(íšŒì‚¬)ì—ì„œ ìì‹ ì˜ DBì— ë§ë„ë¡ êµ¬í˜„í•´ì„œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ ì œê³µí•˜ëŠ”ë°, ì´ê²ƒì„ JDBC ë“œë¼ì´ë²„ë¼ í•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´ì„œ MySQL DBì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ê²ƒì€ MySQL JDBC ë“œë¼ì´ë²„ë¼ í•˜ê³ , Oracle DBì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ê²ƒì€ Oracle JDBC ë“œë¼ì´ë²„ë¼ í•œë‹¤.
#### MySQL ë“œë¼ì´ë²„ ì‚¬ìš©
![image](https://github.com/jang9205/spring_study/assets/123082616/fc8e8450-5a62-4fa0-9389-c9279efad6e1)
#### Oracle ë“œë¼ì´ë²„ ì‚¬ìš©
![image](https://github.com/jang9205/spring_study/assets/123082616/e64f15c7-911f-4967-9219-ef0c5fe8effb)<br/><br/>
ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œì§ì€ ì´ì œ JDBC í‘œì¤€ ì¸í„°í˜ì´ìŠ¤ì—ë§Œ ì˜ì¡´í•œë‹¤. ë”°ë¼ì„œ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ë‹¤ë¥¸ ì¢…ë¥˜ì˜ ë°ì´í„°ë² ì´ìŠ¤ë¡œ ë³€ê²½í•˜ê³  ì‹¶ìœ¼ë©´ JDBC êµ¬í˜„ ë¼ì´ë¸ŒëŸ¬ë¦¬ë§Œ ë³€ê²½í•˜ë©´ ëœë‹¤. ë”°ë¼ì„œ ë‹¤ë¥¸ ì¢…ë¥˜ì˜ ë°ì´í„°ë² ì´ìŠ¤ë¡œ ë³€ê²½í•´ë„ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ì˜ ì‚¬ìš© ì½”ë“œë¥¼ ê·¸ëŒ€ë¡œ ìœ ì§€í•  ìˆ˜ ìˆë‹¤.<br/><br/>
ê°œë°œìëŠ” JDBC í‘œì¤€ ì¸í„°í˜ì´ìŠ¤ ì‚¬ìš©ë²•ë§Œ í•™ìŠµí•˜ë©´ ëœë‹¤. í•œë²ˆ ë°°ì›Œë‘ë©´ ìˆ˜ì‹­ê°œì˜ ë°ì´í„°ë² ì´ìŠ¤ì— ëª¨ë‘ ë™ì¼í•˜ê²Œ ì ìš©í•  ìˆ˜ ìˆë‹¤.<br/><br/>
**í‘œì¤€í™”ì˜ í•œê³„**
> JDBCì˜ ë“±ì¥ìœ¼ë¡œ ë§ì€ ê²ƒì´ í¸ë¦¬í•´ì¡Œì§€ë§Œ, ê°ê°ì˜ ë°ì´í„°ë² ì´ìŠ¤ë§ˆë‹¤ SQL, ë°ì´í„° íƒ€ì… ë“±ì˜ ì¼ë¶€ ì‚¬ìš©ë²• ë‹¤ë¥´ë‹¤. ANSI SQLì´ë¼ëŠ” í‘œì¤€ì´ ìˆê¸°ëŠ” í•˜ì§€ë§Œ ì¼ë°˜ì ì¸ ë¶€ë¶„ë§Œ ê³µí†µí™”í–ˆê¸° ë•Œë¬¸ì— í•œê³„ê°€ ìˆë‹¤. ëŒ€í‘œì ìœ¼ë¡œ ì‹¤ë¬´ì—ì„œ ê¸°ë³¸ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” í˜ì´ì§• SQLì€ ê°ê°ì˜ ë°ì´í„°ë² ì´ìŠ¤ë§ˆë‹¤ ì‚¬ìš©ë²•ì´ ë‹¤ë¥´ë‹¤.<br/>
ê²°êµ­ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ë³€ê²½í•˜ë©´ JDBC ì½”ë“œëŠ” ë³€ê²½í•˜ì§€ ì•Šì•„ë„ ë˜ì§€ë§Œ SQLì€ í•´ë‹¹ ë°ì´í„°ë² ì´ìŠ¤ì— ë§ë„ë¡ ë³€ê²½í•´ì•¼ í•œë‹¤.<br/>
ì°¸ê³ ë¡œ JPA(Java Persistence API)ë¥¼ ì‚¬ìš©í•˜ë©´ ì´ë ‡ê²Œ ê°ê°ì˜ ë°ì´í„°ë² ì´ìŠ¤ë§ˆë‹¤ ë‹¤ë¥¸ SQLì„ ì •ì˜í•´ì•¼ í•˜ëŠ” ë¬¸ì œë„ ë§ì€ ë¶€ë¶„ í•´ê²°í•  ìˆ˜ ìˆë‹¤.
#### 
<br/><br/>
# ğŸ” JDBCì™€ ìµœì‹  ë°ì´í„° ì ‘ê·¼ ê¸°ìˆ 
JDBCëŠ” 1997ë…„ì— ì¶œì‹œë  ì •ë„ë¡œ ì˜¤ë˜ëœ ê¸°ìˆ ì´ê³ , ì‚¬ìš©í•˜ëŠ” ë°©ë²•ë„ ë³µì¡í•˜ë‹¤.<br/>
ê·¸ë˜ì„œ ìµœê·¼ì—ëŠ” JDBCë¥¼ ì§ì ‘ ì‚¬ìš©í•˜ê¸° ë³´ë‹¤ëŠ” JDBCë¥¼ í¸ë¦¬í•˜ê²Œ ì‚¬ìš©í•˜ëŠ” ë‹¤ì–‘í•œ ê¸°ìˆ ì´ ì¡´ì¬í•œë‹¤.<br/>
ëŒ€í‘œì ìœ¼ë¡œ SQL Mapperì™€ ORM ê¸°ìˆ ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆë‹¤.<br/><br/>
#### JDBC ì§ì ‘ ì‚¬ìš©
![image](https://github.com/jang9205/spring_study/assets/123082616/98b69cb0-0ef4-43cd-9cb0-eeb86a9f0172)<br/><br/>
#### SQL Mapper
![image](https://github.com/jang9205/spring_study/assets/123082616/e869d462-da79-4ded-ae31-53acd3a889c8)<br/><br/>
- ì¥ì : JDBCë¥¼ í¸ë¦¬í•˜ê²Œ ì‚¬ìš©í•˜ë„ë¡ ë„ì™€ì¤€ë‹¤.
  - SQL ì‘ë‹µ ê²°ê³¼ë¥¼ ê°ì²´ë¡œ í¸ë¦¬í•˜ê²Œ ë³€í™˜í•´ì¤€ë‹¤.
  - JDBCì˜ ë°˜ë³µ ì½”ë“œë¥¼ ì œê±°í•´ì¤€ë‹¤.
- ë‹¨ì : ê°œë°œìê°€ SQLì„ ì§ì ‘ ì‘ì„±í•´ì•¼í•œë‹¤.
- ëŒ€í‘œ ê¸°ìˆ : ìŠ¤í”„ë§ JdbcTemplate, MyBatis
<br/><br/>
#### ORM ê¸°ìˆ 
![image](https://github.com/jang9205/spring_study/assets/123082616/c9995f28-630f-4242-b5c1-798605850b24)<br/><br/>
- ORMì€ ê°ì²´ë¥¼ ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸”ê³¼ ë§¤í•‘í•´ì£¼ëŠ” ê¸°ìˆ ì´ë‹¤. ì´ ê¸°ìˆ  ë•ë¶„ì— ê°œë°œìëŠ” ë°˜ë³µì ì¸ SQLì„ ì§ì ‘ ì‘ì„±í•˜ì§€ ì•Šê³ , ORM ê¸°ìˆ ì´ ê°œë°œì ëŒ€ì‹ ì— SQLì„ ë™ì ìœ¼ë¡œ ë§Œë“¤ì–´ ì‹¤í–‰í•´ì¤€ë‹¤. ì¶”ê°€ë¡œ ê°ê°ì˜ ë°ì´í„°ë² ì´ìŠ¤ë§ˆë‹¤ ë‹¤ë¥¸ SQLì„ ì‚¬ìš©í•˜ëŠ” ë¬¸ì œë„ ì¤‘ê°„ì—ì„œ í•´ê²°í•´ì¤€ë‹¤.
- ëŒ€í‘œ ê¸°ìˆ : JPA, í•˜ì´ë²„ë„¤ì´íŠ¸, ì´í´ë¦½ìŠ¤ë§í¬
- JPAëŠ” ìë°” ì§„ì˜ì˜ ORM í‘œì¤€ ì¸í„°í˜ì´ìŠ¤ì´ê³ , ì´ê²ƒì„ êµ¬í˜„í•œ ê²ƒìœ¼ë¡œ í•˜ì´ë²„ë„¤ì´íŠ¸ì™€ ì´í´ë¦½ìŠ¤ ë§í¬ ë“±ì˜ êµ¬í˜„ ê¸°ìˆ ì´ ìˆë‹¤.
<br/><br/>
### SQL Mapper vs ORM ê¸°ìˆ 
SQL Mapperì™€ ORM ê¸°ìˆ  ë‘˜ë‹¤ ê°ê° ì¥ë‹¨ì ì´ ìˆë‹¤.<br/>
ì‰½ê²Œ ì„¤ëª…í•˜ìë©´ SQL MapperëŠ” SQLë§Œ ì§ì ‘ ì‘ì„±í•˜ë©´ ë‚˜ë¨¸ì§€ ë²ˆê±°ë¡œìš´ ì¼ì€ SQL Mapperê°€ ëŒ€ì‹  í•´ê²°í•´ì¤€ë‹¤.<br/>
SQL MapperëŠ” SQLë§Œ ì‘ì„±í•  ì¤„ ì•Œë©´ ê¸ˆë°© ë°°ì›Œì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.<br/>
ORMê¸°ìˆ ì€ SQL ìì²´ë¥¼ ì‘ì„±í•˜ì§€ ì•Šì•„ë„ ë˜ì–´ì„œ ê°œë°œ ìƒì‚°ì„±ì´ ë§¤ìš° ë†’ì•„ì§„ë‹¤.<br/>
í¸ë¦¬í•œ ë°˜ë©´ì— ì‰¬ìš´ ê¸°ìˆ ì€ ì•„ë‹ˆë¯€ë¡œ ì‹¤ë¬´ì—ì„œ ì‚¬ìš©í•˜ë ¤ë©´ ê¹Šì´ìˆê²Œ í•™ìŠµí•´ì•¼ í•œë‹¤.<br/><br/>
> ì´ëŸ° ê¸°ìˆ ë“¤ë„ ë‚´ë¶€ì—ì„œëŠ” ëª¨ë‘ JDBCë¥¼ ì‚¬ìš©í•œë‹¤. ë”°ë¼ì„œ JDBCë¥¼ ì§ì ‘ ì‚¬ìš©í•˜ì§€ëŠ” ì•Šë”ë¼ë„, JDBCê°€ ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ”ì§€ ê¸°ë³¸ ì›ë¦¬ë¥¼ ì•Œì•„ë‘ì–´ì•¼ í•œë‹¤. ê·¸ë˜ì•¼ í•´ë‹¹ ê¸°ìˆ ë“¤ì„ ë” ê¹Šì´ìˆê²Œ ì´í•´í•  ìˆ˜ ìˆê³ , ë¬´ì—‡ë³´ë‹¤ ë¬¸ì œê°€ ë°œìƒí–ˆì„ ë•Œ ê·¼ë³¸ì ì¸ ë¬¸ì œë¥¼ ì°¾ì•„ì„œ í•´ê²°í•  ìˆ˜ ìˆë‹¤ JDBCëŠ” ìë°” ê°œë°œìë¼ë©´ ê¼­ ì•Œì•„ë‘ì–´ì•¼ í•˜ëŠ” í•„ìˆ˜ ê¸°ë³¸ ê¸°ìˆ ì´ë‹¤.
#### 
<br/><br/>
# ğŸ” ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°
ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì—°ê²°í•´ë³¸ë‹¤.<br/><br/>
`java/hello/jdbc/connection/ConnectionConst`
```java
public abstract class ConnectionConst {
    public static final String URL = "jdbc:h2:tcp://localhost/~/test";
    public static final String USERNAME = "sa";
    public static final String PASSWORD = "";
}
```
ë°ì´í„°ë² ì´ìŠ¤ì— ì ‘ì†í•˜ëŠ”ë° í•„ìš”í•œ ê¸°ë³¸ ì •ë³´ë¥¼ í¸ë¦¬í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ìƒìˆ˜ë¡œ ë§Œë“¤ì—ˆë‹¤.<br/><br/>
`java/hello/jdbc/connection/DBConnectionUtil`
```java
@Slf4j
public class DBConnectionUtil {

    public static Connection getConnection() {
        try {
            Connection connection = DriverManager.getConnection(URL, USERNAME, PASSWORD);
            log.info("get connection={}, class={}", connection, connection.getClass());
            return connection;
        } catch (SQLException e) {
            throw new IllegalStateException(e);
        }
    }
}
```
JDBCë¥¼ ì‚¬ìš©í•´ì„œ ì‹¤ì œ ë°ì´í„°ë² ì´ìŠ¤ì— ì—°ê²°í•˜ëŠ” ì½”ë“œì´ë‹¤.<br/><br/>
ë°ì´í„°ë² ì´ìŠ¤ì— ì—°ê²°í•˜ë ¤ë©´ JDBCê°€ ì œê³µí•˜ëŠ” `DriverManager.getConnection(..)`ë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤.<br/>
ì´ë ‡ê²Œ í•˜ë©´ ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ìˆëŠ” ë°ì´í„°ë² ì´ìŠ¤ ë“œë¼ì´ë²„ë¥¼ ì°¾ì•„ì„œ í•´ë‹¹ ë“œë¼ì´ë²„ê°€ ì œê³µí•˜ëŠ” ì»¤ë„¥ì…˜ì„ ë°˜í™˜í•´ì¤€ë‹¤.<br/>
ì—¬ê¸°ì„œëŠ” H2 ë°ì´í„°ë² ì´ìŠ¤ ë“œë¼ì´ë²„ê°€ ì‘ë™í•´ì„œ ì‹¤ì œ ë°ì´í„°ë² ì´ìŠ¤ì™€ ì»¤ë„¥ì…˜ì„ ë§ºê³  ê·¸ ê²°ê³¼ë¥¼ ë°˜í™˜í•´ì¤€ë‹¤.<br/><br/>
`test/java/hello/jdbc/connection/DBConnectionUtilTest`
```java
@Slf4j
class DBConnectionUtilTest {

    @Test
    void connection() {
        Connection connection = DBConnectionUtil.getConnection();
        assertThat(connection).isNotNull();
    }
}
```
**ì‹¤í–‰ê²°ê³¼**
```
DBConnectionUtil -- get connection=conn0: url=jdbc:h2:tcp://localhost/~/test user=SA, class=class org.h2.jdbc.JdbcConnection
```
`class=class org.h2.jdbc.JdbcConnection`ì€ H2 ë°ì´í„°ë² ì´ìŠ¤ ë“œë¼ì´ë²„ê°€ ì œê³µí•˜ëŠ” H2 ì „ìš© ì»¤ë„¥ì…˜ì´ë‹¤.<br/>
ë¬¼ë¡  ì´ ì»¤ë„¥ì…˜ì€ JDBC í‘œì¤€ ì»¤ë„¥ì…˜ ì¸í„°í˜ì´ìŠ¤ì¸ `java.sql.Connection` ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ê³  ìˆë‹¤.<br/><br/>
### JDBC DriverManager ì—°ê²° ì´í•´
#### JDBC ì»¤ë„¥ì…˜ ì¸í„°í˜ì´ìŠ¤ì™€ êµ¬í˜„
![image](https://github.com/jang9205/spring_study/assets/123082616/2630a827-b7d1-41ae-9ec1-cdfda38361ef)
- JDBCëŠ” `java.sql.Connection` í‘œì¤€ ì»¤ë„¥ì…˜ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì •ì˜í•œë‹¤.
- H2 ë°ì´í„°ë² ì´ìŠ¤ ë“œë¼ì´ë²„ëŠ” JDBC Connection ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ `org.h2.jdbc.JdbcConnection` êµ¬í˜„ì²´ë¥¼ ì œê³µí•œë‹¤.
<br/><br/>
#### DriverManager ì»¤ë„¥ì…˜ ìš”ì²­ íë¦„
![image](https://github.com/jang9205/spring_study/assets/123082616/2d105d3c-5750-4407-8e53-0ef472cd1471)<br/><br/>
JDBCê°€ ì œê³µí•˜ëŠ” `DriverManager`ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ë“±ë¡ëœ DB ë“œë¼ì´ë²„ë“¤ì„ ê´€ë¦¬í•˜ê³ , ì»¤ë„¥ì…˜ì„ íšë“í•˜ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤.
1. ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œì§ì—ì„œ ì»¤ë„¥ì…˜ì´ í•„ìš”í•˜ë©´ `DriverManager.getConnection()`ì„ í˜¸ì¶œí•œë‹¤.
2. `DriverManager`ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ë“±ë¡ëœ ë“œë¼ì´ë²„ ëª©ë¡ì„ ìë™ìœ¼ë¡œ ì¸ì‹í•œë‹¤. ì´ ë“œë¼ì´ë²„ë“¤ì—ê²Œ ìˆœì„œëŒ€ë¡œ ë‹¤ìŒ ì •ë³´ë¥¼ ë„˜ê²¨ì„œ ì»¤ë„¥ì…˜ì„ íšë“í•  ìˆ˜ ìˆëŠ”ì§€ í™•ì¸í•œë‹¤.(ê°ê°ì˜ ë“œë¼ì´ë²„ëŠ” URL ì •ë³´ë¥¼ ì²´í¬í•´ì„œ ë³¸ì¸ì´ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ìš”ì²­ì¸ì§€ í™•ì¸í•œë‹¤.)
3. ì´ë ‡ê²Œ ì°¾ì€ ì»¤ë„¥ì…˜ êµ¬í˜„ì²´ê°€ í´ë¼ì´ì–¸íŠ¸ì— ë°˜í™˜ëœë‹¤.
<br/><br/>
# ğŸ” JDBC ê°œë°œ - ë“±ë¡
JDBCë¥¼ ì‚¬ìš©í•´ì„œ íšŒì›(`Member`) ë°ì´í„°ë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì— ê´€ë¦¬í•˜ëŠ” ê¸°ëŠ¥ì„ ê°œë°œí•´ ë³¸ë‹¤.<br/><br/>
`java/hello/jdbc/domain/Member`
```java
@Data
public class Member {

    private String memberId;
    private int money;

    public Member() {
    }

    public Member(String memberId, int money) {
        this.memberId = memberId;
        this.money = money;
    }
}
```
íšŒì›ì˜ IDì™€ í•´ë‹¹ íšŒì›ì´ ì†Œì§€í•œ ê¸ˆì•¡ì„ í‘œí˜„í•˜ëŠ” ë‹¨ìˆœí•œ í´ë˜ìŠ¤ì´ë‹¤. ì•ì„œ ë§Œë“¤ì–´ë‘” `member` í…Œì´ë¸”ì— ë°ì´í„°ë¥¼ ì €ì¥í•˜ê³  ì¡°íšŒí•  ë•Œ ì‚¬ìš©í•œë‹¤.<br/><br/>
`java/hello/jdbc/repository/MemberRepositoryV0`
```java
@Slf4j
public class MemberRepositoryV0 {

    public Member save(Member member) throws SQLException {
        String sql = "insert into member(member_id, money) values (?, ?)";

        Connection con = null;
        PreparedStatement pstmt = null;

        try {
            con = getConnection();
            pstmt = con.prepareStatement(sql);
            pstmt.setString(1, member.getMemberId());
            pstmt.setInt(2, member.getMoney());
            pstmt.executeUpdate();
            return member;
        } catch (SQLException e) {
            log.error("db error", e);
            throw e;
        } finally {
            close(con, pstmt, null);
        }
    }

    private void close(Connection con, Statement stmt, ResultSet rs) {

        if (rs != null) {
            try {
                rs.close();
            } catch (SQLException e) {
                log.info("error", e);
            }
        }

        if (stmt != null) {
            try {
                stmt.close();
            } catch (SQLException e) {
                log.info("error", e);
            }
        }

        if (con != null) {
            try {
                con.close();
            } catch (SQLException e) {
                log.info("error", e);
            }
        }
    }

    private Connection getConnection() {
        return DBConnectionUtil.getConnection();
    }
}
```
#### ì»¤ë„¥ì…˜ íšë“
- `getConnection()`: ì´ì „ì— ë§Œë“¤ì–´ë‘” `DBConnectionUtil`ë¥¼ í†µí•´ì„œ ë°ì´í„°ë² ì´ìŠ¤ ì»¤ë„¥ì…˜ì„ íšë“í•œë‹¤.
#### save() - SQL ì „ë‹¬
- `sql`: ë°ì´í„°ë² ì´ìŠ¤ì— ì „ë‹¬í•  SQLì„ ì •ì˜í•œë‹¤. ì—¬ê¸°ì„œëŠ” ë°ì´í„°ë¥¼ ë“±ë¡í•´ì•¼ í•˜ë¯€ë¡œ `insert sql`ì„ ì¤€ë¹„í•œë‹¤.
- `con.prepareStatement(sql)`: ë°ì´í„°ë² ì´ìŠ¤ì— ì „ë‹¬í•  SQLê³¼ íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬í•  ë°ì´í„°ë“¤ì„ ì¤€ë¹„í•œë‹¤.
  - `pstmt.setString(1, member.getMemberId())`: SQLì˜ ì²«ë²ˆì§¸ `?`ì— ê°’ì„ ì§€ì •í•œë‹¤. ë¬¸ìì´ë¯€ë¡œ `setString`ì„ ì‚¬ìš©í•œë‹¤.
  - `pstmt.setInt(2, member.getMoney())`: SQLì˜ ë‘ë²ˆì§¸ `?`ì— ê°’ì„ ì§€ì •í•œë‹¤. `Int`í˜• ìˆ«ìì´ë¯€ë¡œ `setInt`ë¥¼ ì§€ì •í•œë‹¤.
- `pstmt.executeUpdate()`: `Statement`ë¥¼ í†µí•´ ì¤€ë¹„ëœ SQLì„ ì»¤ë„¥ì…˜ì„ í†µí•´ ì‹¤ì œ ë°ì´í„°ë² ì´ìŠ¤ì— ì „ë‹¬í•œë‹¤. `executeUpdate()`ì€ `int`ë¥¼ ë°˜í™˜í•˜ëŠ”ë° ì˜í–¥ë°›ì€ DB row ìˆ˜ë¥¼ ë°˜í™˜í•œë‹¤. ì—¬ê¸°ì„œëŠ” í•˜ë‚˜ì˜ rowë¥¼ ë“±ë¡í–ˆìœ¼ë¯€ë¡œ 1ì„ ë°˜í™˜í•œë‹¤.
#### ë¦¬ì†ŒìŠ¤ ì •ë¦¬
ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•˜ê³  ë‚˜ë©´ ë¦¬ì†ŒìŠ¤ë¥¼ ì •ë¦¬í•´ì•¼ í•œë‹¤. ë¦¬ì†ŒìŠ¤ë¥¼ ì •ë¦¬í•  ë•ŒëŠ” í•­ìƒ ì—­ìˆœìœ¼ë¡œ í•´ì•¼í•œë‹¤.<br/>
ì˜ˆì™¸ê°€ ë°œìƒí•˜ë“ , í•˜ì§€ ì•Šë“  í•­ìƒ ìˆ˜í–‰ë˜ì–´ì•¼ í•˜ë¯€ë¡œ `finally` êµ¬ë¬¸ì— ì£¼ì˜í•´ì„œ ì‘ì„±í•´ì•¼ í•œë‹¤.
#### PreparedStatement
`PreparedStatement`ëŠ” `Statement`ì˜ ìì‹ íƒ€ì…ì¸ë°, `?`ë¥¼ í†µí•œ íŒŒë¼ë¯¸í„° ë°”ì¸ë”©ì„ ê°€ëŠ¥í•˜ê²Œ í•´ì¤€ë‹¤.<br/>
ì°¸ê³ ë¡œ SQL Injection ê³µê²©ì„ ì˜ˆë°©í•˜ë ¤ë©´ `PreparedStatement`ë¥¼ í†µí•œ íŒŒë¼ë¯¸í„° ë°”ì¸ë”© ë°©ì‹ì„ ì‚¬ìš©í•´ì•¼ í•œë‹¤.<br/><br/><br/><br/>
`test/java/hello/jdbc/repository/MemberRepositoryV0Test`
```java
class MemberRepositoryV0Test {

    MemberRepositoryV0 repository = new MemberRepositoryV0();

    @Test
    void crud() throws SQLException {
        Member member = new Member("memberV0", 10000);
        repository.save(member);
    }
}
```
**ì‹¤í–‰ ê²°ê³¼**<br/><br/>
![image](https://github.com/jang9205/spring_study/assets/123082616/ff3ccdef-c8d6-4970-b28b-dfe95011b459)<br/><br/>
# ğŸ” JDBC ê°œë°œ - ì¡°íšŒ
JDBCë¥¼ í†µí•´ ì´ì „ì— ì €ì¥í•œ ë°ì´í„°ë¥¼ ì¡°íšŒí•˜ëŠ” ê¸°ëŠ¥ì„ ê°œë°œí•´ ë³¸ë‹¤.<br/><br/>
`java/hello/jdbc/repository/MemberRepositoryV0`
```java
    ...

    public Member findById(String memberId) throws SQLException {
        String sql = "select * from member where member_Id = ?";

        Connection con = null;
        PreparedStatement pstmt = null;
        ResultSet rs = null;

        try {
            con = getConnection();
            pstmt = con.prepareStatement(sql);
            pstmt.setString(1, memberId);

            rs = pstmt.executeQuery();
            if (rs.next()) {
                Member member = new Member();
                member.setMemberId(rs.getString("member_id"));
                member.setMoney(rs.getInt("money"));
                return member;
            } else {
                throw new NoSuchElementException("member not found memberId=" + memberId);
            }
        } catch (SQLException e) {
            log.error("db error", e);
            throw e;
        } finally {
            close(con, pstmt, rs);
        }
    }
    ...
```
#### findById() - ì¿¼ë¦¬ ì‹¤í–‰
- `sql`: ë°ì´í„° ì¡°íšŒë¥¼ ìœ„í•œ select SQLì„ ì¤€ë¹„í•œë‹¤.
- `rs = pstmt.executeQuery()`: ë°ì´í„°ë¥¼ ë³€ê²½í•  ë•ŒëŠ” `executeUpdate()`ë¥¼ ì‚¬ìš©í•˜ì§€ë§Œ, ë°ì´í„°ë¥¼ ì¡°íšŒí•  ë•ŒëŠ” `executeQuery()`ë¥¼ ì‚¬ìš©í•œë‹¤. `executeQuery()`ëŠ” ê²°ê³¼ë¥¼ `ResultSet`ì— ë‹´ì•„ì„œ ë°˜í™˜í•œë‹¤.
#### ResultSet
- `ResultSet`ì€ ë°ì´í„° êµ¬ì¡°ì´ë‹¤. ë³´í†µ select ì¿¼ë¦¬ì˜ ê²°ê³¼ê°€ ìˆœì„œëŒ€ë¡œ ë“¤ì–´ê°„ë‹¤.
  - ì˜ˆë¥¼ ë“¤ì–´ì„œ `select member_id, money`ë¼ê³  ì§€ì •í•˜ë©´ `member_id`, `money`ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ë°ì´í„°ê°€ ì €ì¥ëœë‹¤.
- `ResultSet` ë‚´ë¶€ì— ìˆëŠ” ì»¤ì„œ(`cursor`)ë¥¼ ì´ë™í•´ì„œ ë‹¤ìŒ ë°ì´í„°ë¥¼ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤.
- `rs.next()`: ì´ê²ƒì„ í˜¸ì¶œí•˜ë©´ ì»¤ì„œê°€ ë‹¤ìŒìœ¼ë¡œ ì´ë™í•œë‹¤. ì°¸ê³ ë¡œ ìµœì´ˆì˜ ì»¤ì„œëŠ” ë°ì´í„°ë¥¼ ê°€ë¦¬í‚¤ê³  ìˆì§€ ì•Šê¸° ë•Œë¬¸ì— `rs.next()`ë¥¼ ìµœì´ˆ í•œë²ˆì€ í˜¸ì¶œí•´ì•¼ ë°ì´í„°ë¥¼ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤.
  - `rs.next()`ì˜ ê²°ê³¼ê°€ `true`ë©´ ì»¤ì„œì˜ ì´ë™ ê²°ê³¼ ë°ì´í„°ê°€ ìˆë‹¤ëŠ” ëœ»ì´ë‹¤.
  - `rs.next()`ì˜ ê²°ê³¼ê°€ `false`ë©´ ë”ì´ìƒ ì»¤ì„œê°€ ê°€ë¦¬í‚¤ëŠ” ë°ì´í„°ê°€ ì—†ë‹¤ëŠ” ëœ»ì´ë‹¤.
- `rs.getString("member_id")`: í˜„ì¬ ì»¤ì„œê°€ ê°€ë¦¬í‚¤ê³  ìˆëŠ” ìœ„ì¹˜ì˜ `member_id` ë°ì´í„°ë¥¼ `String` íƒ€ì…ìœ¼ë¡œ ë°˜í™˜í•œë‹¤.
- `rs.getInt("money")`: í˜„ì¬ ì»¤ì„œê°€ ê°€ë¦¬í‚¤ê³  ìˆëŠ” ìœ„ì¹˜ì˜ `money` ë°ì´í„°ë¥¼ `int` íƒ€ì…ìœ¼ë¡œ ë°˜í™˜í•œë‹¤.
<br/><br/>![image](https://github.com/jang9205/spring_study/assets/123082616/98f4c93c-efaf-4bd0-9991-38bcb2c2fe44)<br/><br/>
`findById()`ì—ì„œëŠ” íšŒì› í•˜ë‚˜ë¥¼ ì¡°íšŒí•˜ëŠ” ê²ƒì´ ëª©ì ì´ë‹¤. ë”°ë¼ì„œ ì¡°íšŒ ê²°ê³¼ê°€ í•­ìƒ 1ê±´ì´ë¯€ë¡œ `while` ëŒ€ì‹ ì— `if`ë¥¼ ì‚¬ìš©í•œë‹¤.<br/><br/>
#### 
`test/java/hello/jdbc/repository/MemberRepositoryV0Test`
```java
    ...

    @Test
    void crud() throws SQLException {
        //save
        Member member = new Member("memberV1", 10000);
        repository.save(member);

        //findById
        Member findMember = repository.findById(member.getMemberId());
        log.info("findMember={}", findMember);
        assertThat(findMember).isEqualTo(member);
    }
}
```
<br/><br/>**ì‹¤í–‰ ë¡œê·¸**
```
MemberRepositoryV0Test -- findMember=Member(memberId=memberV1, money=10000)
```
- íšŒì›ì„ ë“±ë¡í•˜ê³  ê·¸ ê²°ê³¼ë¥¼ ë°”ë¡œ ì¡°íšŒí•´ì„œ í™•ì¸í•œë‹¤.
- ì‹¤í–‰ ê²°ê³¼ì— `member` ê°ì²´ì˜ ì°¸ì¡° ê°’ì´ ì•„ë‹ˆë¼ ì‹¤ì œ ë°ì´í„°ê°€ ë³´ì´ëŠ” ì´ìœ ëŠ” ë¡¬ë³µì˜ `@Data`ê°€ `toString()`ì„ ì ì ˆíˆ ì˜¤ë²„ë¼ì´ë”© í•´ì„œ ë³´ì—¬ì£¼ê¸° ë•Œë¬¸ì´ë‹¤.
- `isEqualTo()`: `findMember.equals(member)`ë¥¼ ë¹„êµí•œë‹¤. ê²°ê³¼ê°€ ì°¸ì¸ ì´ìœ ëŠ” ë¡¬ë³µì˜ `@Data`ëŠ” í•´ë‹¹ ê°ì²´ì˜ ëª¨ë“  í•„ë“œë¥¼ ì‚¬ìš©í•˜ë„ë¡ `equals()`ë¥¼ ì˜¤ë²„ë¼ì´ë”© í•˜ê¸° ë•Œë¬¸ì´ë‹¤.
<br/><br/>
# ğŸ” JDBC ê°œë°œ - ìˆ˜ì •, ì‚­ì œ
### íšŒì› ìˆ˜ì •
`java/hello/jdbc/repository/MemberRepositoryV0`
```java
    ...

    public void update(String memberId, int money) throws SQLException {
        String sql = "update member set money=? where member_id=?";

        Connection con = null;
        PreparedStatement pstmt = null;

        try {
            con = getConnection();
            pstmt = con.prepareStatement(sql);
            pstmt.setInt(1, money);
            pstmt.setString(2, memberId);
            int resultSize = pstmt.executeUpdate();
            log.info("resultSize={}", resultSize);
        } catch (SQLException e) {
            log.error("db error", e);
            throw e;
        } finally {
            close(con, pstmt, null);
        }
    }
    ...
```
`executeUpdate()`ëŠ” ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•˜ê³  ì˜í–¥ë°›ì€ rowìˆ˜ë¥¼ ë°˜í™˜í•œë‹¤. ì—¬ê¸°ì„œëŠ” í•˜ë‚˜ì˜ ë°ì´í„°ë§Œ ë³€ê²½í•˜ê¸° ë•Œë¬¸ì— ê²°ê³¼ë¡œ 1ì´ ë°˜í™˜ëœë‹¤.<br/><br/>
`test/java/hello/jdbc/repository/MemberRepositoryV0Test`
```java
    ...

    @Test
    void crud() throws SQLException {
        //save
        Member member = new Member("memberV2", 10000);
        repository.save(member);

        //findById
        Member findMember = repository.findById(member.getMemberId());
        log.info("findMember={}", findMember);
        assertThat(findMember).isEqualTo(member);

        //update: money: 10000 -> 20000
        repository.update(member.getMemberId(), 20000);
        Member updatedMember = repository.findById(member.getMemberId());
        assertThat(updatedMember.getMoney()).isEqualTo(20000);
    }
}
```
íšŒì› ë°ì´í„°ì˜ `money`ë¥¼ 10000ì—ì„œ 20000ìœ¼ë¡œ ìˆ˜ì •í•˜ê³ , DBì—ì„œ ë°ì´í„°ë¥¼ ë‹¤ì‹œ ì¡°íšŒí•´ì„œ 20000ìœ¼ë¡œ ë³€ê²½ ë˜ì—ˆëŠ”ì§€ ê²€ì¦í•œë‹¤.<br/><br/>
ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì¡°íšŒí•˜ë©´ `memberV2`ì˜ `money`ê°€ 20000ìœ¼ë¡œ ë³€ê²½ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.<br/>
![image](https://github.com/jang9205/spring_study/assets/123082616/20a2e06b-02fa-4a8a-9900-ad9f5dfbe211)<br/><br/>
### íšŒì› ì‚­ì œ
`java/hello/jdbc/repository/MemberRepositoryV0`
```java
    ...

    public void delete(String memberId) throws SQLException {
        String sql = "delete from member where member_id=?";

        Connection con = null;
        PreparedStatement pstmt = null;

        try {
            con = getConnection();
            pstmt = con.prepareStatement(sql);
            pstmt.setString(1, memberId);
            pstmt.executeUpdate();
        } catch (SQLException e) {
            log.error("db error", e);
            throw e;
        } finally {
            close(con, pstmt, null);
        }
    }
    ...
```
`test/java/hello/jdbc/repository/MemberRepositoryV0Test`
```java
    ...

    @Test
    void crud() throws SQLException {
        //save
        Member member = new Member("memberV100", 10000);
        repository.save(member);

        //findById
        Member findMember = repository.findById(member.getMemberId());
        log.info("findMember={}", findMember);
        assertThat(findMember).isEqualTo(member);

        //update: money: 10000 -> 20000
        repository.update(member.getMemberId(), 20000);
        Member updatedMember = repository.findById(member.getMemberId());
        assertThat(updatedMember.getMoney()).isEqualTo(20000);

        //delete
        repository.delete(member.getMemberId());
        assertThatThrownBy(() -> repository.findById(member.getMemberId()))
                .isInstanceOf(NoSuchElementException.class);
    }
}
```
íšŒì›ì„ ì‚­ì œí•œ ë‹¤ìŒ `findById()`ë¥¼ í†µí•´ì„œ ì¡°íšŒí•œë‹¤. íšŒì›ì´ ì—†ê¸° ë•Œë¬¸ì— `NoSuchElementException`ì´ ë°œìƒí•œë‹¤.<br/>
`assertThatThrownBy`ëŠ” í•´ë‹¹ ì˜ˆì™¸ê°€ ë°œìƒí•´ì•¼ ê²€ì¦ì— ì„±ê³µí•œë‹¤.